[{"id":"7318058599","type":"WatchEvent","actor":{"id":38447,"login":"dlo","display_login":"dlo","gravatar_id":"","url":"https://api.github.com/users/dlo","avatar_url":"https://avatars.githubusercontent.com/u/38447?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-01T19:26:34Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7317313629","type":"WatchEvent","actor":{"id":503577,"login":"larafale","display_login":"larafale","gravatar_id":"","url":"https://api.github.com/users/larafale","avatar_url":"https://avatars.githubusercontent.com/u/503577?"},"repo":{"id":73738971,"name":"lightningnetwork/lightning-rfc","url":"https://api.github.com/repos/lightningnetwork/lightning-rfc"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-01T17:00:10Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7317246898","type":"IssueCommentEvent","actor":{"id":3765732,"login":"halseth","display_login":"halseth","gravatar_id":"","url":"https://api.github.com/users/halseth","avatar_url":"https://avatars.githubusercontent.com/u/3765732?"},"repo":{"id":73738971,"name":"lightningnetwork/lightning-rfc","url":"https://api.github.com/repos/lightningnetwork/lightning-rfc"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/lightningnetwork/lightning-rfc/issues/389","repository_url":"https://api.github.com/repos/lightningnetwork/lightning-rfc","labels_url":"https://api.github.com/repos/lightningnetwork/lightning-rfc/issues/389/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lightning-rfc/issues/389/comments","events_url":"https://api.github.com/repos/lightningnetwork/lightning-rfc/issues/389/events","html_url":"https://github.com/lightningnetwork/lightning-rfc/pull/389","id":298136540,"number":389,"title":"BOLT 2: ensure that we always have a non-dust output.","user":{"login":"rustyrussell","id":775844,"avatar_url":"https://avatars2.githubusercontent.com/u/775844?v=4","gravatar_id":"","url":"https://api.github.com/users/rustyrussell","html_url":"https://github.com/rustyrussell","followers_url":"https://api.github.com/users/rustyrussell/followers","following_url":"https://api.github.com/users/rustyrussell/following{/other_user}","gists_url":"https://api.github.com/users/rustyrussell/gists{/gist_id}","starred_url":"https://api.github.com/users/rustyrussell/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/rustyrussell/subscriptions","organizations_url":"https://api.github.com/users/rustyrussell/orgs","repos_url":"https://api.github.com/users/rustyrussell/repos","events_url":"https://api.github.com/users/rustyrussell/events{/privacy}","received_events_url":"https://api.github.com/users/rustyrussell/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-02-19T00:59:09Z","updated_at":"2018-03-01T16:49:00Z","closed_at":null,"author_association":"COLLABORATOR","pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lightning-rfc/pulls/389","html_url":"https://github.com/lightningnetwork/lightning-rfc/pull/389","diff_url":"https://github.com/lightningnetwork/lightning-rfc/pull/389.diff","patch_url":"https://github.com/lightningnetwork/lightning-rfc/pull/389.patch"},"body":"This requirement is subtle: firstly, we ensure that both reserve values are above\r\nboth dust limits.  But we also need to make sure that fees (which can eat into\r\nreserves) always leave enough left: it makes sense to ensure that worst-case\r\nfees are actually covered by the channel capacity, otherwise the channel is\r\nlikely to be useless anyway.\r\n"},"comment":{"url":"https://api.github.com/repos/lightningnetwork/lightning-rfc/issues/comments/369655097","html_url":"https://github.com/lightningnetwork/lightning-rfc/pull/389#issuecomment-369655097","issue_url":"https://api.github.com/repos/lightningnetwork/lightning-rfc/issues/389","id":369655097,"user":{"login":"halseth","id":3765732,"avatar_url":"https://avatars1.githubusercontent.com/u/3765732?v=4","gravatar_id":"","url":"https://api.github.com/users/halseth","html_url":"https://github.com/halseth","followers_url":"https://api.github.com/users/halseth/followers","following_url":"https://api.github.com/users/halseth/following{/other_user}","gists_url":"https://api.github.com/users/halseth/gists{/gist_id}","starred_url":"https://api.github.com/users/halseth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halseth/subscriptions","organizations_url":"https://api.github.com/users/halseth/orgs","repos_url":"https://api.github.com/users/halseth/repos","events_url":"https://api.github.com/users/halseth/events{/privacy}","received_events_url":"https://api.github.com/users/halseth/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T16:49:00Z","updated_at":"2018-03-01T16:49:00Z","author_association":"CONTRIBUTOR","body":"Requiring channel reserve to be non-zero seems very restrictive to me, there are probably cases where a zero reserve is useful.\r\n\r\nMaybe I'm forgetting something, but isn't it more natural to just require that the balance after subtracting fees is above the channel reserve (which can be zero)? This is what we do in `lnd`."}},"public":true,"created_at":"2018-03-01T16:49:00Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7316429092","type":"PullRequestReviewCommentEvent","actor":{"id":3765732,"login":"halseth","display_login":"halseth","gravatar_id":"","url":"https://api.github.com/users/halseth","avatar_url":"https://avatars.githubusercontent.com/u/3765732?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171574783","pull_request_review_id":100445911,"id":171574783,"diff_hunk":"@@ -0,0 +1,542 @@\n+package aezeed\n+\n+import (\n+\t\"bytes\"\n+\t\"crypto/rand\"\n+\t\"encoding/binary\"\n+\t\"hash/crc32\"\n+\t\"io\"\n+\t\"strings\"\n+\t\"time\"\n+\n+\t\"github.com/Yawning/aez\"\n+\t\"github.com/kkdai/bstream\"\n+\n+\t\"golang.org/x/crypto/scrypt\"\n+)\n+\n+const (\n+\t// CipherSeedVersion is the current version of the aezeed scheme as\n+\t// defined in this package. This version indicates the following\n+\t// parameters for the deciphered cipher seed: a 1 byte version, 2 bytes\n+\t// for the Bitcoin Days Genesis timestamp, and 16 bytes for entropy. It\n+\t// also governs how the cipher seed should be enciphered. In this\n+\t// version we take the deciphered seed, create a 5 byte salt, use that\n+\t// with an optional passphrase to generate a 32-byte key (via scrypt),\n+\t// then encipher with aez (using the salt and version as AD). The final\n+\t// enciphered seed is: version || ciphertext || salt.\n+\tCipherSeedVersion uint8 = 0\n+\n+\t// DecipheredCipherSeedSize is the size of the plaintext seed resulting\n+\t// from deciphering the cipher seed. The size consists of the\n+\t// following:\n+\t//\n+\t//  * 1 byte version || 2 bytes timestamp || 16 bytes of entropy.\n+\t//\n+\t// The version is used by wallets to know how to re-derive relevant\n+\t// addresses, the 2 byte timestamp a BDG (Bitcoin Days Genesis) offset,\n+\t// and finally, the 16 bytes to be used to generate the HD wallet seed.\n+\tDecipheredCipherSeedSize = 19\n+\n+\t// EncipheredCipherSeedSize is the size of the fully encoded+enciphered\n+\t// cipher seed. We first obtain the enciphered plaintext seed by\n+\t// carrying out the enciphering as governed in the current version. We\n+\t// then take that enciphered seed (now 19+4=23 bytes due to ciphertext\n+\t// expansion, essentially a checksum) and prepend a version, then\n+\t// append the salt, and then take a checksum of everything. The\n+\t// checksum allows us to verify that the user input the correct set of\n+\t// words, then we can verify the passphrase due to the internal MAC\n+\t// equiv.  The final breakdown is:\n+\t//\n+\t//  * 1 byte version || 23 byte enciphered seed || 5 byte salt || 4 byte checksum\n+\t//\n+\t// With CipherSeedVersion we encipher as follows: we use\n+\t// scrypt(n=32768, r=8, p=1) to derive a 32-byte key from an optional\n+\t// user passphrase. We then encipher the plaintext seed using a value\n+\t// of tau (with aez) of 8-bytes (so essentially a 32-bit MAC).  When\n+\t// enciphering, we include the version and scrypt salt as the AD.  This\n+\t// gives us a total of 33 bytes. These 33 bytes fit cleanly into 24\n+\t// mnemonic words.\n+\tEncipheredCipherSeedSize = 33\n+\n+\t// CipherTextExpansion is the number of bytes that will be added as\n+\t// redundancy for the enciphering scheme implemented by aez. This can\n+\t// be seen as the size of the equivalent MAC.\n+\tCipherTextExpansion = 4\n+\n+\t// EntropySize is the number of bytes of entropy we'll use the generate\n+\t// the seed.\n+\tEntropySize = 16\n+\n+\t// NummnemonicWords is the number of words that an encoded cipher seed\n+\t// will result in.\n+\tNummnemonicWords = 24\n+\n+\t// saltSize is the size of the salt we'll generate to use with scrypt\n+\t// to generate a key for use within aez from the user's passphrase. The\n+\t// role of the salt is to make the creation of rainbow tables\n+\t// infeasible.\n+\tsaltSize = 5\n+\n+\t// adSize is the size of the encoded associated data that will be\n+\t// passed into aez when enciphering and deciphering the seed. The AD\n+\t// itself (associated data) is just the CipherSeedVersion and salt.\n+\tadSize = 6\n+\n+\t// checkSumSize is the size of the checksum applied to the final\n+\t// encoded ciphertext.\n+\tcheckSumSize = 4\n+\n+\t// keyLen is the size of the key that we'll use for encryption with\n+\t// aez.\n+\tkeyLen = 32\n+\n+\t// bitsPerWord is the number of bits each word in the wordlist encodes.\n+\t// We encode our mnemonic using 24 words, so 264 bits (33 bytes).\n+\tbitsPerWord = 11\n+\n+\t// saltOffset is the index within an enciphered cipherseed that marks\n+\t// the start of the salt.\n+\tsaltOffset = EncipheredCipherSeedSize - checkSumSize - saltSize\n+\n+\t// checkSumSize is the index within an enciphered cipher seed that\n+\t// marks the start of the checksum.\n+\tcheckSumOffset = EncipheredCipherSeedSize - checkSumSize\n+\n+\t// encipheredSeedSize is the size of the cipherseed before applying the\n+\t// external version, salt, and checksum for the final encoding.\n+\tencipheredSeedSize = DecipheredCipherSeedSize + CipherTextExpansion\n+)\n+\n+var (\n+\t// Below at the default scrypt parameters that are tied to\n+\t// CipherSeedVersion zero.\n+\tscryptN = 32768\n+\tscryptR = 8\n+\tscryptP = 1\n+\n+\t// crcTable is a table that presents the polynomial we'll use for\n+\t// computing our checksum.\n+\tcrcTable = crc32.MakeTable(crc32.Castagnoli)\n+)\n+\n+var (\n+\t// bitcoinGenesisDate is the timestamp of Bitcoin's genesis block.\n+\t// We'll use this value in order to create a compact birthday for the\n+\t// seed. The birthday will be interested as the number of days since\n+\t// the genesis date. We refer to this time period as ABE (after Bitcoin\n+\t// era).\n+\tbitcoinGenesisDate = time.Unix(1231006505, 0)\n+)\n+\n+// CipherSeed is a fully decoded instance of the aezeed scheme. At a high\n+// level, the encoded cipherseed is the enciphering of: a version byte, a set\n+// of bytes for a timestamp, the entropy which will be used to directly\n+// construct the HD seed, and finally a checksum over the rest. This scheme was\n+// created as the widely used schemes in the space lack two critical traits: a\n+// version byte, and a birthday timestamp. The version allows us to modify the\n+// details of the scheme in the future, and the birthday gives wallets a limit\n+// of how far back in the chain they'll need to start scanning. We also add an\n+// external version to the enciphering plaintext seed. With this addition,\n+// seeds are able to be \"upgraded\" (to diff params, or entirely diff crypt),\n+// while maintaining the semantics of the plaintext seed.\n+//\n+// The core of the scheme is the usage of aez to carefully control the size of\n+// the final encrypted seed. With the current parameters, this scheme can be\n+// encoded using a 24 word mnemonic. We use 4 bytes of ciphertext expansion\n+// when enciphering the raw seed, giving us the equivalent of 40-bit MAC (as we\n+// check for a particular seed version). Using the external 4 byte checksum,\n+// we're able to ensure that the user input the correct set of words.  Finally,\n+// the password in the scheme is optional. If not specified, an empty string\n+// will be used as the password. Otherwise, the addition of the password means\n+// that users can encrypt the saw \"plaintext\" seed under distinct passwords to","path":"aezeed/cipherseed.go","position":152,"original_position":152,"commit_id":"b53872d7b5c382471ad6f638894e54281bbee013","original_commit_id":"b53872d7b5c382471ad6f638894e54281bbee013","user":{"login":"halseth","id":3765732,"avatar_url":"https://avatars1.githubusercontent.com/u/3765732?v=4","gravatar_id":"","url":"https://api.github.com/users/halseth","html_url":"https://github.com/halseth","followers_url":"https://api.github.com/users/halseth/followers","following_url":"https://api.github.com/users/halseth/following{/other_user}","gists_url":"https://api.github.com/users/halseth/gists{/gist_id}","starred_url":"https://api.github.com/users/halseth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halseth/subscriptions","organizations_url":"https://api.github.com/users/halseth/orgs","repos_url":"https://api.github.com/users/halseth/repos","events_url":"https://api.github.com/users/halseth/events{/privacy}","received_events_url":"https://api.github.com/users/halseth/received_events","type":"User","site_admin":false},"body":"s/saw/raw?","created_at":"2018-03-01T14:30:55Z","updated_at":"2018-03-01T14:33:25Z","html_url":"https://github.com/lightningnetwork/lnd/pull/773#discussion_r171574783","pull_request_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773","author_association":"COLLABORATOR","_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171574783"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/773#discussion_r171574783"},"pull_request":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773"}}},"pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773","id":170910381,"html_url":"https://github.com/lightningnetwork/lnd/pull/773","diff_url":"https://github.com/lightningnetwork/lnd/pull/773.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/773.patch","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/773","number":773,"state":"open","locked":false,"title":"aezeed: add new package implementing the aezeed cipher seed scheme ","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"body":"In this PR, we add a new package implementing the aezeed cipher\r\nseed scheme (based on [`aez`](http://web.cs.ucdavis.edu/~rogaway/aez/)). \r\n\r\nThis is a new scheme developed that aims to overcome the\r\ntwo major short comings of BIP39: a lack of a version, and a lack of a\r\nwallet birthday. A lack a version means that wallets may not\r\nnecessarily know *how* to re-derive addresses during the recovery\r\nprocess. A lack of a birthday means that wallets don’t know how far\r\nback to look in the chain to ensure that they derive *all* the proper\r\nuser addresses. Additionally, BIP39 use a _very_ weak KDF. We use \r\nscrypt with modern parameters (n=32768, r=8, p=1). A set of benchmarks has \r\nbeen added, on my laptop I get about 100ms per attempt):\r\n```\r\n⛰ go test -run=XXX -bench=.\r\n\r\ngoos: darwin\r\ngoarch: amd64\r\npkg: github.com/lightningnetwork/lnd/aezeed\r\nBenchmarkToMnenonic-4     \t      10\t 102287840 ns/op\r\nBenchmarkFromMnenonic-4   \t      10\t 105874973 ns/op\r\nPASS\r\nok  \tgithub.com/lightningnetwork/lnd/aezeed\t3.036s\r\n```\r\n\r\nAside from addressing the shortcomings of BIP 39 a cipher  seed \r\ncan: be upgraded, and have it's password changed, \r\n\r\nSample seed: \r\n```\r\nability dance scatter raw fly dentist bar nominee exhaust wine snap super cost case coconut ticket spread funny grain chimney aspect business quiz ginger\r\n```\r\n\r\n## Plaintext `aezeed` encoding\r\n\r\nThe aezeed scheme addresses these two drawbacks and adds a number of\r\ndesirable features. First, we start with the following plaintext seed:\r\n```\r\n1 byte internal version || 2 byte timestamp || 16 bytes of entropy\r\n```\r\n\r\nThe version field is for wallets to be able to know *how* to re-derive\r\nthe keys of the wallet.\r\n\r\nThe 2 byte timestamp is expressed in Bitcoin Days Genesis, meaning that\r\nthe number of days since the timestamp in Bitcoin’s genesis block. This\r\nallow us to save space, and also avoid using a wasteful level of\r\ngranularity. With the currently, this can express time up until 2188.\r\n\r\nFinally, the entropy is raw entropy that should be used to derive\r\nwallet’s HD root.\r\n\r\n## `aezeed` enciphering/deciperhing\r\n\r\nNext, we’ll take the plaintext seed described above and encipher it to\r\nprocure a final cipher text. We’ll then take this cipher text (the\r\nCipherSeed) and encode that using a 24-word mnemonic. The enciphering\r\nprocess takes a user defined passphrase. If no passphrase is provided,\r\nthen the string “aezeed” will be used.\r\n\r\nTo encipher a plaintext seed (19 bytes) to arrive at an enciphered\r\ncipher seed (33 bytes), we apply the following operations:\r\n   * First we take the external version an append it to our buffer. The\r\nexternal version describes *how* we encipher. For the first version\r\n(version 0), we’ll use scrypt(n=32768, r=8, p=1) and aezeed.\r\n  * Next, we’ll use scrypt (with the version 9 params) to generate a\r\nstrong key for encryption. We’ll generate a 32-byte key using 5 bytes\r\nas a salt. The usage of the salt is meant to make the creation of\r\nrainbow tables infeasible.\r\n  * Next, the enciphering process. We use `aez`, modern AEAD with\r\nnonce-misuse resistance properties. The important trait we exploit is\r\nthat it’s an *arbitrary input length block cipher*. Additionally, it\r\nhas what’s essentially a configurable MAC size. In our scheme we’ll use\r\na value of 8, which acts as a 64-bit checksum. We’ll encrypt with our\r\ngenerated seed, and use an AD of (version || salt).\r\n  * Finally, we’ll encode this 33-byte cipher text using the default\r\nworld list of BIP 39 to produce 24 english words.\r\n\r\n## Properties of the aezeed cipher seed\r\n\r\nThe `aezeed` cipher seed scheme has a few cool properties, notably:\r\n   * The mnemonic itself is a cipher text, meaning leaving it in\r\nplaintext is advisable if the user also set a passphrase. This is in\r\ncontrast to BIP 39 where the mnemonic alone (without a passrphase) may\r\nbe sufficient to steal funds.\r\n   * A cipherseed can be modified to *change* the passphrase. This\r\nmeans that if the users wants a stronger passphrase, they can decipher\r\n(with the old passphrase), then encipher (with a new passphrase).\r\nCompared to BIP 39, where if the users used a passphrase, since the\r\nmapping is one way, they can’t change the passphrase of their existing\r\nHD key chain.\r\n  * A cipher seed can be *upgraded*. Since we have an external version,\r\noffline tools can be provided to decipher using the old params, and\r\nencipher using the new params. In the future if we change ciphers,\r\nchange scrypt, or just the parameters of scrypt, then users can easily\r\nupgrade their seed with an offline tool.\r\n","created_at":"2018-02-23T01:18:04Z","updated_at":"2018-03-01T14:33:25Z","closed_at":null,"merged_at":null,"merge_commit_sha":"dabec78e629ae9e5a6ef73961c02d9e03717a1ee","assignee":{"login":"cfromknecht","id":2013993,"avatar_url":"https://avatars1.githubusercontent.com/u/2013993?v=4","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","html_url":"https://github.com/cfromknecht","followers_url":"https://api.github.com/users/cfromknecht/followers","following_url":"https://api.github.com/users/cfromknecht/following{/other_user}","gists_url":"https://api.github.com/users/cfromknecht/gists{/gist_id}","starred_url":"https://api.github.com/users/cfromknecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfromknecht/subscriptions","organizations_url":"https://api.github.com/users/cfromknecht/orgs","repos_url":"https://api.github.com/users/cfromknecht/repos","events_url":"https://api.github.com/users/cfromknecht/events{/privacy}","received_events_url":"https://api.github.com/users/cfromknecht/received_events","type":"User","site_admin":false},"assignees":[{"login":"cfromknecht","id":2013993,"avatar_url":"https://avatars1.githubusercontent.com/u/2013993?v=4","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","html_url":"https://github.com/cfromknecht","followers_url":"https://api.github.com/users/cfromknecht/followers","following_url":"https://api.github.com/users/cfromknecht/following{/other_user}","gists_url":"https://api.github.com/users/cfromknecht/gists{/gist_id}","starred_url":"https://api.github.com/users/cfromknecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfromknecht/subscriptions","organizations_url":"https://api.github.com/users/cfromknecht/orgs","repos_url":"https://api.github.com/users/cfromknecht/repos","events_url":"https://api.github.com/users/cfromknecht/events{/privacy}","received_events_url":"https://api.github.com/users/cfromknecht/received_events","type":"User","site_admin":false}],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":{"url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5","html_url":"https://github.com/lightningnetwork/lnd/milestone/5","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5/labels","id":2725537,"number":5,"title":"v0.4-beta","description":"","creator":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"open_issues":15,"closed_issues":12,"state":"open","created_at":"2017-08-27T22:11:13Z","updated_at":"2018-02-28T21:13:56Z","due_on":null,"closed_at":null},"commits_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773/commits","review_comments_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773/comments","review_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/773/comments","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/b53872d7b5c382471ad6f638894e54281bbee013","head":{"label":"Roasbeef:aezeed","ref":"aezeed","sha":"b53872d7b5c382471ad6f638894e54281bbee013","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"repo":{"id":112244823,"name":"lnd","full_name":"Roasbeef/lnd","owner":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/Roasbeef/lnd","description":"Lightning Network Daemon ⚡️","fork":true,"url":"https://api.github.com/repos/Roasbeef/lnd","forks_url":"https://api.github.com/repos/Roasbeef/lnd/forks","keys_url":"https://api.github.com/repos/Roasbeef/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Roasbeef/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Roasbeef/lnd/teams","hooks_url":"https://api.github.com/repos/Roasbeef/lnd/hooks","issue_events_url":"https://api.github.com/repos/Roasbeef/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/Roasbeef/lnd/events","assignees_url":"https://api.github.com/repos/Roasbeef/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/Roasbeef/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/Roasbeef/lnd/tags","blobs_url":"https://api.github.com/repos/Roasbeef/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Roasbeef/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Roasbeef/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/Roasbeef/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Roasbeef/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/Roasbeef/lnd/languages","stargazers_url":"https://api.github.com/repos/Roasbeef/lnd/stargazers","contributors_url":"https://api.github.com/repos/Roasbeef/lnd/contributors","subscribers_url":"https://api.github.com/repos/Roasbeef/lnd/subscribers","subscription_url":"https://api.github.com/repos/Roasbeef/lnd/subscription","commits_url":"https://api.github.com/repos/Roasbeef/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/Roasbeef/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/Roasbeef/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/Roasbeef/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/Roasbeef/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/Roasbeef/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Roasbeef/lnd/merges","archive_url":"https://api.github.com/repos/Roasbeef/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Roasbeef/lnd/downloads","issues_url":"https://api.github.com/repos/Roasbeef/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/Roasbeef/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/Roasbeef/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/Roasbeef/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Roasbeef/lnd/labels{/name}","releases_url":"https://api.github.com/repos/Roasbeef/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/Roasbeef/lnd/deployments","created_at":"2017-11-27T20:26:47Z","updated_at":"2017-11-27T20:26:49Z","pushed_at":"2018-03-01T03:14:54Z","git_url":"git://github.com/Roasbeef/lnd.git","ssh_url":"git@github.com:Roasbeef/lnd.git","clone_url":"https://github.com/Roasbeef/lnd.git","svn_url":"https://github.com/Roasbeef/lnd","homepage":"","size":12585,"stargazers_count":0,"watchers_count":0,"language":"Go","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":null,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"lightningnetwork:master","ref":"master","sha":"00ea46d9aeabf670dfb18c9e9c5f10f741ff5192","user":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"repo":{"id":49765480,"name":"lnd","full_name":"lightningnetwork/lnd","owner":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/lightningnetwork/lnd","description":"Lightning Network Daemon ⚡️","fork":false,"url":"https://api.github.com/repos/lightningnetwork/lnd","forks_url":"https://api.github.com/repos/lightningnetwork/lnd/forks","keys_url":"https://api.github.com/repos/lightningnetwork/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lightningnetwork/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lightningnetwork/lnd/teams","hooks_url":"https://api.github.com/repos/lightningnetwork/lnd/hooks","issue_events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/lightningnetwork/lnd/events","assignees_url":"https://api.github.com/repos/lightningnetwork/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/lightningnetwork/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/lightningnetwork/lnd/tags","blobs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lightningnetwork/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/lightningnetwork/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/lightningnetwork/lnd/languages","stargazers_url":"https://api.github.com/repos/lightningnetwork/lnd/stargazers","contributors_url":"https://api.github.com/repos/lightningnetwork/lnd/contributors","subscribers_url":"https://api.github.com/repos/lightningnetwork/lnd/subscribers","subscription_url":"https://api.github.com/repos/lightningnetwork/lnd/subscription","commits_url":"https://api.github.com/repos/lightningnetwork/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/lightningnetwork/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/lightningnetwork/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/lightningnetwork/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lightningnetwork/lnd/merges","archive_url":"https://api.github.com/repos/lightningnetwork/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lightningnetwork/lnd/downloads","issues_url":"https://api.github.com/repos/lightningnetwork/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/lightningnetwork/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/labels{/name}","releases_url":"https://api.github.com/repos/lightningnetwork/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/lightningnetwork/lnd/deployments","created_at":"2016-01-16T08:19:33Z","updated_at":"2018-03-01T14:20:31Z","pushed_at":"2018-03-01T09:23:16Z","git_url":"git://github.com/lightningnetwork/lnd.git","ssh_url":"git@github.com:lightningnetwork/lnd.git","clone_url":"https://github.com/lightningnetwork/lnd.git","svn_url":"https://github.com/lightningnetwork/lnd","homepage":"","size":11766,"stargazers_count":2056,"watchers_count":2056,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":427,"mirror_url":null,"archived":false,"open_issues_count":125,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit"},"forks":427,"open_issues":125,"watchers":2056,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/773"},"issue":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/773"},"comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/773/comments"},"review_comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773/comments"},"review_comment":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773/commits"},"statuses":{"href":"https://api.github.com/repos/lightningnetwork/lnd/statuses/b53872d7b5c382471ad6f638894e54281bbee013"}},"author_association":"MEMBER"}},"public":true,"created_at":"2018-03-01T14:30:55Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7316355344","type":"WatchEvent","actor":{"id":1474746,"login":"jmconrad","display_login":"jmconrad","gravatar_id":"","url":"https://api.github.com/users/jmconrad","avatar_url":"https://avatars.githubusercontent.com/u/1474746?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-01T14:20:31Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7316174915","type":"WatchEvent","actor":{"id":13583235,"login":"morphymore","display_login":"morphymore","gravatar_id":"","url":"https://api.github.com/users/morphymore","avatar_url":"https://avatars.githubusercontent.com/u/13583235?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-01T13:46:47Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7316144754","type":"PullRequestReviewCommentEvent","actor":{"id":3765732,"login":"halseth","display_login":"halseth","gravatar_id":"","url":"https://api.github.com/users/halseth","avatar_url":"https://avatars.githubusercontent.com/u/3765732?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171559349","pull_request_review_id":100418937,"id":171559349,"diff_hunk":"@@ -753,6 +800,8 @@ func (f *fundingManager) reservationCoordinator() {\n \t\t\t}\n \t\tcase req := <-f.fundingRequests:\n \t\t\tf.handleInitFundingMsg(req)\n+\t\tcase msg := <-f.timeoutMsgs:","path":"fundingmanager.go","position":95,"original_position":91,"commit_id":"46680e9b4da1b601b9affb4b48f69ba4ed5b3d3a","original_commit_id":"46680e9b4da1b601b9affb4b48f69ba4ed5b3d3a","user":{"login":"halseth","id":3765732,"avatar_url":"https://avatars1.githubusercontent.com/u/3765732?v=4","gravatar_id":"","url":"https://api.github.com/users/halseth","html_url":"https://github.com/halseth","followers_url":"https://api.github.com/users/halseth/followers","following_url":"https://api.github.com/users/halseth/following{/other_user}","gists_url":"https://api.github.com/users/halseth/gists{/gist_id}","starred_url":"https://api.github.com/users/halseth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halseth/subscriptions","organizations_url":"https://api.github.com/users/halseth/orgs","repos_url":"https://api.github.com/users/halseth/repos","events_url":"https://api.github.com/users/halseth/events{/privacy}","received_events_url":"https://api.github.com/users/halseth/received_events","type":"User","site_admin":false},"body":"I like this way of handling timeouts much better, but I think it can be simplified significantly.\r\n\r\nTo me it seems simpler to let each reservation have a `lastUpdated` timestamp. And instead of tracking the state of the funding message and modifying this in every case, I would make it possible to extract the reservation context from the messages in `fundingMsgs`, and each time a message is received, this timestamp can be updated. Now you can add a ticker to the reservation coordinator that at certain intervals loops through all active reservations, and cancels those that haven't been updated in a while. This makes sure the race condition you mentioned cannot occur, as they are never cancelled in parallel with handling messages.","created_at":"2018-03-01T13:37:04Z","updated_at":"2018-03-01T13:40:45Z","html_url":"https://github.com/lightningnetwork/lnd/pull/782#discussion_r171559349","pull_request_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/782","author_association":"COLLABORATOR","_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171559349"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/782#discussion_r171559349"},"pull_request":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/782"}}},"pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/782","id":171277732,"html_url":"https://github.com/lightningnetwork/lnd/pull/782","diff_url":"https://github.com/lightningnetwork/lnd/pull/782.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/782.patch","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/782","number":782,"state":"open","locked":false,"title":"lnwallet: add timeouts to reservations in limbo","user":{"login":"paddyquinn","id":9949229,"avatar_url":"https://avatars0.githubusercontent.com/u/9949229?v=4","gravatar_id":"","url":"https://api.github.com/users/paddyquinn","html_url":"https://github.com/paddyquinn","followers_url":"https://api.github.com/users/paddyquinn/followers","following_url":"https://api.github.com/users/paddyquinn/following{/other_user}","gists_url":"https://api.github.com/users/paddyquinn/gists{/gist_id}","starred_url":"https://api.github.com/users/paddyquinn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paddyquinn/subscriptions","organizations_url":"https://api.github.com/users/paddyquinn/orgs","repos_url":"https://api.github.com/users/paddyquinn/repos","events_url":"https://api.github.com/users/paddyquinn/events{/privacy}","received_events_url":"https://api.github.com/users/paddyquinn/received_events","type":"User","site_admin":false},"body":"In this PR, a timeout is added to each `ChannelReservation`, which cancels the reservation when reached. On each successive message in the `ChannelReservation` workflow the timeout is reset, so that timeouts only occur after an idle period in the workflow.\r\n\r\nThis PR takes care of #60. Instead of creating a goroutine that periodically sweeps any zombie reservations, this PR adds a timer to each reservation, which cancels the reservation when it expires. In that way, a zombie reservation will be cleaned up (and thus resources freed up) as soon as possible.","created_at":"2018-02-26T03:59:16Z","updated_at":"2018-03-01T13:40:45Z","closed_at":null,"merged_at":null,"merge_commit_sha":"295a5b2c401c57629d18a9bdb79eb26241831fa9","assignee":{"login":"halseth","id":3765732,"avatar_url":"https://avatars1.githubusercontent.com/u/3765732?v=4","gravatar_id":"","url":"https://api.github.com/users/halseth","html_url":"https://github.com/halseth","followers_url":"https://api.github.com/users/halseth/followers","following_url":"https://api.github.com/users/halseth/following{/other_user}","gists_url":"https://api.github.com/users/halseth/gists{/gist_id}","starred_url":"https://api.github.com/users/halseth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halseth/subscriptions","organizations_url":"https://api.github.com/users/halseth/orgs","repos_url":"https://api.github.com/users/halseth/repos","events_url":"https://api.github.com/users/halseth/events{/privacy}","received_events_url":"https://api.github.com/users/halseth/received_events","type":"User","site_admin":false},"assignees":[{"login":"halseth","id":3765732,"avatar_url":"https://avatars1.githubusercontent.com/u/3765732?v=4","gravatar_id":"","url":"https://api.github.com/users/halseth","html_url":"https://github.com/halseth","followers_url":"https://api.github.com/users/halseth/followers","following_url":"https://api.github.com/users/halseth/following{/other_user}","gists_url":"https://api.github.com/users/halseth/gists{/gist_id}","starred_url":"https://api.github.com/users/halseth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halseth/subscriptions","organizations_url":"https://api.github.com/users/halseth/orgs","repos_url":"https://api.github.com/users/halseth/repos","events_url":"https://api.github.com/users/halseth/events{/privacy}","received_events_url":"https://api.github.com/users/halseth/received_events","type":"User","site_admin":false}],"requested_reviewers":[],"requested_teams":[],"labels":[{"id":431221659,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/wallet","name":"wallet","color":"5319e7","default":false}],"milestone":{"url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5","html_url":"https://github.com/lightningnetwork/lnd/milestone/5","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5/labels","id":2725537,"number":5,"title":"v0.4-beta","description":"","creator":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"open_issues":15,"closed_issues":12,"state":"open","created_at":"2017-08-27T22:11:13Z","updated_at":"2018-02-28T21:13:56Z","due_on":null,"closed_at":null},"commits_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/782/commits","review_comments_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/782/comments","review_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/782/comments","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/46680e9b4da1b601b9affb4b48f69ba4ed5b3d3a","head":{"label":"paddyquinn:master","ref":"master","sha":"46680e9b4da1b601b9affb4b48f69ba4ed5b3d3a","user":{"login":"paddyquinn","id":9949229,"avatar_url":"https://avatars0.githubusercontent.com/u/9949229?v=4","gravatar_id":"","url":"https://api.github.com/users/paddyquinn","html_url":"https://github.com/paddyquinn","followers_url":"https://api.github.com/users/paddyquinn/followers","following_url":"https://api.github.com/users/paddyquinn/following{/other_user}","gists_url":"https://api.github.com/users/paddyquinn/gists{/gist_id}","starred_url":"https://api.github.com/users/paddyquinn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paddyquinn/subscriptions","organizations_url":"https://api.github.com/users/paddyquinn/orgs","repos_url":"https://api.github.com/users/paddyquinn/repos","events_url":"https://api.github.com/users/paddyquinn/events{/privacy}","received_events_url":"https://api.github.com/users/paddyquinn/received_events","type":"User","site_admin":false},"repo":{"id":122150656,"name":"lnd","full_name":"paddyquinn/lnd","owner":{"login":"paddyquinn","id":9949229,"avatar_url":"https://avatars0.githubusercontent.com/u/9949229?v=4","gravatar_id":"","url":"https://api.github.com/users/paddyquinn","html_url":"https://github.com/paddyquinn","followers_url":"https://api.github.com/users/paddyquinn/followers","following_url":"https://api.github.com/users/paddyquinn/following{/other_user}","gists_url":"https://api.github.com/users/paddyquinn/gists{/gist_id}","starred_url":"https://api.github.com/users/paddyquinn/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/paddyquinn/subscriptions","organizations_url":"https://api.github.com/users/paddyquinn/orgs","repos_url":"https://api.github.com/users/paddyquinn/repos","events_url":"https://api.github.com/users/paddyquinn/events{/privacy}","received_events_url":"https://api.github.com/users/paddyquinn/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/paddyquinn/lnd","description":"Lightning Network Daemon ⚡️","fork":true,"url":"https://api.github.com/repos/paddyquinn/lnd","forks_url":"https://api.github.com/repos/paddyquinn/lnd/forks","keys_url":"https://api.github.com/repos/paddyquinn/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/paddyquinn/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/paddyquinn/lnd/teams","hooks_url":"https://api.github.com/repos/paddyquinn/lnd/hooks","issue_events_url":"https://api.github.com/repos/paddyquinn/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/paddyquinn/lnd/events","assignees_url":"https://api.github.com/repos/paddyquinn/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/paddyquinn/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/paddyquinn/lnd/tags","blobs_url":"https://api.github.com/repos/paddyquinn/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/paddyquinn/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/paddyquinn/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/paddyquinn/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/paddyquinn/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/paddyquinn/lnd/languages","stargazers_url":"https://api.github.com/repos/paddyquinn/lnd/stargazers","contributors_url":"https://api.github.com/repos/paddyquinn/lnd/contributors","subscribers_url":"https://api.github.com/repos/paddyquinn/lnd/subscribers","subscription_url":"https://api.github.com/repos/paddyquinn/lnd/subscription","commits_url":"https://api.github.com/repos/paddyquinn/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/paddyquinn/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/paddyquinn/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/paddyquinn/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/paddyquinn/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/paddyquinn/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/paddyquinn/lnd/merges","archive_url":"https://api.github.com/repos/paddyquinn/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/paddyquinn/lnd/downloads","issues_url":"https://api.github.com/repos/paddyquinn/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/paddyquinn/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/paddyquinn/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/paddyquinn/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/paddyquinn/lnd/labels{/name}","releases_url":"https://api.github.com/repos/paddyquinn/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/paddyquinn/lnd/deployments","created_at":"2018-02-20T03:24:30Z","updated_at":"2018-02-20T03:24:32Z","pushed_at":"2018-02-28T03:49:20Z","git_url":"git://github.com/paddyquinn/lnd.git","ssh_url":"git@github.com:paddyquinn/lnd.git","clone_url":"https://github.com/paddyquinn/lnd.git","svn_url":"https://github.com/paddyquinn/lnd","homepage":"","size":11765,"stargazers_count":0,"watchers_count":0,"language":"Go","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit"},"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"lightningnetwork:master","ref":"master","sha":"f7ec490f44ba66f1d0b78a1b324c98e763d1f46e","user":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"repo":{"id":49765480,"name":"lnd","full_name":"lightningnetwork/lnd","owner":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/lightningnetwork/lnd","description":"Lightning Network Daemon ⚡️","fork":false,"url":"https://api.github.com/repos/lightningnetwork/lnd","forks_url":"https://api.github.com/repos/lightningnetwork/lnd/forks","keys_url":"https://api.github.com/repos/lightningnetwork/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lightningnetwork/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lightningnetwork/lnd/teams","hooks_url":"https://api.github.com/repos/lightningnetwork/lnd/hooks","issue_events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/lightningnetwork/lnd/events","assignees_url":"https://api.github.com/repos/lightningnetwork/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/lightningnetwork/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/lightningnetwork/lnd/tags","blobs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lightningnetwork/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/lightningnetwork/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/lightningnetwork/lnd/languages","stargazers_url":"https://api.github.com/repos/lightningnetwork/lnd/stargazers","contributors_url":"https://api.github.com/repos/lightningnetwork/lnd/contributors","subscribers_url":"https://api.github.com/repos/lightningnetwork/lnd/subscribers","subscription_url":"https://api.github.com/repos/lightningnetwork/lnd/subscription","commits_url":"https://api.github.com/repos/lightningnetwork/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/lightningnetwork/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/lightningnetwork/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/lightningnetwork/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lightningnetwork/lnd/merges","archive_url":"https://api.github.com/repos/lightningnetwork/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lightningnetwork/lnd/downloads","issues_url":"https://api.github.com/repos/lightningnetwork/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/lightningnetwork/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/labels{/name}","releases_url":"https://api.github.com/repos/lightningnetwork/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/lightningnetwork/lnd/deployments","created_at":"2016-01-16T08:19:33Z","updated_at":"2018-03-01T12:53:56Z","pushed_at":"2018-03-01T09:23:16Z","git_url":"git://github.com/lightningnetwork/lnd.git","ssh_url":"git@github.com:lightningnetwork/lnd.git","clone_url":"https://github.com/lightningnetwork/lnd.git","svn_url":"https://github.com/lightningnetwork/lnd","homepage":"","size":11766,"stargazers_count":2054,"watchers_count":2054,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":427,"mirror_url":null,"archived":false,"open_issues_count":125,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit"},"forks":427,"open_issues":125,"watchers":2054,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/782"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/782"},"issue":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/782"},"comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/782/comments"},"review_comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/782/comments"},"review_comment":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/782/commits"},"statuses":{"href":"https://api.github.com/repos/lightningnetwork/lnd/statuses/46680e9b4da1b601b9affb4b48f69ba4ed5b3d3a"}},"author_association":"NONE"}},"public":true,"created_at":"2018-03-01T13:37:04Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7316120729","type":"ForkEvent","actor":{"id":16799459,"login":"beyondns","display_login":"beyondns","gravatar_id":"","url":"https://api.github.com/users/beyondns","avatar_url":"https://avatars.githubusercontent.com/u/16799459?"},"repo":{"id":73738971,"name":"lightningnetwork/lightning-rfc","url":"https://api.github.com/repos/lightningnetwork/lightning-rfc"},"payload":{"forkee":{"id":123439415,"name":"lightning-rfc","full_name":"beyondns/lightning-rfc","owner":{"login":"beyondns","id":16799459,"avatar_url":"https://avatars0.githubusercontent.com/u/16799459?v=4","gravatar_id":"","url":"https://api.github.com/users/beyondns","html_url":"https://github.com/beyondns","followers_url":"https://api.github.com/users/beyondns/followers","following_url":"https://api.github.com/users/beyondns/following{/other_user}","gists_url":"https://api.github.com/users/beyondns/gists{/gist_id}","starred_url":"https://api.github.com/users/beyondns/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/beyondns/subscriptions","organizations_url":"https://api.github.com/users/beyondns/orgs","repos_url":"https://api.github.com/users/beyondns/repos","events_url":"https://api.github.com/users/beyondns/events{/privacy}","received_events_url":"https://api.github.com/users/beyondns/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/beyondns/lightning-rfc","description":"Lightning Network Specifications","fork":true,"url":"https://api.github.com/repos/beyondns/lightning-rfc","forks_url":"https://api.github.com/repos/beyondns/lightning-rfc/forks","keys_url":"https://api.github.com/repos/beyondns/lightning-rfc/keys{/key_id}","collaborators_url":"https://api.github.com/repos/beyondns/lightning-rfc/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/beyondns/lightning-rfc/teams","hooks_url":"https://api.github.com/repos/beyondns/lightning-rfc/hooks","issue_events_url":"https://api.github.com/repos/beyondns/lightning-rfc/issues/events{/number}","events_url":"https://api.github.com/repos/beyondns/lightning-rfc/events","assignees_url":"https://api.github.com/repos/beyondns/lightning-rfc/assignees{/user}","branches_url":"https://api.github.com/repos/beyondns/lightning-rfc/branches{/branch}","tags_url":"https://api.github.com/repos/beyondns/lightning-rfc/tags","blobs_url":"https://api.github.com/repos/beyondns/lightning-rfc/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/beyondns/lightning-rfc/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/beyondns/lightning-rfc/git/refs{/sha}","trees_url":"https://api.github.com/repos/beyondns/lightning-rfc/git/trees{/sha}","statuses_url":"https://api.github.com/repos/beyondns/lightning-rfc/statuses/{sha}","languages_url":"https://api.github.com/repos/beyondns/lightning-rfc/languages","stargazers_url":"https://api.github.com/repos/beyondns/lightning-rfc/stargazers","contributors_url":"https://api.github.com/repos/beyondns/lightning-rfc/contributors","subscribers_url":"https://api.github.com/repos/beyondns/lightning-rfc/subscribers","subscription_url":"https://api.github.com/repos/beyondns/lightning-rfc/subscription","commits_url":"https://api.github.com/repos/beyondns/lightning-rfc/commits{/sha}","git_commits_url":"https://api.github.com/repos/beyondns/lightning-rfc/git/commits{/sha}","comments_url":"https://api.github.com/repos/beyondns/lightning-rfc/comments{/number}","issue_comment_url":"https://api.github.com/repos/beyondns/lightning-rfc/issues/comments{/number}","contents_url":"https://api.github.com/repos/beyondns/lightning-rfc/contents/{+path}","compare_url":"https://api.github.com/repos/beyondns/lightning-rfc/compare/{base}...{head}","merges_url":"https://api.github.com/repos/beyondns/lightning-rfc/merges","archive_url":"https://api.github.com/repos/beyondns/lightning-rfc/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/beyondns/lightning-rfc/downloads","issues_url":"https://api.github.com/repos/beyondns/lightning-rfc/issues{/number}","pulls_url":"https://api.github.com/repos/beyondns/lightning-rfc/pulls{/number}","milestones_url":"https://api.github.com/repos/beyondns/lightning-rfc/milestones{/number}","notifications_url":"https://api.github.com/repos/beyondns/lightning-rfc/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/beyondns/lightning-rfc/labels{/name}","releases_url":"https://api.github.com/repos/beyondns/lightning-rfc/releases{/id}","deployments_url":"https://api.github.com/repos/beyondns/lightning-rfc/deployments","created_at":"2018-03-01T13:35:56Z","updated_at":"2018-03-01T01:47:08Z","pushed_at":"2018-02-26T10:12:09Z","git_url":"git://github.com/beyondns/lightning-rfc.git","ssh_url":"git@github.com:beyondns/lightning-rfc.git","clone_url":"https://github.com/beyondns/lightning-rfc.git","svn_url":"https://github.com/beyondns/lightning-rfc","homepage":null,"size":1115,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":null,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master","public":true}},"public":true,"created_at":"2018-03-01T13:35:56Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7316042711","type":"IssueCommentEvent","actor":{"id":3129093,"login":"brndnmtthws","display_login":"brndnmtthws","gravatar_id":"","url":"https://api.github.com/users/brndnmtthws","avatar_url":"https://avatars.githubusercontent.com/u/3129093?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/785","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/785/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/785/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/785/events","html_url":"https://github.com/lightningnetwork/lnd/pull/785","id":300840370,"number":785,"title":"Add more details on using macaroons with GRPC.","user":{"login":"brndnmtthws","id":3129093,"avatar_url":"https://avatars1.githubusercontent.com/u/3129093?v=4","gravatar_id":"","url":"https://api.github.com/users/brndnmtthws","html_url":"https://github.com/brndnmtthws","followers_url":"https://api.github.com/users/brndnmtthws/followers","following_url":"https://api.github.com/users/brndnmtthws/following{/other_user}","gists_url":"https://api.github.com/users/brndnmtthws/gists{/gist_id}","starred_url":"https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brndnmtthws/subscriptions","organizations_url":"https://api.github.com/users/brndnmtthws/orgs","repos_url":"https://api.github.com/users/brndnmtthws/repos","events_url":"https://api.github.com/users/brndnmtthws/events{/privacy}","received_events_url":"https://api.github.com/users/brndnmtthws/received_events","type":"User","site_admin":false},"labels":[{"id":484610526,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/documentation","name":"documentation","color":"bfdadc","default":false},{"id":678416147,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/macaroons","name":"macaroons","color":"b60205","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":7,"created_at":"2018-02-28T00:01:13Z","updated_at":"2018-03-01T13:19:42Z","closed_at":"2018-03-01T03:27:14Z","author_association":"CONTRIBUTOR","pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/785","html_url":"https://github.com/lightningnetwork/lnd/pull/785","diff_url":"https://github.com/lightningnetwork/lnd/pull/785.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/785.patch"},"body":"This addresses #730."},"comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments/369589058","html_url":"https://github.com/lightningnetwork/lnd/pull/785#issuecomment-369589058","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/785","id":369589058,"user":{"login":"brndnmtthws","id":3129093,"avatar_url":"https://avatars1.githubusercontent.com/u/3129093?v=4","gravatar_id":"","url":"https://api.github.com/users/brndnmtthws","html_url":"https://github.com/brndnmtthws","followers_url":"https://api.github.com/users/brndnmtthws/followers","following_url":"https://api.github.com/users/brndnmtthws/following{/other_user}","gists_url":"https://api.github.com/users/brndnmtthws/gists{/gist_id}","starred_url":"https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brndnmtthws/subscriptions","organizations_url":"https://api.github.com/users/brndnmtthws/orgs","repos_url":"https://api.github.com/users/brndnmtthws/repos","events_url":"https://api.github.com/users/brndnmtthws/events{/privacy}","received_events_url":"https://api.github.com/users/brndnmtthws/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T13:19:42Z","updated_at":"2018-03-01T13:19:42Z","author_association":"CONTRIBUTOR","body":"@Roasbeef oh you're right, I did get banned:\r\n\r\n<img width=\"505\" alt=\"screen shot 2018-03-01 at 08 16 47\" src=\"https://user-images.githubusercontent.com/3129093/36846518-ff0c08d0-1d28-11e8-900a-b28c1af3e739.png\">\r\n\r\nThat's what I get for contributing to one of these shady bitcorn projects 😛"}},"public":true,"created_at":"2018-03-01T13:19:42Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7315881878","type":"IssueCommentEvent","actor":{"id":3765732,"login":"halseth","display_login":"halseth","gravatar_id":"","url":"https://api.github.com/users/halseth","avatar_url":"https://avatars.githubusercontent.com/u/3765732?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/788","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/788/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/788/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/788/events","html_url":"https://github.com/lightningnetwork/lnd/pull/788","id":301078376,"number":788,"title":"c-lightning rejects to_self_delay > 432 as unreasonably long","user":{"login":"aantonop","id":1181915,"avatar_url":"https://avatars1.githubusercontent.com/u/1181915?v=4","gravatar_id":"","url":"https://api.github.com/users/aantonop","html_url":"https://github.com/aantonop","followers_url":"https://api.github.com/users/aantonop/followers","following_url":"https://api.github.com/users/aantonop/following{/other_user}","gists_url":"https://api.github.com/users/aantonop/gists{/gist_id}","starred_url":"https://api.github.com/users/aantonop/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/aantonop/subscriptions","organizations_url":"https://api.github.com/users/aantonop/orgs","repos_url":"https://api.github.com/users/aantonop/repos","events_url":"https://api.github.com/users/aantonop/events{/privacy}","received_events_url":"https://api.github.com/users/aantonop/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2018-02-28T15:54:45Z","updated_at":"2018-03-01T12:44:47Z","closed_at":"2018-02-28T22:22:21Z","author_association":"CONTRIBUTOR","pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/788","html_url":"https://github.com/lightningnetwork/lnd/pull/788","diff_url":"https://github.com/lightningnetwork/lnd/pull/788.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/788.patch"},"body":"While attempting to open a channel to a c-lightning node, I got error:\r\n\r\n\"to_self_delay 600 greater than 432\"\r\n\r\nThis had been submitted (by others) as an issue to c-lightning. The discussion resulted in a NAK as the developers consider more than 3 days as \"unreasonable\" and therefore in violation of BOLT-02:\r\n\r\nSee: https://github.com/ElementsProject/lightning/issues/1110\r\n\r\nThis creates an interoperability issue for large channels between LND and c-lightning. I don't think this is user-configurable on LND, so I changed it in the source code. \r\n\r\n"},"comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments/369580406","html_url":"https://github.com/lightningnetwork/lnd/pull/788#issuecomment-369580406","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/788","id":369580406,"user":{"login":"halseth","id":3765732,"avatar_url":"https://avatars1.githubusercontent.com/u/3765732?v=4","gravatar_id":"","url":"https://api.github.com/users/halseth","html_url":"https://github.com/halseth","followers_url":"https://api.github.com/users/halseth/followers","following_url":"https://api.github.com/users/halseth/following{/other_user}","gists_url":"https://api.github.com/users/halseth/gists{/gist_id}","starred_url":"https://api.github.com/users/halseth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halseth/subscriptions","organizations_url":"https://api.github.com/users/halseth/orgs","repos_url":"https://api.github.com/users/halseth/repos","events_url":"https://api.github.com/users/halseth/events{/privacy}","received_events_url":"https://api.github.com/users/halseth/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T12:44:47Z","updated_at":"2018-03-01T12:44:47Z","author_association":"COLLABORATOR","body":"Issue #792."}},"public":true,"created_at":"2018-03-01T12:44:47Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7315869700","type":"IssuesEvent","actor":{"id":3765732,"login":"halseth","display_login":"halseth","gravatar_id":"","url":"https://api.github.com/users/halseth","avatar_url":"https://avatars.githubusercontent.com/u/3765732?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"opened","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/792","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/792/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/792/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/792/events","html_url":"https://github.com/lightningnetwork/lnd/issues/792","id":301390334,"number":792,"title":"Flag for manually specifying remote delay when opening channels","user":{"login":"halseth","id":3765732,"avatar_url":"https://avatars1.githubusercontent.com/u/3765732?v=4","gravatar_id":"","url":"https://api.github.com/users/halseth","html_url":"https://github.com/halseth","followers_url":"https://api.github.com/users/halseth/followers","following_url":"https://api.github.com/users/halseth/following{/other_user}","gists_url":"https://api.github.com/users/halseth/gists{/gist_id}","starred_url":"https://api.github.com/users/halseth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halseth/subscriptions","organizations_url":"https://api.github.com/users/halseth/orgs","repos_url":"https://api.github.com/users/halseth/repos","events_url":"https://api.github.com/users/halseth/events{/privacy}","received_events_url":"https://api.github.com/users/halseth/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-03-01T12:42:03Z","updated_at":"2018-03-01T12:42:03Z","closed_at":null,"author_association":"COLLABORATOR","body":"As discussed in #788, the only way to manually set the remote CSV delay for channels is by using the `--defaultremotedelay` flag at startup, which will be applied to _all_ channels opened from that point on. In certain cases it is needed to manually specify this delay, in order to create channels compatible with less conservative implementations than `lnd`. In particular, c-lightning tolerates a delay of maximum 3 days, while `lnd` scales all the way up to 2 weeks for large channels.\r\n\r\nWhile we want the defaults to be as safe as possible, it makes sense to allow the user to specify a shorter delay on a _per channel basis_, in the case she wants to open a channel with a node not supporting long delay. We should therefore add a flag to `openchannel` that let's the user specify this, the default still being scaling linearly with channel size.\r\n\r\nAfter such a flag is added, I think the `--defaultremotedelay` startup option can be made applicable only to _incoming_ channels, as you can emulate it for outgoing channels with the new flag to `openchannel` (if this simplifies the code in anyway)."}},"public":true,"created_at":"2018-03-01T12:42:04Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7315811654","type":"PullRequestReviewCommentEvent","actor":{"id":3765732,"login":"halseth","display_login":"halseth","gravatar_id":"","url":"https://api.github.com/users/halseth","avatar_url":"https://avatars.githubusercontent.com/u/3765732?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171542916","pull_request_review_id":100408434,"id":171542916,"diff_hunk":"@@ -1907,3 +1937,65 @@ func (r *ChannelRouter) AddProof(chanID lnwire.ShortChannelID,\n \tinfo.AuthProof = proof\n \treturn r.cfg.Graph.UpdateChannelEdge(info)\n }\n+\n+// IsStaleNode returns true if the graph source has a node announcement for the\n+// target node with a more recent timestamp.\n+//\n+// NOTE: This method is part of the ChannelGraphSource interface.\n+func (r *ChannelRouter) IsStaleNode(node Vertex, timestamp time.Time) bool {\n+\t// If our attempt to assert that the node announcement is fresh fails,\n+\t// then we know that this is actually a stale announcement.\n+\treturn r.assertNodeAnnFreshness(node, timestamp) != nil","path":"routing/router.go","position":134,"original_position":134,"commit_id":"5e487f1036dcc675ab910be872e37d72b812627a","original_commit_id":"3f6e0ac125ce25c131716ae247ab76dfdd1e09cb","user":{"login":"halseth","id":3765732,"avatar_url":"https://avatars1.githubusercontent.com/u/3765732?v=4","gravatar_id":"","url":"https://api.github.com/users/halseth","html_url":"https://github.com/halseth","followers_url":"https://api.github.com/users/halseth/followers","following_url":"https://api.github.com/users/halseth/following{/other_user}","gists_url":"https://api.github.com/users/halseth/gists{/gist_id}","starred_url":"https://api.github.com/users/halseth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halseth/subscriptions","organizations_url":"https://api.github.com/users/halseth/orgs","repos_url":"https://api.github.com/users/halseth/repos","events_url":"https://api.github.com/users/halseth/events{/privacy}","received_events_url":"https://api.github.com/users/halseth/received_events","type":"User","site_admin":false},"body":"This is counterintuitive imo, as the godoc states that the method returns true if we have already seen a newer node announcement, but the real behaviour is that it returns true if `(we have seen newer node announcement || we have never seen a channel announcement from this node)`.\r\n\r\nEither the godoc and method names should be updated, or the behaviour should be changed to reflect the doc and usage be \r\n\r\n```go\r\nonReceiveNodeAnnouncement(ann) {\r\n    if !existsInGraph(ann) {\r\n        return ignoreNode\r\n    }\r\n\r\n    if IsStaleNode(ann) {\r\n        return ignoreNode\r\n    }\r\n\r\n    apply(ann)\r\n}\r\n```\r\n\r\n","created_at":"2018-03-01T12:26:29Z","updated_at":"2018-03-01T12:29:07Z","html_url":"https://github.com/lightningnetwork/lnd/pull/781#discussion_r171542916","pull_request_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/781","author_association":"COLLABORATOR","_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171542916"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/781#discussion_r171542916"},"pull_request":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/781"}},"in_reply_to_id":171008021},"pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/781","id":171210912,"html_url":"https://github.com/lightningnetwork/lnd/pull/781","diff_url":"https://github.com/lightningnetwork/lnd/pull/781.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/781.patch","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/781","number":781,"state":"open","locked":false,"title":"routing+gossiper: avoid unnecessarily validating sigs for announcement that is \"stale\"","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"body":"In this PR, we reduce the amount of unnecessary work that the gossiper can carry out. When CPU profiling some nodes, I noticed that we’d spend a lot of time validating the signatures for an announcement, only to realize that the router already had it.\r\n\r\nTo remedy this, we’ll use the new methods added to the channel router in order to avoid unnecessarily validating an announcement that is actually stale. This should reduce memory usage (since it uses big int’s under the scenes), and also idle CPU usage.\r\n\r\nThe new methods added to the channel router's `ChannelGraphSource` interface are: \r\n```go\r\n \r\n// IsStaleNode returns true if the graph source has a node announcement\r\n// for the target node with a more recent timestamp.\r\nIsStaleNode(node Vertex, timestamp time.Time) bool\r\n \r\n// IsKnownEdge returns true if the graph source already knows of the\r\n// passed channel ID.\r\nIsKnownEdge(chanID lnwire.ShortChannelID) bool\r\n \r\n// IsStaleEdgePolicy returns true if the graph source has a channel\r\n// edge for the passed channel ID (and flags) that have a more recent\r\n// timestamp.\r\nIsStaleEdgePolicy(chanID lnwire.ShortChannelID, timestamp time.Time,\r\nflags lnwire.ChanUpdateFlag) bool\r\n```","created_at":"2018-02-25T03:38:05Z","updated_at":"2018-03-01T12:29:07Z","closed_at":null,"merged_at":null,"merge_commit_sha":"9b66c0580d199a4e6c8532bef9babda70d7610eb","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[{"id":487149500,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/routing","name":"routing","color":"d4c5f9","default":false}],"milestone":{"url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5","html_url":"https://github.com/lightningnetwork/lnd/milestone/5","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5/labels","id":2725537,"number":5,"title":"v0.4-beta","description":"","creator":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"open_issues":15,"closed_issues":12,"state":"open","created_at":"2017-08-27T22:11:13Z","updated_at":"2018-02-28T21:13:56Z","due_on":null,"closed_at":null},"commits_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/781/commits","review_comments_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/781/comments","review_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/781/comments","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/5e487f1036dcc675ab910be872e37d72b812627a","head":{"label":"Roasbeef:gossiper-skip-validation-if-stale","ref":"gossiper-skip-validation-if-stale","sha":"5e487f1036dcc675ab910be872e37d72b812627a","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"repo":{"id":112244823,"name":"lnd","full_name":"Roasbeef/lnd","owner":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/Roasbeef/lnd","description":"Lightning Network Daemon ⚡️","fork":true,"url":"https://api.github.com/repos/Roasbeef/lnd","forks_url":"https://api.github.com/repos/Roasbeef/lnd/forks","keys_url":"https://api.github.com/repos/Roasbeef/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Roasbeef/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Roasbeef/lnd/teams","hooks_url":"https://api.github.com/repos/Roasbeef/lnd/hooks","issue_events_url":"https://api.github.com/repos/Roasbeef/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/Roasbeef/lnd/events","assignees_url":"https://api.github.com/repos/Roasbeef/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/Roasbeef/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/Roasbeef/lnd/tags","blobs_url":"https://api.github.com/repos/Roasbeef/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Roasbeef/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Roasbeef/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/Roasbeef/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Roasbeef/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/Roasbeef/lnd/languages","stargazers_url":"https://api.github.com/repos/Roasbeef/lnd/stargazers","contributors_url":"https://api.github.com/repos/Roasbeef/lnd/contributors","subscribers_url":"https://api.github.com/repos/Roasbeef/lnd/subscribers","subscription_url":"https://api.github.com/repos/Roasbeef/lnd/subscription","commits_url":"https://api.github.com/repos/Roasbeef/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/Roasbeef/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/Roasbeef/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/Roasbeef/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/Roasbeef/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/Roasbeef/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Roasbeef/lnd/merges","archive_url":"https://api.github.com/repos/Roasbeef/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Roasbeef/lnd/downloads","issues_url":"https://api.github.com/repos/Roasbeef/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/Roasbeef/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/Roasbeef/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/Roasbeef/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Roasbeef/lnd/labels{/name}","releases_url":"https://api.github.com/repos/Roasbeef/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/Roasbeef/lnd/deployments","created_at":"2017-11-27T20:26:47Z","updated_at":"2017-11-27T20:26:49Z","pushed_at":"2018-03-01T03:14:54Z","git_url":"git://github.com/Roasbeef/lnd.git","ssh_url":"git@github.com:Roasbeef/lnd.git","clone_url":"https://github.com/Roasbeef/lnd.git","svn_url":"https://github.com/Roasbeef/lnd","homepage":"","size":12585,"stargazers_count":0,"watchers_count":0,"language":"Go","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":null,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"lightningnetwork:master","ref":"master","sha":"e5f9b28e395507d860fb2d08c2f01f5889c14e39","user":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"repo":{"id":49765480,"name":"lnd","full_name":"lightningnetwork/lnd","owner":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/lightningnetwork/lnd","description":"Lightning Network Daemon ⚡️","fork":false,"url":"https://api.github.com/repos/lightningnetwork/lnd","forks_url":"https://api.github.com/repos/lightningnetwork/lnd/forks","keys_url":"https://api.github.com/repos/lightningnetwork/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lightningnetwork/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lightningnetwork/lnd/teams","hooks_url":"https://api.github.com/repos/lightningnetwork/lnd/hooks","issue_events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/lightningnetwork/lnd/events","assignees_url":"https://api.github.com/repos/lightningnetwork/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/lightningnetwork/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/lightningnetwork/lnd/tags","blobs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lightningnetwork/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/lightningnetwork/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/lightningnetwork/lnd/languages","stargazers_url":"https://api.github.com/repos/lightningnetwork/lnd/stargazers","contributors_url":"https://api.github.com/repos/lightningnetwork/lnd/contributors","subscribers_url":"https://api.github.com/repos/lightningnetwork/lnd/subscribers","subscription_url":"https://api.github.com/repos/lightningnetwork/lnd/subscription","commits_url":"https://api.github.com/repos/lightningnetwork/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/lightningnetwork/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/lightningnetwork/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/lightningnetwork/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lightningnetwork/lnd/merges","archive_url":"https://api.github.com/repos/lightningnetwork/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lightningnetwork/lnd/downloads","issues_url":"https://api.github.com/repos/lightningnetwork/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/lightningnetwork/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/labels{/name}","releases_url":"https://api.github.com/repos/lightningnetwork/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/lightningnetwork/lnd/deployments","created_at":"2016-01-16T08:19:33Z","updated_at":"2018-03-01T06:38:23Z","pushed_at":"2018-03-01T09:23:16Z","git_url":"git://github.com/lightningnetwork/lnd.git","ssh_url":"git@github.com:lightningnetwork/lnd.git","clone_url":"https://github.com/lightningnetwork/lnd.git","svn_url":"https://github.com/lightningnetwork/lnd","homepage":"","size":11766,"stargazers_count":2054,"watchers_count":2054,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":427,"mirror_url":null,"archived":false,"open_issues_count":124,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit"},"forks":427,"open_issues":124,"watchers":2054,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/781"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/781"},"issue":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/781"},"comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/781/comments"},"review_comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/781/comments"},"review_comment":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/781/commits"},"statuses":{"href":"https://api.github.com/repos/lightningnetwork/lnd/statuses/5e487f1036dcc675ab910be872e37d72b812627a"}},"author_association":"MEMBER"}},"public":true,"created_at":"2018-03-01T12:26:29Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7315712235","type":"IssueCommentEvent","actor":{"id":3129093,"login":"brndnmtthws","display_login":"brndnmtthws","gravatar_id":"","url":"https://api.github.com/users/brndnmtthws","avatar_url":"https://avatars.githubusercontent.com/u/3129093?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/785","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/785/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/785/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/785/events","html_url":"https://github.com/lightningnetwork/lnd/pull/785","id":300840370,"number":785,"title":"Add more details on using macaroons with GRPC.","user":{"login":"brndnmtthws","id":3129093,"avatar_url":"https://avatars1.githubusercontent.com/u/3129093?v=4","gravatar_id":"","url":"https://api.github.com/users/brndnmtthws","html_url":"https://github.com/brndnmtthws","followers_url":"https://api.github.com/users/brndnmtthws/followers","following_url":"https://api.github.com/users/brndnmtthws/following{/other_user}","gists_url":"https://api.github.com/users/brndnmtthws/gists{/gist_id}","starred_url":"https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brndnmtthws/subscriptions","organizations_url":"https://api.github.com/users/brndnmtthws/orgs","repos_url":"https://api.github.com/users/brndnmtthws/repos","events_url":"https://api.github.com/users/brndnmtthws/events{/privacy}","received_events_url":"https://api.github.com/users/brndnmtthws/received_events","type":"User","site_admin":false},"labels":[{"id":484610526,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/documentation","name":"documentation","color":"bfdadc","default":false},{"id":678416147,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/macaroons","name":"macaroons","color":"b60205","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":6,"created_at":"2018-02-28T00:01:13Z","updated_at":"2018-03-01T12:05:43Z","closed_at":"2018-03-01T03:27:14Z","author_association":"CONTRIBUTOR","pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/785","html_url":"https://github.com/lightningnetwork/lnd/pull/785","diff_url":"https://github.com/lightningnetwork/lnd/pull/785.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/785.patch"},"body":"This addresses #730."},"comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments/369571526","html_url":"https://github.com/lightningnetwork/lnd/pull/785#issuecomment-369571526","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/785","id":369571526,"user":{"login":"brndnmtthws","id":3129093,"avatar_url":"https://avatars1.githubusercontent.com/u/3129093?v=4","gravatar_id":"","url":"https://api.github.com/users/brndnmtthws","html_url":"https://github.com/brndnmtthws","followers_url":"https://api.github.com/users/brndnmtthws/followers","following_url":"https://api.github.com/users/brndnmtthws/following{/other_user}","gists_url":"https://api.github.com/users/brndnmtthws/gists{/gist_id}","starred_url":"https://api.github.com/users/brndnmtthws/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/brndnmtthws/subscriptions","organizations_url":"https://api.github.com/users/brndnmtthws/orgs","repos_url":"https://api.github.com/users/brndnmtthws/repos","events_url":"https://api.github.com/users/brndnmtthws/events{/privacy}","received_events_url":"https://api.github.com/users/brndnmtthws/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T12:05:43Z","updated_at":"2018-03-01T12:05:43Z","author_association":"CONTRIBUTOR","body":"Regarding travis: that's weird, I use it on a bunch of other projects without any trouble."}},"public":true,"created_at":"2018-03-01T12:05:43Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7315666689","type":"ForkEvent","actor":{"id":2987635,"login":"mikewlange","display_login":"mikewlange","gravatar_id":"","url":"https://api.github.com/users/mikewlange","avatar_url":"https://avatars.githubusercontent.com/u/2987635?"},"repo":{"id":49765768,"name":"lightningnetwork/lightning-onion","url":"https://api.github.com/repos/lightningnetwork/lightning-onion"},"payload":{"forkee":{"id":123428653,"name":"lightning-onion","full_name":"mikewlange/lightning-onion","owner":{"login":"mikewlange","id":2987635,"avatar_url":"https://avatars1.githubusercontent.com/u/2987635?v=4","gravatar_id":"","url":"https://api.github.com/users/mikewlange","html_url":"https://github.com/mikewlange","followers_url":"https://api.github.com/users/mikewlange/followers","following_url":"https://api.github.com/users/mikewlange/following{/other_user}","gists_url":"https://api.github.com/users/mikewlange/gists{/gist_id}","starred_url":"https://api.github.com/users/mikewlange/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikewlange/subscriptions","organizations_url":"https://api.github.com/users/mikewlange/orgs","repos_url":"https://api.github.com/users/mikewlange/repos","events_url":"https://api.github.com/users/mikewlange/events{/privacy}","received_events_url":"https://api.github.com/users/mikewlange/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/mikewlange/lightning-onion","description":"Onion Routed Micropayments for the Lightning Network","fork":true,"url":"https://api.github.com/repos/mikewlange/lightning-onion","forks_url":"https://api.github.com/repos/mikewlange/lightning-onion/forks","keys_url":"https://api.github.com/repos/mikewlange/lightning-onion/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mikewlange/lightning-onion/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mikewlange/lightning-onion/teams","hooks_url":"https://api.github.com/repos/mikewlange/lightning-onion/hooks","issue_events_url":"https://api.github.com/repos/mikewlange/lightning-onion/issues/events{/number}","events_url":"https://api.github.com/repos/mikewlange/lightning-onion/events","assignees_url":"https://api.github.com/repos/mikewlange/lightning-onion/assignees{/user}","branches_url":"https://api.github.com/repos/mikewlange/lightning-onion/branches{/branch}","tags_url":"https://api.github.com/repos/mikewlange/lightning-onion/tags","blobs_url":"https://api.github.com/repos/mikewlange/lightning-onion/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mikewlange/lightning-onion/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mikewlange/lightning-onion/git/refs{/sha}","trees_url":"https://api.github.com/repos/mikewlange/lightning-onion/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mikewlange/lightning-onion/statuses/{sha}","languages_url":"https://api.github.com/repos/mikewlange/lightning-onion/languages","stargazers_url":"https://api.github.com/repos/mikewlange/lightning-onion/stargazers","contributors_url":"https://api.github.com/repos/mikewlange/lightning-onion/contributors","subscribers_url":"https://api.github.com/repos/mikewlange/lightning-onion/subscribers","subscription_url":"https://api.github.com/repos/mikewlange/lightning-onion/subscription","commits_url":"https://api.github.com/repos/mikewlange/lightning-onion/commits{/sha}","git_commits_url":"https://api.github.com/repos/mikewlange/lightning-onion/git/commits{/sha}","comments_url":"https://api.github.com/repos/mikewlange/lightning-onion/comments{/number}","issue_comment_url":"https://api.github.com/repos/mikewlange/lightning-onion/issues/comments{/number}","contents_url":"https://api.github.com/repos/mikewlange/lightning-onion/contents/{+path}","compare_url":"https://api.github.com/repos/mikewlange/lightning-onion/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mikewlange/lightning-onion/merges","archive_url":"https://api.github.com/repos/mikewlange/lightning-onion/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mikewlange/lightning-onion/downloads","issues_url":"https://api.github.com/repos/mikewlange/lightning-onion/issues{/number}","pulls_url":"https://api.github.com/repos/mikewlange/lightning-onion/pulls{/number}","milestones_url":"https://api.github.com/repos/mikewlange/lightning-onion/milestones{/number}","notifications_url":"https://api.github.com/repos/mikewlange/lightning-onion/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mikewlange/lightning-onion/labels{/name}","releases_url":"https://api.github.com/repos/mikewlange/lightning-onion/releases{/id}","deployments_url":"https://api.github.com/repos/mikewlange/lightning-onion/deployments","created_at":"2018-03-01T11:55:03Z","updated_at":"2018-02-27T12:13:12Z","pushed_at":"2018-02-23T23:35:56Z","git_url":"git://github.com/mikewlange/lightning-onion.git","ssh_url":"git@github.com:mikewlange/lightning-onion.git","clone_url":"https://github.com/mikewlange/lightning-onion.git","svn_url":"https://github.com/mikewlange/lightning-onion","homepage":"","size":235,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit"},"forks":0,"open_issues":0,"watchers":0,"default_branch":"master","public":true}},"public":true,"created_at":"2018-03-01T11:55:03Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7315650181","type":"PullRequestReviewCommentEvent","actor":{"id":3765732,"login":"halseth","display_login":"halseth","gravatar_id":"","url":"https://api.github.com/users/halseth","avatar_url":"https://avatars.githubusercontent.com/u/3765732?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171535383","pull_request_review_id":100377150,"id":171535383,"diff_hunk":"@@ -3180,8 +3180,20 @@ func (lc *LightningChannel) validateCommitmentSanity(theirLogCounter,\n \tourInitialBalance := commitChain.tip().ourBalance\n \ttheirInitialBalance := commitChain.tip().theirBalance\n \n-\tourBalance, theirBalance, commitWeight, filteredView, feePerKw :=\n-\t\tlc.computeView(view, remoteChain, false)\n+\tourBalance, theirBalance, commitWeight, filteredView, feePerKw := lc.computeView(\n+\t\tview, remoteChain, false,\n+\t)\n+\n+\t// As a quick sanity check, we'll ensure that if we interpret the\n+\t// balances as signed integers, they haven't dipped down below zero. If\n+\t// they have, then this indicates that a party doesn't have sufficient\n+\t// balance to satisfy the final evaluated HTLC's.\n+\tswitch {\n+\tcase int64(ourBalance) < 0:\n+\t\treturn ErrBelowChanReserve\n+\tcase int64(theirBalance) < 0:","path":"lnwallet/channel.go","position":121,"original_position":96,"commit_id":"208daa80cb0c6e7dfa72263a8156f5c8a98999cb","original_commit_id":"8aad9fe15d382a7b696888f067afcb8072291be7","user":{"login":"halseth","id":3765732,"avatar_url":"https://avatars1.githubusercontent.com/u/3765732?v=4","gravatar_id":"","url":"https://api.github.com/users/halseth","html_url":"https://github.com/halseth","followers_url":"https://api.github.com/users/halseth/followers","following_url":"https://api.github.com/users/halseth/following{/other_user}","gists_url":"https://api.github.com/users/halseth/gists{/gist_id}","starred_url":"https://api.github.com/users/halseth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halseth/subscriptions","organizations_url":"https://api.github.com/users/halseth/orgs","repos_url":"https://api.github.com/users/halseth/repos","events_url":"https://api.github.com/users/halseth/events{/privacy}","received_events_url":"https://api.github.com/users/halseth/received_events","type":"User","site_admin":false},"body":"Wouldn't it combine the two added sanity checks by doing this after the `commitFee` was subtracted?","created_at":"2018-03-01T11:50:15Z","updated_at":"2018-03-01T11:51:13Z","html_url":"https://github.com/lightningnetwork/lnd/pull/779#discussion_r171535383","pull_request_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779","author_association":"COLLABORATOR","_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171535383"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/779#discussion_r171535383"},"pull_request":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779"}}},"pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779","id":171210551,"html_url":"https://github.com/lightningnetwork/lnd/pull/779","diff_url":"https://github.com/lightningnetwork/lnd/pull/779.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/779.patch","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/779","number":779,"state":"open","locked":false,"title":"lnwire+lnwallet+htlcswitch: modify lnwire.MilliSatoshi to be unsigned, fix fee related bugs that emerged","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"body":"In this PR, we correct a _minor_ deviation (with tangible ramifications) of our implementation from the specification. In the spec, all integers are unsigned unless otherwise state. However, our definition of `lnwire.MilliSatoshi` was an `int64`. As many of the other implementations used the equivalent of an `uint64`, users have been reporting certain compatibility issues due to this divergence. \r\n\r\nTo remedy this, we'll now properly use:\r\n```go\r\ntype MilliSatoshi uint64\r\n```\r\n\r\nOnce this initial change was made, a number of bugs emerged. Many of these weren't bugs under the existing logic as negative integers were possible, and the checks assumed so. Once we moved to unsigned integers, integer underflow went silently undetected. As a result, we've tightened up several consistency checks through the wallet, and the switch in order to ensure the same (at times even stronger) behavior is kept in place. \r\n\r\nFixes https://github.com/cdecker/lightning-integration/issues/11. ","created_at":"2018-02-25T03:26:16Z","updated_at":"2018-03-01T11:51:13Z","closed_at":null,"merged_at":null,"merge_commit_sha":"3ffdca0eee52f7339764de142201f9c077d83aa0","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[{"id":312148185,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/bug","name":"bug","color":"fc2929","default":true},{"id":431221659,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/wallet","name":"wallet","color":"5319e7","default":false},{"id":431221742,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/wire%20protocol","name":"wire protocol","color":"1d76db","default":false}],"milestone":{"url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5","html_url":"https://github.com/lightningnetwork/lnd/milestone/5","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5/labels","id":2725537,"number":5,"title":"v0.4-beta","description":"","creator":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"open_issues":15,"closed_issues":12,"state":"open","created_at":"2017-08-27T22:11:13Z","updated_at":"2018-02-28T21:13:56Z","due_on":null,"closed_at":null},"commits_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779/commits","review_comments_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779/comments","review_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/779/comments","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/208daa80cb0c6e7dfa72263a8156f5c8a98999cb","head":{"label":"Roasbeef:unsigned-msat-and-fee-fixes","ref":"unsigned-msat-and-fee-fixes","sha":"208daa80cb0c6e7dfa72263a8156f5c8a98999cb","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"repo":{"id":112244823,"name":"lnd","full_name":"Roasbeef/lnd","owner":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/Roasbeef/lnd","description":"Lightning Network Daemon ⚡️","fork":true,"url":"https://api.github.com/repos/Roasbeef/lnd","forks_url":"https://api.github.com/repos/Roasbeef/lnd/forks","keys_url":"https://api.github.com/repos/Roasbeef/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Roasbeef/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Roasbeef/lnd/teams","hooks_url":"https://api.github.com/repos/Roasbeef/lnd/hooks","issue_events_url":"https://api.github.com/repos/Roasbeef/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/Roasbeef/lnd/events","assignees_url":"https://api.github.com/repos/Roasbeef/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/Roasbeef/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/Roasbeef/lnd/tags","blobs_url":"https://api.github.com/repos/Roasbeef/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Roasbeef/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Roasbeef/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/Roasbeef/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Roasbeef/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/Roasbeef/lnd/languages","stargazers_url":"https://api.github.com/repos/Roasbeef/lnd/stargazers","contributors_url":"https://api.github.com/repos/Roasbeef/lnd/contributors","subscribers_url":"https://api.github.com/repos/Roasbeef/lnd/subscribers","subscription_url":"https://api.github.com/repos/Roasbeef/lnd/subscription","commits_url":"https://api.github.com/repos/Roasbeef/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/Roasbeef/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/Roasbeef/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/Roasbeef/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/Roasbeef/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/Roasbeef/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Roasbeef/lnd/merges","archive_url":"https://api.github.com/repos/Roasbeef/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Roasbeef/lnd/downloads","issues_url":"https://api.github.com/repos/Roasbeef/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/Roasbeef/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/Roasbeef/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/Roasbeef/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Roasbeef/lnd/labels{/name}","releases_url":"https://api.github.com/repos/Roasbeef/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/Roasbeef/lnd/deployments","created_at":"2017-11-27T20:26:47Z","updated_at":"2017-11-27T20:26:49Z","pushed_at":"2018-03-01T03:14:54Z","git_url":"git://github.com/Roasbeef/lnd.git","ssh_url":"git@github.com:Roasbeef/lnd.git","clone_url":"https://github.com/Roasbeef/lnd.git","svn_url":"https://github.com/Roasbeef/lnd","homepage":"","size":12585,"stargazers_count":0,"watchers_count":0,"language":"Go","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":null,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"lightningnetwork:master","ref":"master","sha":"e5f9b28e395507d860fb2d08c2f01f5889c14e39","user":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"repo":{"id":49765480,"name":"lnd","full_name":"lightningnetwork/lnd","owner":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/lightningnetwork/lnd","description":"Lightning Network Daemon ⚡️","fork":false,"url":"https://api.github.com/repos/lightningnetwork/lnd","forks_url":"https://api.github.com/repos/lightningnetwork/lnd/forks","keys_url":"https://api.github.com/repos/lightningnetwork/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lightningnetwork/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lightningnetwork/lnd/teams","hooks_url":"https://api.github.com/repos/lightningnetwork/lnd/hooks","issue_events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/lightningnetwork/lnd/events","assignees_url":"https://api.github.com/repos/lightningnetwork/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/lightningnetwork/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/lightningnetwork/lnd/tags","blobs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lightningnetwork/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/lightningnetwork/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/lightningnetwork/lnd/languages","stargazers_url":"https://api.github.com/repos/lightningnetwork/lnd/stargazers","contributors_url":"https://api.github.com/repos/lightningnetwork/lnd/contributors","subscribers_url":"https://api.github.com/repos/lightningnetwork/lnd/subscribers","subscription_url":"https://api.github.com/repos/lightningnetwork/lnd/subscription","commits_url":"https://api.github.com/repos/lightningnetwork/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/lightningnetwork/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/lightningnetwork/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/lightningnetwork/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lightningnetwork/lnd/merges","archive_url":"https://api.github.com/repos/lightningnetwork/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lightningnetwork/lnd/downloads","issues_url":"https://api.github.com/repos/lightningnetwork/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/lightningnetwork/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/labels{/name}","releases_url":"https://api.github.com/repos/lightningnetwork/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/lightningnetwork/lnd/deployments","created_at":"2016-01-16T08:19:33Z","updated_at":"2018-03-01T06:38:23Z","pushed_at":"2018-03-01T09:23:16Z","git_url":"git://github.com/lightningnetwork/lnd.git","ssh_url":"git@github.com:lightningnetwork/lnd.git","clone_url":"https://github.com/lightningnetwork/lnd.git","svn_url":"https://github.com/lightningnetwork/lnd","homepage":"","size":11766,"stargazers_count":2054,"watchers_count":2054,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":427,"mirror_url":null,"archived":false,"open_issues_count":124,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit"},"forks":427,"open_issues":124,"watchers":2054,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/779"},"issue":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/779"},"comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/779/comments"},"review_comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779/comments"},"review_comment":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779/commits"},"statuses":{"href":"https://api.github.com/repos/lightningnetwork/lnd/statuses/208daa80cb0c6e7dfa72263a8156f5c8a98999cb"}},"author_association":"MEMBER"}},"public":true,"created_at":"2018-03-01T11:50:15Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7315650162","type":"PullRequestReviewCommentEvent","actor":{"id":3765732,"login":"halseth","display_login":"halseth","gravatar_id":"","url":"https://api.github.com/users/halseth","avatar_url":"https://avatars.githubusercontent.com/u/3765732?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171519560","pull_request_review_id":100377150,"id":171519560,"diff_hunk":"@@ -289,42 +289,38 @@ func (r *ChannelReservation) CommitConstraints(csvDelay, maxHtlcs uint16,\n \t\treturn fmt.Errorf(\"csvDelay is too large: %d\", csvDelay)\n \t}\n \n-\t// Fail if we consider the channel reserve to be too large.\n-\t// We currently fail if it is greater than 20% of the\n-\t// channel capacity.\n+\t// Fail if we consider the channel reserve to be too large.  We\n+\t// currently fail if it is greater than 20% of the channel capacity.\n \tmaxChanReserve := r.partialState.Capacity / 5\n \tif chanReserve > maxChanReserve {\n \t\treturn fmt.Errorf(\"chanReserve is too large: %g\",\n \t\t\tchanReserve.ToBTC())\n \t}\n \n-\t// Fail if the minimum HTLC value is too large. If this is\n-\t// too large, the channel won't be useful for sending small\n-\t// payments. This limit is currently set to maxValueInFlight,\n-\t// effictively letting the remote setting this as large as\n-\t// it wants.\n-\t// TODO(halseth): set a reasonable/dynamic value.\n+\t// Fail if the minimum HTLC value is too large. If this is too large,\n+\t// the channel won't be useful for sending small payments. This limit\n+\t// is currently set to maxValueInFlight, effectively letting the remote\n+\t// setting this as large as it wants.\n \tif minHtlc > maxValueInFlight {\n-\t\treturn fmt.Errorf(\"minimum HTLC value is too large: %g\",\n-\t\t\tr.ourContribution.MinHTLC.ToBTC())\n+\t\treturn fmt.Errorf(\"minimum HTLC value is too large: %v\",\n+\t\t\tr.ourContribution.MinHTLC)\n \t}\n \n-\t// Fail if maxHtlcs is above the maximum allowed number of 483.\n-\t// This number is specified in BOLT-02.\n+\t// Fail if maxHtlcs is above the maximum allowed number of 483.  This\n+\t// number is specified in BOLT-02.\n \tif maxHtlcs > uint16(MaxHTLCNumber/2) {\n \t\treturn fmt.Errorf(\"maxHtlcs is too large: %d\", maxHtlcs)\n \t}\n \n-\t// Fail if we consider maxHtlcs too small. If this is too small\n-\t// we cannot offer many HTLCs to the remote.\n+\t// Fail if we consider maxHtlcs too small. If this is too small we\n+\t// cannot offer many HTLCs to the remote.\n \tconst minNumHtlc = 5\n \tif maxHtlcs < minNumHtlc {\n \t\treturn fmt.Errorf(\"maxHtlcs is too small: %d\", maxHtlcs)\n \t}\n \n-\t// Fail if we consider maxValueInFlight too small. We currently\n-\t// require the remote to at least allow minNumHtlc * minHtlc\n-\t// in flight.\n+\t// Fail if we consider maxValueInFlight too small. We currently require\n+\t// the remote to at least allow minNumHtlc * minHtlc in flight.\n \tif maxValueInFlight < minNumHtlc*minHtlc {\n \t\treturn fmt.Errorf(\"maxValueInFlight is too small: %g\",","path":"lnwallet/reservation.go","position":77,"original_position":55,"commit_id":"208daa80cb0c6e7dfa72263a8156f5c8a98999cb","original_commit_id":"bb287c82d2f2517a527e047d9e3f9e30f1508189","user":{"login":"halseth","id":3765732,"avatar_url":"https://avatars1.githubusercontent.com/u/3765732?v=4","gravatar_id":"","url":"https://api.github.com/users/halseth","html_url":"https://github.com/halseth","followers_url":"https://api.github.com/users/halseth/followers","following_url":"https://api.github.com/users/halseth/following{/other_user}","gists_url":"https://api.github.com/users/halseth/gists{/gist_id}","starred_url":"https://api.github.com/users/halseth/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/halseth/subscriptions","organizations_url":"https://api.github.com/users/halseth/orgs","repos_url":"https://api.github.com/users/halseth/repos","events_url":"https://api.github.com/users/halseth/events{/privacy}","received_events_url":"https://api.github.com/users/halseth/received_events","type":"User","site_admin":false},"body":"also do the change here?","created_at":"2018-03-01T10:40:29Z","updated_at":"2018-03-01T11:51:13Z","html_url":"https://github.com/lightningnetwork/lnd/pull/779#discussion_r171519560","pull_request_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779","author_association":"COLLABORATOR","_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171519560"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/779#discussion_r171519560"},"pull_request":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779"}}},"pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779","id":171210551,"html_url":"https://github.com/lightningnetwork/lnd/pull/779","diff_url":"https://github.com/lightningnetwork/lnd/pull/779.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/779.patch","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/779","number":779,"state":"open","locked":false,"title":"lnwire+lnwallet+htlcswitch: modify lnwire.MilliSatoshi to be unsigned, fix fee related bugs that emerged","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"body":"In this PR, we correct a _minor_ deviation (with tangible ramifications) of our implementation from the specification. In the spec, all integers are unsigned unless otherwise state. However, our definition of `lnwire.MilliSatoshi` was an `int64`. As many of the other implementations used the equivalent of an `uint64`, users have been reporting certain compatibility issues due to this divergence. \r\n\r\nTo remedy this, we'll now properly use:\r\n```go\r\ntype MilliSatoshi uint64\r\n```\r\n\r\nOnce this initial change was made, a number of bugs emerged. Many of these weren't bugs under the existing logic as negative integers were possible, and the checks assumed so. Once we moved to unsigned integers, integer underflow went silently undetected. As a result, we've tightened up several consistency checks through the wallet, and the switch in order to ensure the same (at times even stronger) behavior is kept in place. \r\n\r\nFixes https://github.com/cdecker/lightning-integration/issues/11. ","created_at":"2018-02-25T03:26:16Z","updated_at":"2018-03-01T11:51:13Z","closed_at":null,"merged_at":null,"merge_commit_sha":"3ffdca0eee52f7339764de142201f9c077d83aa0","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[{"id":312148185,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/bug","name":"bug","color":"fc2929","default":true},{"id":431221659,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/wallet","name":"wallet","color":"5319e7","default":false},{"id":431221742,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/wire%20protocol","name":"wire protocol","color":"1d76db","default":false}],"milestone":{"url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5","html_url":"https://github.com/lightningnetwork/lnd/milestone/5","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5/labels","id":2725537,"number":5,"title":"v0.4-beta","description":"","creator":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"open_issues":15,"closed_issues":12,"state":"open","created_at":"2017-08-27T22:11:13Z","updated_at":"2018-02-28T21:13:56Z","due_on":null,"closed_at":null},"commits_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779/commits","review_comments_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779/comments","review_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/779/comments","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/208daa80cb0c6e7dfa72263a8156f5c8a98999cb","head":{"label":"Roasbeef:unsigned-msat-and-fee-fixes","ref":"unsigned-msat-and-fee-fixes","sha":"208daa80cb0c6e7dfa72263a8156f5c8a98999cb","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"repo":{"id":112244823,"name":"lnd","full_name":"Roasbeef/lnd","owner":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/Roasbeef/lnd","description":"Lightning Network Daemon ⚡️","fork":true,"url":"https://api.github.com/repos/Roasbeef/lnd","forks_url":"https://api.github.com/repos/Roasbeef/lnd/forks","keys_url":"https://api.github.com/repos/Roasbeef/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Roasbeef/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Roasbeef/lnd/teams","hooks_url":"https://api.github.com/repos/Roasbeef/lnd/hooks","issue_events_url":"https://api.github.com/repos/Roasbeef/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/Roasbeef/lnd/events","assignees_url":"https://api.github.com/repos/Roasbeef/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/Roasbeef/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/Roasbeef/lnd/tags","blobs_url":"https://api.github.com/repos/Roasbeef/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Roasbeef/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Roasbeef/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/Roasbeef/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Roasbeef/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/Roasbeef/lnd/languages","stargazers_url":"https://api.github.com/repos/Roasbeef/lnd/stargazers","contributors_url":"https://api.github.com/repos/Roasbeef/lnd/contributors","subscribers_url":"https://api.github.com/repos/Roasbeef/lnd/subscribers","subscription_url":"https://api.github.com/repos/Roasbeef/lnd/subscription","commits_url":"https://api.github.com/repos/Roasbeef/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/Roasbeef/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/Roasbeef/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/Roasbeef/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/Roasbeef/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/Roasbeef/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Roasbeef/lnd/merges","archive_url":"https://api.github.com/repos/Roasbeef/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Roasbeef/lnd/downloads","issues_url":"https://api.github.com/repos/Roasbeef/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/Roasbeef/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/Roasbeef/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/Roasbeef/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Roasbeef/lnd/labels{/name}","releases_url":"https://api.github.com/repos/Roasbeef/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/Roasbeef/lnd/deployments","created_at":"2017-11-27T20:26:47Z","updated_at":"2017-11-27T20:26:49Z","pushed_at":"2018-03-01T03:14:54Z","git_url":"git://github.com/Roasbeef/lnd.git","ssh_url":"git@github.com:Roasbeef/lnd.git","clone_url":"https://github.com/Roasbeef/lnd.git","svn_url":"https://github.com/Roasbeef/lnd","homepage":"","size":12585,"stargazers_count":0,"watchers_count":0,"language":"Go","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":null,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"lightningnetwork:master","ref":"master","sha":"e5f9b28e395507d860fb2d08c2f01f5889c14e39","user":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"repo":{"id":49765480,"name":"lnd","full_name":"lightningnetwork/lnd","owner":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/lightningnetwork/lnd","description":"Lightning Network Daemon ⚡️","fork":false,"url":"https://api.github.com/repos/lightningnetwork/lnd","forks_url":"https://api.github.com/repos/lightningnetwork/lnd/forks","keys_url":"https://api.github.com/repos/lightningnetwork/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lightningnetwork/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lightningnetwork/lnd/teams","hooks_url":"https://api.github.com/repos/lightningnetwork/lnd/hooks","issue_events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/lightningnetwork/lnd/events","assignees_url":"https://api.github.com/repos/lightningnetwork/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/lightningnetwork/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/lightningnetwork/lnd/tags","blobs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lightningnetwork/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/lightningnetwork/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/lightningnetwork/lnd/languages","stargazers_url":"https://api.github.com/repos/lightningnetwork/lnd/stargazers","contributors_url":"https://api.github.com/repos/lightningnetwork/lnd/contributors","subscribers_url":"https://api.github.com/repos/lightningnetwork/lnd/subscribers","subscription_url":"https://api.github.com/repos/lightningnetwork/lnd/subscription","commits_url":"https://api.github.com/repos/lightningnetwork/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/lightningnetwork/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/lightningnetwork/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/lightningnetwork/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lightningnetwork/lnd/merges","archive_url":"https://api.github.com/repos/lightningnetwork/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lightningnetwork/lnd/downloads","issues_url":"https://api.github.com/repos/lightningnetwork/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/lightningnetwork/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/labels{/name}","releases_url":"https://api.github.com/repos/lightningnetwork/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/lightningnetwork/lnd/deployments","created_at":"2016-01-16T08:19:33Z","updated_at":"2018-03-01T06:38:23Z","pushed_at":"2018-03-01T09:23:16Z","git_url":"git://github.com/lightningnetwork/lnd.git","ssh_url":"git@github.com:lightningnetwork/lnd.git","clone_url":"https://github.com/lightningnetwork/lnd.git","svn_url":"https://github.com/lightningnetwork/lnd","homepage":"","size":11766,"stargazers_count":2054,"watchers_count":2054,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":427,"mirror_url":null,"archived":false,"open_issues_count":124,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit"},"forks":427,"open_issues":124,"watchers":2054,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/779"},"issue":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/779"},"comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/779/comments"},"review_comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779/comments"},"review_comment":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/779/commits"},"statuses":{"href":"https://api.github.com/repos/lightningnetwork/lnd/statuses/208daa80cb0c6e7dfa72263a8156f5c8a98999cb"}},"author_association":"MEMBER"}},"public":true,"created_at":"2018-03-01T10:40:29Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7315409517","type":"IssueCommentEvent","actor":{"id":6586275,"login":"dabura667","display_login":"dabura667","gravatar_id":"","url":"https://api.github.com/users/dabura667","avatar_url":"https://avatars.githubusercontent.com/u/6586275?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/773","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/773/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/773/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/773/events","html_url":"https://github.com/lightningnetwork/lnd/pull/773","id":299567377,"number":773,"title":"aezeed: add new package implementing the aezeed cipher seed scheme ","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":{"login":"cfromknecht","id":2013993,"avatar_url":"https://avatars1.githubusercontent.com/u/2013993?v=4","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","html_url":"https://github.com/cfromknecht","followers_url":"https://api.github.com/users/cfromknecht/followers","following_url":"https://api.github.com/users/cfromknecht/following{/other_user}","gists_url":"https://api.github.com/users/cfromknecht/gists{/gist_id}","starred_url":"https://api.github.com/users/cfromknecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfromknecht/subscriptions","organizations_url":"https://api.github.com/users/cfromknecht/orgs","repos_url":"https://api.github.com/users/cfromknecht/repos","events_url":"https://api.github.com/users/cfromknecht/events{/privacy}","received_events_url":"https://api.github.com/users/cfromknecht/received_events","type":"User","site_admin":false},"assignees":[{"login":"cfromknecht","id":2013993,"avatar_url":"https://avatars1.githubusercontent.com/u/2013993?v=4","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","html_url":"https://github.com/cfromknecht","followers_url":"https://api.github.com/users/cfromknecht/followers","following_url":"https://api.github.com/users/cfromknecht/following{/other_user}","gists_url":"https://api.github.com/users/cfromknecht/gists{/gist_id}","starred_url":"https://api.github.com/users/cfromknecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfromknecht/subscriptions","organizations_url":"https://api.github.com/users/cfromknecht/orgs","repos_url":"https://api.github.com/users/cfromknecht/repos","events_url":"https://api.github.com/users/cfromknecht/events{/privacy}","received_events_url":"https://api.github.com/users/cfromknecht/received_events","type":"User","site_admin":false}],"milestone":{"url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5","html_url":"https://github.com/lightningnetwork/lnd/milestone/5","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5/labels","id":2725537,"number":5,"title":"v0.4-beta","description":"","creator":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"open_issues":15,"closed_issues":12,"state":"open","created_at":"2017-08-27T22:11:13Z","updated_at":"2018-02-28T21:13:56Z","due_on":null,"closed_at":null},"comments":5,"created_at":"2018-02-23T01:18:04Z","updated_at":"2018-03-01T10:56:36Z","closed_at":null,"author_association":"MEMBER","pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773","html_url":"https://github.com/lightningnetwork/lnd/pull/773","diff_url":"https://github.com/lightningnetwork/lnd/pull/773.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/773.patch"},"body":"In this PR, we add a new package implementing the aezeed cipher\r\nseed scheme (based on [`aez`](http://web.cs.ucdavis.edu/~rogaway/aez/)). \r\n\r\nThis is a new scheme developed that aims to overcome the\r\ntwo major short comings of BIP39: a lack of a version, and a lack of a\r\nwallet birthday. A lack a version means that wallets may not\r\nnecessarily know *how* to re-derive addresses during the recovery\r\nprocess. A lack of a birthday means that wallets don’t know how far\r\nback to look in the chain to ensure that they derive *all* the proper\r\nuser addresses. Additionally, BIP39 use a _very_ weak KDF. We use \r\nscrypt with modern parameters (n=32768, r=8, p=1). A set of benchmarks has \r\nbeen added, on my laptop I get about 100ms per attempt):\r\n```\r\n⛰ go test -run=XXX -bench=.\r\n\r\ngoos: darwin\r\ngoarch: amd64\r\npkg: github.com/lightningnetwork/lnd/aezeed\r\nBenchmarkToMnenonic-4     \t      10\t 102287840 ns/op\r\nBenchmarkFromMnenonic-4   \t      10\t 105874973 ns/op\r\nPASS\r\nok  \tgithub.com/lightningnetwork/lnd/aezeed\t3.036s\r\n```\r\n\r\nAside from addressing the shortcomings of BIP 39 a cipher  seed \r\ncan: be upgraded, and have it's password changed, \r\n\r\nSample seed: \r\n```\r\nability dance scatter raw fly dentist bar nominee exhaust wine snap super cost case coconut ticket spread funny grain chimney aspect business quiz ginger\r\n```\r\n\r\n## Plaintext `aezeed` encoding\r\n\r\nThe aezeed scheme addresses these two drawbacks and adds a number of\r\ndesirable features. First, we start with the following plaintext seed:\r\n```\r\n1 byte internal version || 2 byte timestamp || 16 bytes of entropy\r\n```\r\n\r\nThe version field is for wallets to be able to know *how* to re-derive\r\nthe keys of the wallet.\r\n\r\nThe 2 byte timestamp is expressed in Bitcoin Days Genesis, meaning that\r\nthe number of days since the timestamp in Bitcoin’s genesis block. This\r\nallow us to save space, and also avoid using a wasteful level of\r\ngranularity. With the currently, this can express time up until 2188.\r\n\r\nFinally, the entropy is raw entropy that should be used to derive\r\nwallet’s HD root.\r\n\r\n## `aezeed` enciphering/deciperhing\r\n\r\nNext, we’ll take the plaintext seed described above and encipher it to\r\nprocure a final cipher text. We’ll then take this cipher text (the\r\nCipherSeed) and encode that using a 24-word mnemonic. The enciphering\r\nprocess takes a user defined passphrase. If no passphrase is provided,\r\nthen the string “aezeed” will be used.\r\n\r\nTo encipher a plaintext seed (19 bytes) to arrive at an enciphered\r\ncipher seed (33 bytes), we apply the following operations:\r\n   * First we take the external version an append it to our buffer. The\r\nexternal version describes *how* we encipher. For the first version\r\n(version 0), we’ll use scrypt(n=32768, r=8, p=1) and aezeed.\r\n  * Next, we’ll use scrypt (with the version 9 params) to generate a\r\nstrong key for encryption. We’ll generate a 32-byte key using 5 bytes\r\nas a salt. The usage of the salt is meant to make the creation of\r\nrainbow tables infeasible.\r\n  * Next, the enciphering process. We use `aez`, modern AEAD with\r\nnonce-misuse resistance properties. The important trait we exploit is\r\nthat it’s an *arbitrary input length block cipher*. Additionally, it\r\nhas what’s essentially a configurable MAC size. In our scheme we’ll use\r\na value of 8, which acts as a 64-bit checksum. We’ll encrypt with our\r\ngenerated seed, and use an AD of (version || salt).\r\n  * Finally, we’ll encode this 33-byte cipher text using the default\r\nworld list of BIP 39 to produce 24 english words.\r\n\r\n## Properties of the aezeed cipher seed\r\n\r\nThe `aezeed` cipher seed scheme has a few cool properties, notably:\r\n   * The mnemonic itself is a cipher text, meaning leaving it in\r\nplaintext is advisable if the user also set a passphrase. This is in\r\ncontrast to BIP 39 where the mnemonic alone (without a passrphase) may\r\nbe sufficient to steal funds.\r\n   * A cipherseed can be modified to *change* the passphrase. This\r\nmeans that if the users wants a stronger passphrase, they can decipher\r\n(with the old passphrase), then encipher (with a new passphrase).\r\nCompared to BIP 39, where if the users used a passphrase, since the\r\nmapping is one way, they can’t change the passphrase of their existing\r\nHD key chain.\r\n  * A cipher seed can be *upgraded*. Since we have an external version,\r\noffline tools can be provided to decipher using the old params, and\r\nencipher using the new params. In the future if we change ciphers,\r\nchange scrypt, or just the parameters of scrypt, then users can easily\r\nupgrade their seed with an offline tool.\r\n"},"comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments/369555487","html_url":"https://github.com/lightningnetwork/lnd/pull/773#issuecomment-369555487","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/773","id":369555487,"user":{"login":"dabura667","id":6586275,"avatar_url":"https://avatars2.githubusercontent.com/u/6586275?v=4","gravatar_id":"","url":"https://api.github.com/users/dabura667","html_url":"https://github.com/dabura667","followers_url":"https://api.github.com/users/dabura667/followers","following_url":"https://api.github.com/users/dabura667/following{/other_user}","gists_url":"https://api.github.com/users/dabura667/gists{/gist_id}","starred_url":"https://api.github.com/users/dabura667/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/dabura667/subscriptions","organizations_url":"https://api.github.com/users/dabura667/orgs","repos_url":"https://api.github.com/users/dabura667/repos","events_url":"https://api.github.com/users/dabura667/events{/privacy}","received_events_url":"https://api.github.com/users/dabura667/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T10:56:36Z","updated_at":"2018-03-01T10:56:36Z","author_association":"NONE","body":"Super cool."}},"public":true,"created_at":"2018-03-01T10:56:36Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7315230128","type":"ForkEvent","actor":{"id":9085669,"login":"melaurent","display_login":"melaurent","gravatar_id":"","url":"https://api.github.com/users/melaurent","avatar_url":"https://avatars.githubusercontent.com/u/9085669?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"forkee":{"id":123418725,"name":"lnd","full_name":"melaurent/lnd","owner":{"login":"melaurent","id":9085669,"avatar_url":"https://avatars0.githubusercontent.com/u/9085669?v=4","gravatar_id":"","url":"https://api.github.com/users/melaurent","html_url":"https://github.com/melaurent","followers_url":"https://api.github.com/users/melaurent/followers","following_url":"https://api.github.com/users/melaurent/following{/other_user}","gists_url":"https://api.github.com/users/melaurent/gists{/gist_id}","starred_url":"https://api.github.com/users/melaurent/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/melaurent/subscriptions","organizations_url":"https://api.github.com/users/melaurent/orgs","repos_url":"https://api.github.com/users/melaurent/repos","events_url":"https://api.github.com/users/melaurent/events{/privacy}","received_events_url":"https://api.github.com/users/melaurent/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/melaurent/lnd","description":"Lightning Network Daemon ⚡️","fork":true,"url":"https://api.github.com/repos/melaurent/lnd","forks_url":"https://api.github.com/repos/melaurent/lnd/forks","keys_url":"https://api.github.com/repos/melaurent/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/melaurent/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/melaurent/lnd/teams","hooks_url":"https://api.github.com/repos/melaurent/lnd/hooks","issue_events_url":"https://api.github.com/repos/melaurent/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/melaurent/lnd/events","assignees_url":"https://api.github.com/repos/melaurent/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/melaurent/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/melaurent/lnd/tags","blobs_url":"https://api.github.com/repos/melaurent/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/melaurent/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/melaurent/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/melaurent/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/melaurent/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/melaurent/lnd/languages","stargazers_url":"https://api.github.com/repos/melaurent/lnd/stargazers","contributors_url":"https://api.github.com/repos/melaurent/lnd/contributors","subscribers_url":"https://api.github.com/repos/melaurent/lnd/subscribers","subscription_url":"https://api.github.com/repos/melaurent/lnd/subscription","commits_url":"https://api.github.com/repos/melaurent/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/melaurent/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/melaurent/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/melaurent/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/melaurent/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/melaurent/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/melaurent/lnd/merges","archive_url":"https://api.github.com/repos/melaurent/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/melaurent/lnd/downloads","issues_url":"https://api.github.com/repos/melaurent/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/melaurent/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/melaurent/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/melaurent/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/melaurent/lnd/labels{/name}","releases_url":"https://api.github.com/repos/melaurent/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/melaurent/lnd/deployments","created_at":"2018-03-01T10:18:44Z","updated_at":"2018-03-01T06:38:23Z","pushed_at":"2018-03-01T09:23:16Z","git_url":"git://github.com/melaurent/lnd.git","ssh_url":"git@github.com:melaurent/lnd.git","clone_url":"https://github.com/melaurent/lnd.git","svn_url":"https://github.com/melaurent/lnd","homepage":"","size":11766,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit"},"forks":0,"open_issues":0,"watchers":0,"default_branch":"master","public":true}},"public":true,"created_at":"2018-03-01T10:18:44Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7314955870","type":"PullRequestEvent","actor":{"id":2013993,"login":"cfromknecht","display_login":"cfromknecht","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","avatar_url":"https://avatars.githubusercontent.com/u/2013993?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"opened","number":791,"pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/791","id":172181880,"html_url":"https://github.com/lightningnetwork/lnd/pull/791","diff_url":"https://github.com/lightningnetwork/lnd/pull/791.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/791.patch","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/791","number":791,"state":"open","locked":false,"title":" Circuit map persistence","user":{"login":"cfromknecht","id":2013993,"avatar_url":"https://avatars1.githubusercontent.com/u/2013993?v=4","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","html_url":"https://github.com/cfromknecht","followers_url":"https://api.github.com/users/cfromknecht/followers","following_url":"https://api.github.com/users/cfromknecht/following{/other_user}","gists_url":"https://api.github.com/users/cfromknecht/gists{/gist_id}","starred_url":"https://api.github.com/users/cfromknecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfromknecht/subscriptions","organizations_url":"https://api.github.com/users/cfromknecht/orgs","repos_url":"https://api.github.com/users/cfromknecht/repos","events_url":"https://api.github.com/users/cfromknecht/events{/privacy}","received_events_url":"https://api.github.com/users/cfromknecht/received_events","type":"User","site_admin":false},"body":"This PR isolates the changes to the circuit map included in #761 in order to isolate it for review. \r\n\r\nThe major additions include:\r\n - Full persistence of circuits, including the onion error encrypters.\r\n - Batched writes so that the circuit map can be updated atomically at the granularity of the channel state transitions.\r\n - Persistent duplicate detection for adds, with indication as to whether the packet should be dropped or failed back.\r\n - Duplicate detection for settles and fails, ensuring that at most one response is delivered to the originating link.\r\n\r\nOverview\r\n=======\r\nAll HTLCs are tracked via a `CircuitKey`, which is a tuple of `lnwire.ShortChanID` and its remote HTLC index. The circuit map's primary job is to keep track of the relationships between the `CircuitKey`s of Adds from incoming links and Adds from outgoing `CircuitKeys`. Before an HTLC is forwarded to the next intermediary, the circuit map is always updated with a `Keystone`, which binds an incoming `CircuitKey` to an outgoing `CircuitKey`. After receiving a response for a particular outgoing HTLC, the circuit map is queried using the outgoing `CircuitKey`, to determine which link the packet originated from.\r\n\r\nThe primary methods exposed by the circuit map are:\r\n```golang\r\n        // CommitCircuits attempts to add the given circuit's to the circuit\r\n        // map. The list of circuits is split into three distinct subsequences,\r\n        // corresponding to adds, drops, and fails. Adds should be forwarded to\r\n        // the switch, while fails should be failed back locally within the\r\n        // calling link.\r\n        CommitCircuits(circuit ...*PaymentCircuit) ([]*PaymentCircuit,\r\n        \t[]*PaymentCircuit, []*PaymentCircuit, error)\r\n\r\n        // OpenCircuits preemptively records a batch keystones that will mark\r\n        // currently pending circuits as open. These changes can be rolled back\r\n        // on restart if the outgoing Adds do not make it into a commitment txn.\r\n        OpenCircuits(...Keystone) error\r\n\r\n        // CloseCircuit marks the circuit identified by `inKey` as closing\r\n        // in-memory, which prevents duplicate settles/fails from completing an\r\n        // open circuit twice.\r\n        CloseCircuit(inKey CircuitKey) error\r\n\r\n        // DeleteCircuits removes the incoming circuit key to remove all\r\n        // persistent references to a circuit. Returns a ErrUnknownCircuit if\r\n        // any of the incoming keys are not known.\r\n        DeleteCircuits(inKeys ...CircuitKey) error\r\n\r\n        // TrimOpenCircuits removes a channel's open channels with htlc indexes\r\n        // above `start`.\r\n        TrimOpenCircuits(chanID lnwire.ShortChannelID, start uint64) error\r\n```\r\n\r\nBasic Operation\r\n============\r\nThe general flow of the circuit map is as follows:\r\n 1. Incoming Link: Locks in batch of Adds, and forwards a valid subset of those for which it wasn't the exit hop to the switch.\r\n 1. Switch: Receives a batch of Adds to forward from the incoming link, and uses to `CommitCircuits` to register the incoming Adds with the circuit map. This batch is always expected to be a subset of the Adds locked into a particular link.\r\n1. Outgoing Link: Before signing a new commitment state, batch writes a `Keystone`s of each Add to preemptively mark the circuit as open using `OpenCircuits`.\r\n1. Outgoing Link: Receives a response (Settle or Fail) for an outgoing HTLC, and forwards the packet to the switch.\r\n1. Switch: Lookups the circuit using the outgoing `CircuitKey`, to recover the incoming link from which the Add originated. Then closes the circuit using `CloseCircuit`, which marks (in-memory) that the circuit is closing, and ensures at most one packet for a particular incoming `CircuitKey` is allowed to pass through the switch.\r\n1. Incoming Link: After signing a new commitment state, removes all information about all circuits that received a Settle or Fail from the circuit map, by batch deleting their incoming `CircuitKey`s using `DeleteCircuits`.\r\n\r\nFailure Conditions\r\n=============\r\nIn order to handle failures properly, we must ensure that the we can recover from failures between any of those six steps. Here we describe generally how they are handled:\r\n- 1-2: The incoming link's forwarding package will replay any Adds that have not received a response. This makes the duplicate detection in `CommitCircuits` super critical.\r\n- 2-3: Upon replay of Adds, the switch will detect that the Adds were never assigned keystones, and fail them back.\r\n- 3-4: If a commitment was never signed, the preemptively opening of circuits can be reverted using `TrimOpenCircuits`. This is intended to be done once by the link at startup, and by each link as it is initialized to protect ourselves from inconsistencies stemming from flapping links.\r\n- 4-5: The outgoing link's forwarding package will replay any Settles/Fails. As a caveat, the outgoing link may try to do so repeatedly if it flaps. The at-most-once semantics of `CloseCircuit` prevent duplicates responses from flowing back through.\r\n- 5-6: The `CommitDiff` of each signed commitment records which circuits need to be deleted. After a restart, this is performed during channel resynchronization to make the circuit map consistent with the channel's state.\r\n\r\nNote: This PR does not compile, as it is dependent on a number of other changes to the switch #761, #777, and #775.","created_at":"2018-03-01T09:23:15Z","updated_at":"2018-03-01T09:23:15Z","closed_at":null,"merged_at":null,"merge_commit_sha":null,"assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/791/commits","review_comments_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/791/comments","review_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/791/comments","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/023dbdf5f21c9e78b278a7acecfbfe0204760379","head":{"label":"cfromknecht:circuit-map-persistence","ref":"circuit-map-persistence","sha":"023dbdf5f21c9e78b278a7acecfbfe0204760379","user":{"login":"cfromknecht","id":2013993,"avatar_url":"https://avatars1.githubusercontent.com/u/2013993?v=4","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","html_url":"https://github.com/cfromknecht","followers_url":"https://api.github.com/users/cfromknecht/followers","following_url":"https://api.github.com/users/cfromknecht/following{/other_user}","gists_url":"https://api.github.com/users/cfromknecht/gists{/gist_id}","starred_url":"https://api.github.com/users/cfromknecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfromknecht/subscriptions","organizations_url":"https://api.github.com/users/cfromknecht/orgs","repos_url":"https://api.github.com/users/cfromknecht/repos","events_url":"https://api.github.com/users/cfromknecht/events{/privacy}","received_events_url":"https://api.github.com/users/cfromknecht/received_events","type":"User","site_admin":false},"repo":{"id":98245639,"name":"lnd","full_name":"cfromknecht/lnd","owner":{"login":"cfromknecht","id":2013993,"avatar_url":"https://avatars1.githubusercontent.com/u/2013993?v=4","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","html_url":"https://github.com/cfromknecht","followers_url":"https://api.github.com/users/cfromknecht/followers","following_url":"https://api.github.com/users/cfromknecht/following{/other_user}","gists_url":"https://api.github.com/users/cfromknecht/gists{/gist_id}","starred_url":"https://api.github.com/users/cfromknecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfromknecht/subscriptions","organizations_url":"https://api.github.com/users/cfromknecht/orgs","repos_url":"https://api.github.com/users/cfromknecht/repos","events_url":"https://api.github.com/users/cfromknecht/events{/privacy}","received_events_url":"https://api.github.com/users/cfromknecht/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/cfromknecht/lnd","description":"Lightning Network Daemon ⚡️","fork":true,"url":"https://api.github.com/repos/cfromknecht/lnd","forks_url":"https://api.github.com/repos/cfromknecht/lnd/forks","keys_url":"https://api.github.com/repos/cfromknecht/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/cfromknecht/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/cfromknecht/lnd/teams","hooks_url":"https://api.github.com/repos/cfromknecht/lnd/hooks","issue_events_url":"https://api.github.com/repos/cfromknecht/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/cfromknecht/lnd/events","assignees_url":"https://api.github.com/repos/cfromknecht/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/cfromknecht/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/cfromknecht/lnd/tags","blobs_url":"https://api.github.com/repos/cfromknecht/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/cfromknecht/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/cfromknecht/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/cfromknecht/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/cfromknecht/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/cfromknecht/lnd/languages","stargazers_url":"https://api.github.com/repos/cfromknecht/lnd/stargazers","contributors_url":"https://api.github.com/repos/cfromknecht/lnd/contributors","subscribers_url":"https://api.github.com/repos/cfromknecht/lnd/subscribers","subscription_url":"https://api.github.com/repos/cfromknecht/lnd/subscription","commits_url":"https://api.github.com/repos/cfromknecht/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/cfromknecht/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/cfromknecht/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/cfromknecht/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/cfromknecht/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/cfromknecht/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/cfromknecht/lnd/merges","archive_url":"https://api.github.com/repos/cfromknecht/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/cfromknecht/lnd/downloads","issues_url":"https://api.github.com/repos/cfromknecht/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/cfromknecht/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/cfromknecht/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/cfromknecht/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/cfromknecht/lnd/labels{/name}","releases_url":"https://api.github.com/repos/cfromknecht/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/cfromknecht/lnd/deployments","created_at":"2017-07-25T00:12:12Z","updated_at":"2018-01-21T00:45:08Z","pushed_at":"2018-03-01T08:32:59Z","git_url":"git://github.com/cfromknecht/lnd.git","ssh_url":"git@github.com:cfromknecht/lnd.git","clone_url":"https://github.com/cfromknecht/lnd.git","svn_url":"https://github.com/cfromknecht/lnd","homepage":"","size":12602,"stargazers_count":22,"watchers_count":22,"language":"Go","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":3,"mirror_url":null,"archived":false,"open_issues_count":0,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit"},"forks":3,"open_issues":0,"watchers":22,"default_branch":"master"}},"base":{"label":"lightningnetwork:master","ref":"master","sha":"9479b085e2713cd0f4b38b02504305a95886d35a","user":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"repo":{"id":49765480,"name":"lnd","full_name":"lightningnetwork/lnd","owner":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/lightningnetwork/lnd","description":"Lightning Network Daemon ⚡️","fork":false,"url":"https://api.github.com/repos/lightningnetwork/lnd","forks_url":"https://api.github.com/repos/lightningnetwork/lnd/forks","keys_url":"https://api.github.com/repos/lightningnetwork/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lightningnetwork/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lightningnetwork/lnd/teams","hooks_url":"https://api.github.com/repos/lightningnetwork/lnd/hooks","issue_events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/lightningnetwork/lnd/events","assignees_url":"https://api.github.com/repos/lightningnetwork/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/lightningnetwork/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/lightningnetwork/lnd/tags","blobs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lightningnetwork/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/lightningnetwork/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/lightningnetwork/lnd/languages","stargazers_url":"https://api.github.com/repos/lightningnetwork/lnd/stargazers","contributors_url":"https://api.github.com/repos/lightningnetwork/lnd/contributors","subscribers_url":"https://api.github.com/repos/lightningnetwork/lnd/subscribers","subscription_url":"https://api.github.com/repos/lightningnetwork/lnd/subscription","commits_url":"https://api.github.com/repos/lightningnetwork/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/lightningnetwork/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/lightningnetwork/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/lightningnetwork/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lightningnetwork/lnd/merges","archive_url":"https://api.github.com/repos/lightningnetwork/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lightningnetwork/lnd/downloads","issues_url":"https://api.github.com/repos/lightningnetwork/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/lightningnetwork/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/labels{/name}","releases_url":"https://api.github.com/repos/lightningnetwork/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/lightningnetwork/lnd/deployments","created_at":"2016-01-16T08:19:33Z","updated_at":"2018-03-01T06:38:23Z","pushed_at":"2018-03-01T08:31:26Z","git_url":"git://github.com/lightningnetwork/lnd.git","ssh_url":"git@github.com:lightningnetwork/lnd.git","clone_url":"https://github.com/lightningnetwork/lnd.git","svn_url":"https://github.com/lightningnetwork/lnd","homepage":"","size":11766,"stargazers_count":2054,"watchers_count":2054,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":426,"mirror_url":null,"archived":false,"open_issues_count":124,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit"},"forks":426,"open_issues":124,"watchers":2054,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/791"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/791"},"issue":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/791"},"comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/791/comments"},"review_comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/791/comments"},"review_comment":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/791/commits"},"statuses":{"href":"https://api.github.com/repos/lightningnetwork/lnd/statuses/023dbdf5f21c9e78b278a7acecfbfe0204760379"}},"author_association":"COLLABORATOR","merged":false,"mergeable":null,"rebaseable":null,"mergeable_state":"unknown","merged_by":null,"comments":0,"review_comments":0,"maintainer_can_modify":true,"commits":3,"additions":2288,"deletions":207,"changed_files":3}},"public":true,"created_at":"2018-03-01T09:23:15Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7314337684","type":"WatchEvent","actor":{"id":17304783,"login":"nperalez","display_login":"nperalez","gravatar_id":"","url":"https://api.github.com/users/nperalez","avatar_url":"https://avatars.githubusercontent.com/u/17304783?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"started"},"public":true,"created_at":"2018-03-01T06:38:23Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7314324237","type":"ForkEvent","actor":{"id":2987635,"login":"mikewlange","display_login":"mikewlange","gravatar_id":"","url":"https://api.github.com/users/mikewlange","avatar_url":"https://avatars.githubusercontent.com/u/2987635?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"forkee":{"id":123393121,"name":"lnd","full_name":"mikewlange/lnd","owner":{"login":"mikewlange","id":2987635,"avatar_url":"https://avatars1.githubusercontent.com/u/2987635?v=4","gravatar_id":"","url":"https://api.github.com/users/mikewlange","html_url":"https://github.com/mikewlange","followers_url":"https://api.github.com/users/mikewlange/followers","following_url":"https://api.github.com/users/mikewlange/following{/other_user}","gists_url":"https://api.github.com/users/mikewlange/gists{/gist_id}","starred_url":"https://api.github.com/users/mikewlange/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/mikewlange/subscriptions","organizations_url":"https://api.github.com/users/mikewlange/orgs","repos_url":"https://api.github.com/users/mikewlange/repos","events_url":"https://api.github.com/users/mikewlange/events{/privacy}","received_events_url":"https://api.github.com/users/mikewlange/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/mikewlange/lnd","description":"Lightning Network Daemon ⚡️","fork":true,"url":"https://api.github.com/repos/mikewlange/lnd","forks_url":"https://api.github.com/repos/mikewlange/lnd/forks","keys_url":"https://api.github.com/repos/mikewlange/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/mikewlange/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/mikewlange/lnd/teams","hooks_url":"https://api.github.com/repos/mikewlange/lnd/hooks","issue_events_url":"https://api.github.com/repos/mikewlange/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/mikewlange/lnd/events","assignees_url":"https://api.github.com/repos/mikewlange/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/mikewlange/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/mikewlange/lnd/tags","blobs_url":"https://api.github.com/repos/mikewlange/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/mikewlange/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/mikewlange/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/mikewlange/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/mikewlange/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/mikewlange/lnd/languages","stargazers_url":"https://api.github.com/repos/mikewlange/lnd/stargazers","contributors_url":"https://api.github.com/repos/mikewlange/lnd/contributors","subscribers_url":"https://api.github.com/repos/mikewlange/lnd/subscribers","subscription_url":"https://api.github.com/repos/mikewlange/lnd/subscription","commits_url":"https://api.github.com/repos/mikewlange/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/mikewlange/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/mikewlange/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/mikewlange/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/mikewlange/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/mikewlange/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/mikewlange/lnd/merges","archive_url":"https://api.github.com/repos/mikewlange/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/mikewlange/lnd/downloads","issues_url":"https://api.github.com/repos/mikewlange/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/mikewlange/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/mikewlange/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/mikewlange/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/mikewlange/lnd/labels{/name}","releases_url":"https://api.github.com/repos/mikewlange/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/mikewlange/lnd/deployments","created_at":"2018-03-01T06:33:46Z","updated_at":"2018-03-01T01:48:06Z","pushed_at":"2018-03-01T03:27:14Z","git_url":"git://github.com/mikewlange/lnd.git","ssh_url":"git@github.com:mikewlange/lnd.git","clone_url":"https://github.com/mikewlange/lnd.git","svn_url":"https://github.com/mikewlange/lnd","homepage":"","size":11766,"stargazers_count":0,"watchers_count":0,"language":null,"has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":null,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master","public":true}},"public":true,"created_at":"2018-03-01T06:33:46Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7314211183","type":"PullRequestReviewCommentEvent","actor":{"id":2013993,"login":"cfromknecht","display_login":"cfromknecht","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","avatar_url":"https://avatars.githubusercontent.com/u/2013993?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171453905","pull_request_review_id":100306067,"id":171453905,"diff_hunk":"@@ -410,10 +450,19 @@ func decipherCipherSeed(cipherSeedBytes [EncipheredCipherSeedSize]byte,\n \t\treturn plainSeed, ErrIncorrectVersion\n \t}\n \n-\t// Next, we'll slice off the salt from the pass cipher seed, and then\n-\t// snip off the end of the cipher seed, ignoring the version.\n-\tsalt := cipherSeedBytes[len(cipherSeedBytes)-saltSize:]\n-\tcipherSeed := cipherSeedBytes[1 : len(cipherSeedBytes)-saltSize]\n+\t// Next, we'll slice off the salt from the pass cipher seed, then\n+\t// snip off the end of the cipher seed, ignoring the version, and\n+\t// finally the checksum.\n+\tsalt := cipherSeedBytes[saltOffset : saltOffset+saltSize]\n+\tcipherSeed := cipherSeedBytes[1:saltOffset]\n+\tchecksum := cipherSeedBytes[checkSumOffset:]\n+\n+\t// Before we perform any crypto operations, we'll remote and verify the","path":"aezeed/cipherseed.go","position":460,"original_position":327,"commit_id":"b53872d7b5c382471ad6f638894e54281bbee013","original_commit_id":"b53872d7b5c382471ad6f638894e54281bbee013","user":{"login":"cfromknecht","id":2013993,"avatar_url":"https://avatars1.githubusercontent.com/u/2013993?v=4","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","html_url":"https://github.com/cfromknecht","followers_url":"https://api.github.com/users/cfromknecht/followers","following_url":"https://api.github.com/users/cfromknecht/following{/other_user}","gists_url":"https://api.github.com/users/cfromknecht/gists{/gist_id}","starred_url":"https://api.github.com/users/cfromknecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfromknecht/subscriptions","organizations_url":"https://api.github.com/users/cfromknecht/orgs","repos_url":"https://api.github.com/users/cfromknecht/repos","events_url":"https://api.github.com/users/cfromknecht/events{/privacy}","received_events_url":"https://api.github.com/users/cfromknecht/received_events","type":"User","site_admin":false},"body":"remove* and verify","created_at":"2018-03-01T03:18:16Z","updated_at":"2018-03-01T05:53:52Z","html_url":"https://github.com/lightningnetwork/lnd/pull/773#discussion_r171453905","pull_request_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773","author_association":"COLLABORATOR","_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments/171453905"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/773#discussion_r171453905"},"pull_request":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773"}}},"pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773","id":170910381,"html_url":"https://github.com/lightningnetwork/lnd/pull/773","diff_url":"https://github.com/lightningnetwork/lnd/pull/773.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/773.patch","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/773","number":773,"state":"open","locked":false,"title":"aezeed: add new package implementing the aezeed cipher seed scheme ","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"body":"In this PR, we add a new package implementing the aezeed cipher\r\nseed scheme (based on [`aez`](http://web.cs.ucdavis.edu/~rogaway/aez/)). \r\n\r\nThis is a new scheme developed that aims to overcome the\r\ntwo major short comings of BIP39: a lack of a version, and a lack of a\r\nwallet birthday. A lack a version means that wallets may not\r\nnecessarily know *how* to re-derive addresses during the recovery\r\nprocess. A lack of a birthday means that wallets don’t know how far\r\nback to look in the chain to ensure that they derive *all* the proper\r\nuser addresses. Additionally, BIP39 use a _very_ weak KDF. We use \r\nscrypt with modern parameters (n=32768, r=8, p=1). A set of benchmarks has \r\nbeen added, on my laptop I get about 100ms per attempt):\r\n```\r\n⛰ go test -run=XXX -bench=.\r\n\r\ngoos: darwin\r\ngoarch: amd64\r\npkg: github.com/lightningnetwork/lnd/aezeed\r\nBenchmarkToMnenonic-4     \t      10\t 102287840 ns/op\r\nBenchmarkFromMnenonic-4   \t      10\t 105874973 ns/op\r\nPASS\r\nok  \tgithub.com/lightningnetwork/lnd/aezeed\t3.036s\r\n```\r\n\r\nAside from addressing the shortcomings of BIP 39 a cipher  seed \r\ncan: be upgraded, and have it's password changed, \r\n\r\nSample seed: \r\n```\r\nability dance scatter raw fly dentist bar nominee exhaust wine snap super cost case coconut ticket spread funny grain chimney aspect business quiz ginger\r\n```\r\n\r\n## Plaintext `aezeed` encoding\r\n\r\nThe aezeed scheme addresses these two drawbacks and adds a number of\r\ndesirable features. First, we start with the following plaintext seed:\r\n```\r\n1 byte internal version || 2 byte timestamp || 16 bytes of entropy\r\n```\r\n\r\nThe version field is for wallets to be able to know *how* to re-derive\r\nthe keys of the wallet.\r\n\r\nThe 2 byte timestamp is expressed in Bitcoin Days Genesis, meaning that\r\nthe number of days since the timestamp in Bitcoin’s genesis block. This\r\nallow us to save space, and also avoid using a wasteful level of\r\ngranularity. With the currently, this can express time up until 2188.\r\n\r\nFinally, the entropy is raw entropy that should be used to derive\r\nwallet’s HD root.\r\n\r\n## `aezeed` enciphering/deciperhing\r\n\r\nNext, we’ll take the plaintext seed described above and encipher it to\r\nprocure a final cipher text. We’ll then take this cipher text (the\r\nCipherSeed) and encode that using a 24-word mnemonic. The enciphering\r\nprocess takes a user defined passphrase. If no passphrase is provided,\r\nthen the string “aezeed” will be used.\r\n\r\nTo encipher a plaintext seed (19 bytes) to arrive at an enciphered\r\ncipher seed (33 bytes), we apply the following operations:\r\n   * First we take the external version an append it to our buffer. The\r\nexternal version describes *how* we encipher. For the first version\r\n(version 0), we’ll use scrypt(n=32768, r=8, p=1) and aezeed.\r\n  * Next, we’ll use scrypt (with the version 9 params) to generate a\r\nstrong key for encryption. We’ll generate a 32-byte key using 5 bytes\r\nas a salt. The usage of the salt is meant to make the creation of\r\nrainbow tables infeasible.\r\n  * Next, the enciphering process. We use `aez`, modern AEAD with\r\nnonce-misuse resistance properties. The important trait we exploit is\r\nthat it’s an *arbitrary input length block cipher*. Additionally, it\r\nhas what’s essentially a configurable MAC size. In our scheme we’ll use\r\na value of 8, which acts as a 64-bit checksum. We’ll encrypt with our\r\ngenerated seed, and use an AD of (version || salt).\r\n  * Finally, we’ll encode this 33-byte cipher text using the default\r\nworld list of BIP 39 to produce 24 english words.\r\n\r\n## Properties of the aezeed cipher seed\r\n\r\nThe `aezeed` cipher seed scheme has a few cool properties, notably:\r\n   * The mnemonic itself is a cipher text, meaning leaving it in\r\nplaintext is advisable if the user also set a passphrase. This is in\r\ncontrast to BIP 39 where the mnemonic alone (without a passrphase) may\r\nbe sufficient to steal funds.\r\n   * A cipherseed can be modified to *change* the passphrase. This\r\nmeans that if the users wants a stronger passphrase, they can decipher\r\n(with the old passphrase), then encipher (with a new passphrase).\r\nCompared to BIP 39, where if the users used a passphrase, since the\r\nmapping is one way, they can’t change the passphrase of their existing\r\nHD key chain.\r\n  * A cipher seed can be *upgraded*. Since we have an external version,\r\noffline tools can be provided to decipher using the old params, and\r\nencipher using the new params. In the future if we change ciphers,\r\nchange scrypt, or just the parameters of scrypt, then users can easily\r\nupgrade their seed with an offline tool.\r\n","created_at":"2018-02-23T01:18:04Z","updated_at":"2018-03-01T05:53:52Z","closed_at":null,"merged_at":null,"merge_commit_sha":"dabec78e629ae9e5a6ef73961c02d9e03717a1ee","assignee":{"login":"cfromknecht","id":2013993,"avatar_url":"https://avatars1.githubusercontent.com/u/2013993?v=4","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","html_url":"https://github.com/cfromknecht","followers_url":"https://api.github.com/users/cfromknecht/followers","following_url":"https://api.github.com/users/cfromknecht/following{/other_user}","gists_url":"https://api.github.com/users/cfromknecht/gists{/gist_id}","starred_url":"https://api.github.com/users/cfromknecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfromknecht/subscriptions","organizations_url":"https://api.github.com/users/cfromknecht/orgs","repos_url":"https://api.github.com/users/cfromknecht/repos","events_url":"https://api.github.com/users/cfromknecht/events{/privacy}","received_events_url":"https://api.github.com/users/cfromknecht/received_events","type":"User","site_admin":false},"assignees":[{"login":"cfromknecht","id":2013993,"avatar_url":"https://avatars1.githubusercontent.com/u/2013993?v=4","gravatar_id":"","url":"https://api.github.com/users/cfromknecht","html_url":"https://github.com/cfromknecht","followers_url":"https://api.github.com/users/cfromknecht/followers","following_url":"https://api.github.com/users/cfromknecht/following{/other_user}","gists_url":"https://api.github.com/users/cfromknecht/gists{/gist_id}","starred_url":"https://api.github.com/users/cfromknecht/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cfromknecht/subscriptions","organizations_url":"https://api.github.com/users/cfromknecht/orgs","repos_url":"https://api.github.com/users/cfromknecht/repos","events_url":"https://api.github.com/users/cfromknecht/events{/privacy}","received_events_url":"https://api.github.com/users/cfromknecht/received_events","type":"User","site_admin":false}],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":{"url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5","html_url":"https://github.com/lightningnetwork/lnd/milestone/5","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5/labels","id":2725537,"number":5,"title":"v0.4-beta","description":"","creator":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"open_issues":15,"closed_issues":12,"state":"open","created_at":"2017-08-27T22:11:13Z","updated_at":"2018-02-28T21:13:56Z","due_on":null,"closed_at":null},"commits_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773/commits","review_comments_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773/comments","review_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/773/comments","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/b53872d7b5c382471ad6f638894e54281bbee013","head":{"label":"Roasbeef:aezeed","ref":"aezeed","sha":"b53872d7b5c382471ad6f638894e54281bbee013","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"repo":{"id":112244823,"name":"lnd","full_name":"Roasbeef/lnd","owner":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"private":false,"html_url":"https://github.com/Roasbeef/lnd","description":"Lightning Network Daemon ⚡️","fork":true,"url":"https://api.github.com/repos/Roasbeef/lnd","forks_url":"https://api.github.com/repos/Roasbeef/lnd/forks","keys_url":"https://api.github.com/repos/Roasbeef/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/Roasbeef/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/Roasbeef/lnd/teams","hooks_url":"https://api.github.com/repos/Roasbeef/lnd/hooks","issue_events_url":"https://api.github.com/repos/Roasbeef/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/Roasbeef/lnd/events","assignees_url":"https://api.github.com/repos/Roasbeef/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/Roasbeef/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/Roasbeef/lnd/tags","blobs_url":"https://api.github.com/repos/Roasbeef/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/Roasbeef/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/Roasbeef/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/Roasbeef/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/Roasbeef/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/Roasbeef/lnd/languages","stargazers_url":"https://api.github.com/repos/Roasbeef/lnd/stargazers","contributors_url":"https://api.github.com/repos/Roasbeef/lnd/contributors","subscribers_url":"https://api.github.com/repos/Roasbeef/lnd/subscribers","subscription_url":"https://api.github.com/repos/Roasbeef/lnd/subscription","commits_url":"https://api.github.com/repos/Roasbeef/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/Roasbeef/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/Roasbeef/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/Roasbeef/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/Roasbeef/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/Roasbeef/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/Roasbeef/lnd/merges","archive_url":"https://api.github.com/repos/Roasbeef/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/Roasbeef/lnd/downloads","issues_url":"https://api.github.com/repos/Roasbeef/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/Roasbeef/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/Roasbeef/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/Roasbeef/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/Roasbeef/lnd/labels{/name}","releases_url":"https://api.github.com/repos/Roasbeef/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/Roasbeef/lnd/deployments","created_at":"2017-11-27T20:26:47Z","updated_at":"2017-11-27T20:26:49Z","pushed_at":"2018-03-01T03:14:54Z","git_url":"git://github.com/Roasbeef/lnd.git","ssh_url":"git@github.com:Roasbeef/lnd.git","clone_url":"https://github.com/Roasbeef/lnd.git","svn_url":"https://github.com/Roasbeef/lnd","homepage":"","size":12585,"stargazers_count":0,"watchers_count":0,"language":"Go","has_issues":false,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":0,"mirror_url":null,"archived":false,"open_issues_count":0,"license":null,"forks":0,"open_issues":0,"watchers":0,"default_branch":"master"}},"base":{"label":"lightningnetwork:master","ref":"master","sha":"00ea46d9aeabf670dfb18c9e9c5f10f741ff5192","user":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"repo":{"id":49765480,"name":"lnd","full_name":"lightningnetwork/lnd","owner":{"login":"lightningnetwork","id":13424735,"avatar_url":"https://avatars0.githubusercontent.com/u/13424735?v=4","gravatar_id":"","url":"https://api.github.com/users/lightningnetwork","html_url":"https://github.com/lightningnetwork","followers_url":"https://api.github.com/users/lightningnetwork/followers","following_url":"https://api.github.com/users/lightningnetwork/following{/other_user}","gists_url":"https://api.github.com/users/lightningnetwork/gists{/gist_id}","starred_url":"https://api.github.com/users/lightningnetwork/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/lightningnetwork/subscriptions","organizations_url":"https://api.github.com/users/lightningnetwork/orgs","repos_url":"https://api.github.com/users/lightningnetwork/repos","events_url":"https://api.github.com/users/lightningnetwork/events{/privacy}","received_events_url":"https://api.github.com/users/lightningnetwork/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/lightningnetwork/lnd","description":"Lightning Network Daemon ⚡️","fork":false,"url":"https://api.github.com/repos/lightningnetwork/lnd","forks_url":"https://api.github.com/repos/lightningnetwork/lnd/forks","keys_url":"https://api.github.com/repos/lightningnetwork/lnd/keys{/key_id}","collaborators_url":"https://api.github.com/repos/lightningnetwork/lnd/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/lightningnetwork/lnd/teams","hooks_url":"https://api.github.com/repos/lightningnetwork/lnd/hooks","issue_events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/events{/number}","events_url":"https://api.github.com/repos/lightningnetwork/lnd/events","assignees_url":"https://api.github.com/repos/lightningnetwork/lnd/assignees{/user}","branches_url":"https://api.github.com/repos/lightningnetwork/lnd/branches{/branch}","tags_url":"https://api.github.com/repos/lightningnetwork/lnd/tags","blobs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/lightningnetwork/lnd/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/lightningnetwork/lnd/git/refs{/sha}","trees_url":"https://api.github.com/repos/lightningnetwork/lnd/git/trees{/sha}","statuses_url":"https://api.github.com/repos/lightningnetwork/lnd/statuses/{sha}","languages_url":"https://api.github.com/repos/lightningnetwork/lnd/languages","stargazers_url":"https://api.github.com/repos/lightningnetwork/lnd/stargazers","contributors_url":"https://api.github.com/repos/lightningnetwork/lnd/contributors","subscribers_url":"https://api.github.com/repos/lightningnetwork/lnd/subscribers","subscription_url":"https://api.github.com/repos/lightningnetwork/lnd/subscription","commits_url":"https://api.github.com/repos/lightningnetwork/lnd/commits{/sha}","git_commits_url":"https://api.github.com/repos/lightningnetwork/lnd/git/commits{/sha}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/comments{/number}","issue_comment_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments{/number}","contents_url":"https://api.github.com/repos/lightningnetwork/lnd/contents/{+path}","compare_url":"https://api.github.com/repos/lightningnetwork/lnd/compare/{base}...{head}","merges_url":"https://api.github.com/repos/lightningnetwork/lnd/merges","archive_url":"https://api.github.com/repos/lightningnetwork/lnd/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/lightningnetwork/lnd/downloads","issues_url":"https://api.github.com/repos/lightningnetwork/lnd/issues{/number}","pulls_url":"https://api.github.com/repos/lightningnetwork/lnd/pulls{/number}","milestones_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones{/number}","notifications_url":"https://api.github.com/repos/lightningnetwork/lnd/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/labels{/name}","releases_url":"https://api.github.com/repos/lightningnetwork/lnd/releases{/id}","deployments_url":"https://api.github.com/repos/lightningnetwork/lnd/deployments","created_at":"2016-01-16T08:19:33Z","updated_at":"2018-03-01T01:48:06Z","pushed_at":"2018-03-01T03:27:14Z","git_url":"git://github.com/lightningnetwork/lnd.git","ssh_url":"git@github.com:lightningnetwork/lnd.git","clone_url":"https://github.com/lightningnetwork/lnd.git","svn_url":"https://github.com/lightningnetwork/lnd","homepage":"","size":11766,"stargazers_count":2053,"watchers_count":2053,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":425,"mirror_url":null,"archived":false,"open_issues_count":123,"license":{"key":"mit","name":"MIT License","spdx_id":"MIT","url":"https://api.github.com/licenses/mit"},"forks":425,"open_issues":123,"watchers":2053,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773"},"html":{"href":"https://github.com/lightningnetwork/lnd/pull/773"},"issue":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/773"},"comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/issues/773/comments"},"review_comments":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773/comments"},"review_comment":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/lightningnetwork/lnd/pulls/773/commits"},"statuses":{"href":"https://api.github.com/repos/lightningnetwork/lnd/statuses/b53872d7b5c382471ad6f638894e54281bbee013"}},"author_association":"MEMBER"}},"public":true,"created_at":"2018-03-01T03:18:16Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7314132186","type":"IssueCommentEvent","actor":{"id":8084705,"login":"t4sk","display_login":"t4sk","gravatar_id":"","url":"https://api.github.com/users/t4sk","avatar_url":"https://avatars.githubusercontent.com/u/8084705?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/786","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/786/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/786/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/786/events","html_url":"https://github.com/lightningnetwork/lnd/pull/786","id":300878557,"number":786,"title":"Fix FindRoutes in router test","user":{"login":"t4sk","id":8084705,"avatar_url":"https://avatars2.githubusercontent.com/u/8084705?v=4","gravatar_id":"","url":"https://api.github.com/users/t4sk","html_url":"https://github.com/t4sk","followers_url":"https://api.github.com/users/t4sk/followers","following_url":"https://api.github.com/users/t4sk/following{/other_user}","gists_url":"https://api.github.com/users/t4sk/gists{/gist_id}","starred_url":"https://api.github.com/users/t4sk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/t4sk/subscriptions","organizations_url":"https://api.github.com/users/t4sk/orgs","repos_url":"https://api.github.com/users/t4sk/repos","events_url":"https://api.github.com/users/t4sk/events{/privacy}","received_events_url":"https://api.github.com/users/t4sk/received_events","type":"User","site_admin":false},"labels":[{"id":679335142,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/testing","name":"testing","color":"b60205","default":false}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-02-28T03:28:32Z","updated_at":"2018-03-01T05:23:27Z","closed_at":"2018-03-01T03:25:20Z","author_association":"CONTRIBUTOR","pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/786","html_url":"https://github.com/lightningnetwork/lnd/pull/786","diff_url":"https://github.com/lightningnetwork/lnd/pull/786.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/786.patch"},"body":"In `routing/router_test`  `FindRoutes` is passing `DefaultFinalCLTVDelta` in place\r\nwhere `numPaths` is expected. \r\n\r\nThis PR fixes `router_test` by passing a default `numPaths` to `FindRoutes` so that final cltv delta are correctly passed."},"comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments/369477473","html_url":"https://github.com/lightningnetwork/lnd/pull/786#issuecomment-369477473","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/786","id":369477473,"user":{"login":"t4sk","id":8084705,"avatar_url":"https://avatars2.githubusercontent.com/u/8084705?v=4","gravatar_id":"","url":"https://api.github.com/users/t4sk","html_url":"https://github.com/t4sk","followers_url":"https://api.github.com/users/t4sk/followers","following_url":"https://api.github.com/users/t4sk/following{/other_user}","gists_url":"https://api.github.com/users/t4sk/gists{/gist_id}","starred_url":"https://api.github.com/users/t4sk/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/t4sk/subscriptions","organizations_url":"https://api.github.com/users/t4sk/orgs","repos_url":"https://api.github.com/users/t4sk/repos","events_url":"https://api.github.com/users/t4sk/events{/privacy}","received_events_url":"https://api.github.com/users/t4sk/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T05:23:27Z","updated_at":"2018-03-01T05:23:27Z","author_association":"CONTRIBUTOR","body":"@Roasbeef Thanks!"}},"public":true,"created_at":"2018-03-01T05:23:27Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7313886413","type":"IssueCommentEvent","actor":{"id":11246316,"login":"junderw","display_login":"junderw","gravatar_id":"","url":"https://api.github.com/users/junderw","avatar_url":"https://avatars.githubusercontent.com/u/11246316?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719/events","html_url":"https://github.com/lightningnetwork/lnd/pull/719","id":293774565,"number":719,"title":"lnrpc+walletunlocker: extend wallet creation to allow user generated entropy + entropy restore (BIP 39)","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"labels":[{"id":431221659,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/wallet","name":"wallet","color":"5319e7","default":false}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5","html_url":"https://github.com/lightningnetwork/lnd/milestone/5","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5/labels","id":2725537,"number":5,"title":"v0.4-beta","description":"","creator":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"open_issues":15,"closed_issues":12,"state":"open","created_at":"2017-08-27T22:11:13Z","updated_at":"2018-02-28T21:13:56Z","due_on":null,"closed_at":null},"comments":32,"created_at":"2018-02-02T05:05:41Z","updated_at":"2018-03-01T03:40:59Z","closed_at":null,"author_association":"MEMBER","pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/719","html_url":"https://github.com/lightningnetwork/lnd/pull/719","diff_url":"https://github.com/lightningnetwork/lnd/pull/719.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/719.patch"},"body":"## New Functionality \r\nIn this PR, we extend the initial `lncli create` command to allow the user to specify their own entropy when creating the wallet. This capability means that it'll be possible for a user to restore an _existing_ on-chain wallet given their initial source of entropy. Additionally, the `lncli create` command will now also return a BIP 39 mnemonic generated from lnd's generated entropy in the case that the user opts not to specify their own. \r\n\r\nInternally, when accepting a mnemonic from the user, we'll convert that into the original entropy bytes using BIP 39. From there we'll map that to an HD wallet seed and initialize the internal wallet using that value. If the user doesn't specify a seed, we'll generate our own entropy (always 256-bits), and send the generated entropy over RPC. This final step allows any frontends to `lnd` to display the entropy as 24-word mnemonic for easy backup. \r\n\r\n\r\n## New `lncli create` workflow\r\nWhat follows is an interactive session with this PR that illustrates the ability to create a new wallet, then restore the wallet using the return mnemonic:\r\n```\r\n⛰  lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon create\r\nInput wallet password:\r\nConfirm wallet password:\r\nDo you have an existing 24-word BIP 39 mnemonic you want to use? (Enter y/n): n\r\n\r\n!!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!!\r\n\r\nGenerated mnemonic seed: field soup wing canvas survey borrow story analyst useless clap before cheap giggle middle color visa cabbage shell vessel rent deposit exchange coil sample\r\n\r\n!!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!!\r\n\r\nlnd successfully initialized!\r\n\r\n  rpc-seed ✘ ✭  roasbeef  ...github.com/lightningnetwork/lnd \r\n⛰i  lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon newaddress p2wkh\r\n{\r\n    \"address\": \"sb1qkdqvqruhlgep06qq6ga705pkgn8q9gka8ee6lj\"\r\n}\r\n\r\n<HERE WE CLEAR OUT THE DATA OF LND> \r\n\r\n  rpc-seed ✘ ✭  roasbeef  ...github.com/lightningnetwork/lnd \r\n⛰ lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon create\r\nInput wallet password:\r\nConfirm wallet password:\r\nDo you have an existing 24-word BIP 39 mnemonic you want to use? (Enter y/n): y\r\n\r\nInput your 24-word mnemonic separated by spaces: (we don't echo the seed on the command line)\r\n\r\nlnd successfully initialized!\r\n\r\n  rpc-seed ✘ ✭  roasbeef  ...github.com/lightningnetwork/lnd \r\n⛰ lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon newaddress p2wkh\r\n{\r\n    \"address\": \"sb1qkdqvqruhlgep06qq6ga705pkgn8q9gka8ee6lj\"\r\n}\r\n```\r\n\r\n## Implementation Details \r\n\r\nOne point of discussion is whether to use the user pass phrase when generating the final seed from the mnemonic. As is now, the contents of the wallet database are _encrypted_ with the passphrase. As is this means that one can't access their wallet (before this PR) if they forgot the passphrase. When generating their seed (atm) we'll use the wallet passphrase as input into the KDF. As a result, if the user _forgets_ their wallet passphrase **they won't be able to re-generate the seed**. \r\n\r\nOn one hand, by using the passphrase, this means that for a given mnemonic, any passphrase generates a \"valid\" wallet. On the other hand, if the user forgets their passphrase, then they won't be able to restore the same wallet.  "},"comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments/369464681","html_url":"https://github.com/lightningnetwork/lnd/pull/719#issuecomment-369464681","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719","id":369464681,"user":{"login":"junderw","id":11246316,"avatar_url":"https://avatars1.githubusercontent.com/u/11246316?v=4","gravatar_id":"","url":"https://api.github.com/users/junderw","html_url":"https://github.com/junderw","followers_url":"https://api.github.com/users/junderw/followers","following_url":"https://api.github.com/users/junderw/following{/other_user}","gists_url":"https://api.github.com/users/junderw/gists{/gist_id}","starred_url":"https://api.github.com/users/junderw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junderw/subscriptions","organizations_url":"https://api.github.com/users/junderw/orgs","repos_url":"https://api.github.com/users/junderw/repos","events_url":"https://api.github.com/users/junderw/events{/privacy}","received_events_url":"https://api.github.com/users/junderw/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T03:40:59Z","updated_at":"2018-03-01T03:40:59Z","author_association":"NONE","body":"Hint: Copay got tons of support requests about BIP39 salt pw vs encryption pw...\r\n\r\nIt's a pain.\r\n\r\nseed passwords should only be for the experts using things like Trezor imo."}},"public":true,"created_at":"2018-03-01T03:40:59Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7313874360","type":"IssueCommentEvent","actor":{"id":998190,"login":"Roasbeef","display_login":"Roasbeef","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","avatar_url":"https://avatars.githubusercontent.com/u/998190?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719/events","html_url":"https://github.com/lightningnetwork/lnd/pull/719","id":293774565,"number":719,"title":"lnrpc+walletunlocker: extend wallet creation to allow user generated entropy + entropy restore (BIP 39)","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"labels":[{"id":431221659,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/wallet","name":"wallet","color":"5319e7","default":false}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5","html_url":"https://github.com/lightningnetwork/lnd/milestone/5","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5/labels","id":2725537,"number":5,"title":"v0.4-beta","description":"","creator":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"open_issues":15,"closed_issues":12,"state":"open","created_at":"2017-08-27T22:11:13Z","updated_at":"2018-02-28T21:13:56Z","due_on":null,"closed_at":null},"comments":31,"created_at":"2018-02-02T05:05:41Z","updated_at":"2018-03-01T03:36:21Z","closed_at":null,"author_association":"MEMBER","pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/719","html_url":"https://github.com/lightningnetwork/lnd/pull/719","diff_url":"https://github.com/lightningnetwork/lnd/pull/719.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/719.patch"},"body":"## New Functionality \r\nIn this PR, we extend the initial `lncli create` command to allow the user to specify their own entropy when creating the wallet. This capability means that it'll be possible for a user to restore an _existing_ on-chain wallet given their initial source of entropy. Additionally, the `lncli create` command will now also return a BIP 39 mnemonic generated from lnd's generated entropy in the case that the user opts not to specify their own. \r\n\r\nInternally, when accepting a mnemonic from the user, we'll convert that into the original entropy bytes using BIP 39. From there we'll map that to an HD wallet seed and initialize the internal wallet using that value. If the user doesn't specify a seed, we'll generate our own entropy (always 256-bits), and send the generated entropy over RPC. This final step allows any frontends to `lnd` to display the entropy as 24-word mnemonic for easy backup. \r\n\r\n\r\n## New `lncli create` workflow\r\nWhat follows is an interactive session with this PR that illustrates the ability to create a new wallet, then restore the wallet using the return mnemonic:\r\n```\r\n⛰  lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon create\r\nInput wallet password:\r\nConfirm wallet password:\r\nDo you have an existing 24-word BIP 39 mnemonic you want to use? (Enter y/n): n\r\n\r\n!!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!!\r\n\r\nGenerated mnemonic seed: field soup wing canvas survey borrow story analyst useless clap before cheap giggle middle color visa cabbage shell vessel rent deposit exchange coil sample\r\n\r\n!!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!!\r\n\r\nlnd successfully initialized!\r\n\r\n  rpc-seed ✘ ✭  roasbeef  ...github.com/lightningnetwork/lnd \r\n⛰i  lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon newaddress p2wkh\r\n{\r\n    \"address\": \"sb1qkdqvqruhlgep06qq6ga705pkgn8q9gka8ee6lj\"\r\n}\r\n\r\n<HERE WE CLEAR OUT THE DATA OF LND> \r\n\r\n  rpc-seed ✘ ✭  roasbeef  ...github.com/lightningnetwork/lnd \r\n⛰ lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon create\r\nInput wallet password:\r\nConfirm wallet password:\r\nDo you have an existing 24-word BIP 39 mnemonic you want to use? (Enter y/n): y\r\n\r\nInput your 24-word mnemonic separated by spaces: (we don't echo the seed on the command line)\r\n\r\nlnd successfully initialized!\r\n\r\n  rpc-seed ✘ ✭  roasbeef  ...github.com/lightningnetwork/lnd \r\n⛰ lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon newaddress p2wkh\r\n{\r\n    \"address\": \"sb1qkdqvqruhlgep06qq6ga705pkgn8q9gka8ee6lj\"\r\n}\r\n```\r\n\r\n## Implementation Details \r\n\r\nOne point of discussion is whether to use the user pass phrase when generating the final seed from the mnemonic. As is now, the contents of the wallet database are _encrypted_ with the passphrase. As is this means that one can't access their wallet (before this PR) if they forgot the passphrase. When generating their seed (atm) we'll use the wallet passphrase as input into the KDF. As a result, if the user _forgets_ their wallet passphrase **they won't be able to re-generate the seed**. \r\n\r\nOn one hand, by using the passphrase, this means that for a given mnemonic, any passphrase generates a \"valid\" wallet. On the other hand, if the user forgets their passphrase, then they won't be able to restore the same wallet.  "},"comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments/369464058","html_url":"https://github.com/lightningnetwork/lnd/pull/719#issuecomment-369464058","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719","id":369464058,"user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T03:36:21Z","updated_at":"2018-03-01T03:36:21Z","author_association":"MEMBER","body":"Excellent, thanks for the great feedback! \r\n\r\nYeah there's really two passwords at play: the (optional) password for the seed, and the password used to encrypt all the wallet data on disk. We can't generate the seed if we don't know the first password (or if it exists at all). "}},"public":true,"created_at":"2018-03-01T03:36:21Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7313870876","type":"IssueCommentEvent","actor":{"id":11246316,"login":"junderw","display_login":"junderw","gravatar_id":"","url":"https://api.github.com/users/junderw","avatar_url":"https://avatars.githubusercontent.com/u/11246316?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719/events","html_url":"https://github.com/lightningnetwork/lnd/pull/719","id":293774565,"number":719,"title":"lnrpc+walletunlocker: extend wallet creation to allow user generated entropy + entropy restore (BIP 39)","user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"labels":[{"id":431221659,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/wallet","name":"wallet","color":"5319e7","default":false}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":{"url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5","html_url":"https://github.com/lightningnetwork/lnd/milestone/5","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/milestones/5/labels","id":2725537,"number":5,"title":"v0.4-beta","description":"","creator":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"open_issues":15,"closed_issues":12,"state":"open","created_at":"2017-08-27T22:11:13Z","updated_at":"2018-02-28T21:13:56Z","due_on":null,"closed_at":null},"comments":30,"created_at":"2018-02-02T05:05:41Z","updated_at":"2018-03-01T03:35:03Z","closed_at":null,"author_association":"MEMBER","pull_request":{"url":"https://api.github.com/repos/lightningnetwork/lnd/pulls/719","html_url":"https://github.com/lightningnetwork/lnd/pull/719","diff_url":"https://github.com/lightningnetwork/lnd/pull/719.diff","patch_url":"https://github.com/lightningnetwork/lnd/pull/719.patch"},"body":"## New Functionality \r\nIn this PR, we extend the initial `lncli create` command to allow the user to specify their own entropy when creating the wallet. This capability means that it'll be possible for a user to restore an _existing_ on-chain wallet given their initial source of entropy. Additionally, the `lncli create` command will now also return a BIP 39 mnemonic generated from lnd's generated entropy in the case that the user opts not to specify their own. \r\n\r\nInternally, when accepting a mnemonic from the user, we'll convert that into the original entropy bytes using BIP 39. From there we'll map that to an HD wallet seed and initialize the internal wallet using that value. If the user doesn't specify a seed, we'll generate our own entropy (always 256-bits), and send the generated entropy over RPC. This final step allows any frontends to `lnd` to display the entropy as 24-word mnemonic for easy backup. \r\n\r\n\r\n## New `lncli create` workflow\r\nWhat follows is an interactive session with this PR that illustrates the ability to create a new wallet, then restore the wallet using the return mnemonic:\r\n```\r\n⛰  lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon create\r\nInput wallet password:\r\nConfirm wallet password:\r\nDo you have an existing 24-word BIP 39 mnemonic you want to use? (Enter y/n): n\r\n\r\n!!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!!\r\n\r\nGenerated mnemonic seed: field soup wing canvas survey borrow story analyst useless clap before cheap giggle middle color visa cabbage shell vessel rent deposit exchange coil sample\r\n\r\n!!!YOU MUST WRITE DOWN THIS SEED TO BE ABLE TO RESTORE THE WALLET!!!\r\n\r\nlnd successfully initialized!\r\n\r\n  rpc-seed ✘ ✭  roasbeef  ...github.com/lightningnetwork/lnd \r\n⛰i  lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon newaddress p2wkh\r\n{\r\n    \"address\": \"sb1qkdqvqruhlgep06qq6ga705pkgn8q9gka8ee6lj\"\r\n}\r\n\r\n<HERE WE CLEAR OUT THE DATA OF LND> \r\n\r\n  rpc-seed ✘ ✭  roasbeef  ...github.com/lightningnetwork/lnd \r\n⛰ lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon create\r\nInput wallet password:\r\nConfirm wallet password:\r\nDo you have an existing 24-word BIP 39 mnemonic you want to use? (Enter y/n): y\r\n\r\nInput your 24-word mnemonic separated by spaces: (we don't echo the seed on the command line)\r\n\r\nlnd successfully initialized!\r\n\r\n  rpc-seed ✘ ✭  roasbeef  ...github.com/lightningnetwork/lnd \r\n⛰ lncli --rpcserver=localhost:10017 --macaroonpath=test_lnd/admin.macaroon newaddress p2wkh\r\n{\r\n    \"address\": \"sb1qkdqvqruhlgep06qq6ga705pkgn8q9gka8ee6lj\"\r\n}\r\n```\r\n\r\n## Implementation Details \r\n\r\nOne point of discussion is whether to use the user pass phrase when generating the final seed from the mnemonic. As is now, the contents of the wallet database are _encrypted_ with the passphrase. As is this means that one can't access their wallet (before this PR) if they forgot the passphrase. When generating their seed (atm) we'll use the wallet passphrase as input into the KDF. As a result, if the user _forgets_ their wallet passphrase **they won't be able to re-generate the seed**. \r\n\r\nOn one hand, by using the passphrase, this means that for a given mnemonic, any passphrase generates a \"valid\" wallet. On the other hand, if the user forgets their passphrase, then they won't be able to restore the same wallet.  "},"comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments/369463880","html_url":"https://github.com/lightningnetwork/lnd/pull/719#issuecomment-369463880","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/719","id":369463880,"user":{"login":"junderw","id":11246316,"avatar_url":"https://avatars1.githubusercontent.com/u/11246316?v=4","gravatar_id":"","url":"https://api.github.com/users/junderw","html_url":"https://github.com/junderw","followers_url":"https://api.github.com/users/junderw/followers","following_url":"https://api.github.com/users/junderw/following{/other_user}","gists_url":"https://api.github.com/users/junderw/gists{/gist_id}","starred_url":"https://api.github.com/users/junderw/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/junderw/subscriptions","organizations_url":"https://api.github.com/users/junderw/orgs","repos_url":"https://api.github.com/users/junderw/repos","events_url":"https://api.github.com/users/junderw/events{/privacy}","received_events_url":"https://api.github.com/users/junderw/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T03:35:03Z","updated_at":"2018-03-01T03:35:03Z","author_association":"NONE","body":"sounds good to me.\r\n\r\nBut imo stage one should be just the aezeed, and step 2's ACK response (client response to lnd) should include the encryption password.\r\n\r\nI don't think most wallets would ask a user to think of a password before asking them to write down the seed."}},"public":true,"created_at":"2018-03-01T03:35:03Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7313853288","type":"IssueCommentEvent","actor":{"id":998190,"login":"Roasbeef","display_login":"Roasbeef","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","avatar_url":"https://avatars.githubusercontent.com/u/998190?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/789","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/789/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/789/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/789/events","html_url":"https://github.com/lightningnetwork/lnd/issues/789","id":301159465,"number":789,"title":"Naming mismatch between ListInvoice and DecodePayReq","user":{"login":"stridentbean","id":2092944,"avatar_url":"https://avatars1.githubusercontent.com/u/2092944?v=4","gravatar_id":"","url":"https://api.github.com/users/stridentbean","html_url":"https://github.com/stridentbean","followers_url":"https://api.github.com/users/stridentbean/followers","following_url":"https://api.github.com/users/stridentbean/following{/other_user}","gists_url":"https://api.github.com/users/stridentbean/gists{/gist_id}","starred_url":"https://api.github.com/users/stridentbean/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/stridentbean/subscriptions","organizations_url":"https://api.github.com/users/stridentbean/orgs","repos_url":"https://api.github.com/users/stridentbean/repos","events_url":"https://api.github.com/users/stridentbean/events{/privacy}","received_events_url":"https://api.github.com/users/stridentbean/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":0,"created_at":"2018-02-28T19:51:25Z","updated_at":"2018-03-01T03:28:40Z","closed_at":null,"author_association":"NONE","body":"I noticed ListInvoices has a field creation_date while DecodePayReq has a field timestamp. Unless I'm mistaken, these represent the same thing. \r\n\r\nI'd recommend updating DecodePayReq to list creation_date. It is more detailed than timestamp. \r\n\r\nSteps to Repeat\r\nlncli addinvoice 1\r\nlncli listinvoices\r\nlncli decodePayReq (of the most recent invoice)\r\nObserve the differing field names with matching values. "},"comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments/369463016","html_url":"https://github.com/lightningnetwork/lnd/issues/789#issuecomment-369463016","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/789","id":369463016,"user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T03:28:40Z","updated_at":"2018-03-01T03:28:40Z","author_association":"MEMBER","body":"A payreq is an encoded invoice. The `timestamp` field is used as part of `BOLT11` as we'll use this to compute if it's been expired or not."}},"public":true,"created_at":"2018-03-01T03:28:40Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7313850962","type":"IssuesEvent","actor":{"id":998190,"login":"Roasbeef","display_login":"Roasbeef","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","avatar_url":"https://avatars.githubusercontent.com/u/998190?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/730","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/730/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/730/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/730/events","html_url":"https://github.com/lightningnetwork/lnd/issues/730","id":294195767,"number":730,"title":"Example needed: Using REST API with Macaroons","user":{"login":"Richard87","id":5749715,"avatar_url":"https://avatars0.githubusercontent.com/u/5749715?v=4","gravatar_id":"","url":"https://api.github.com/users/Richard87","html_url":"https://github.com/Richard87","followers_url":"https://api.github.com/users/Richard87/followers","following_url":"https://api.github.com/users/Richard87/following{/other_user}","gists_url":"https://api.github.com/users/Richard87/gists{/gist_id}","starred_url":"https://api.github.com/users/Richard87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Richard87/subscriptions","organizations_url":"https://api.github.com/users/Richard87/orgs","repos_url":"https://api.github.com/users/Richard87/repos","events_url":"https://api.github.com/users/Richard87/events{/privacy}","received_events_url":"https://api.github.com/users/Richard87/received_events","type":"User","site_admin":false},"labels":[{"id":484610526,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/documentation","name":"documentation","color":"bfdadc","default":false},{"id":678416147,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/macaroons","name":"macaroons","color":"b60205","default":false},{"id":312148190,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/question","name":"question","color":"cc317c","default":true}],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":10,"created_at":"2018-02-04T13:06:08Z","updated_at":"2018-03-01T03:27:47Z","closed_at":"2018-03-01T03:27:47Z","author_association":"NONE","body":"How do we use Macaroons with the REST Api?\r\n"}},"public":true,"created_at":"2018-03-01T03:27:47Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7313850544","type":"IssueCommentEvent","actor":{"id":998190,"login":"Roasbeef","display_login":"Roasbeef","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","avatar_url":"https://avatars.githubusercontent.com/u/998190?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/730","repository_url":"https://api.github.com/repos/lightningnetwork/lnd","labels_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/730/labels{/name}","comments_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/730/comments","events_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/730/events","html_url":"https://github.com/lightningnetwork/lnd/issues/730","id":294195767,"number":730,"title":"Example needed: Using REST API with Macaroons","user":{"login":"Richard87","id":5749715,"avatar_url":"https://avatars0.githubusercontent.com/u/5749715?v=4","gravatar_id":"","url":"https://api.github.com/users/Richard87","html_url":"https://github.com/Richard87","followers_url":"https://api.github.com/users/Richard87/followers","following_url":"https://api.github.com/users/Richard87/following{/other_user}","gists_url":"https://api.github.com/users/Richard87/gists{/gist_id}","starred_url":"https://api.github.com/users/Richard87/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Richard87/subscriptions","organizations_url":"https://api.github.com/users/Richard87/orgs","repos_url":"https://api.github.com/users/Richard87/repos","events_url":"https://api.github.com/users/Richard87/events{/privacy}","received_events_url":"https://api.github.com/users/Richard87/received_events","type":"User","site_admin":false},"labels":[{"id":484610526,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/documentation","name":"documentation","color":"bfdadc","default":false},{"id":678416147,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/macaroons","name":"macaroons","color":"b60205","default":false},{"id":312148190,"url":"https://api.github.com/repos/lightningnetwork/lnd/labels/question","name":"question","color":"cc317c","default":true}],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":9,"created_at":"2018-02-04T13:06:08Z","updated_at":"2018-03-01T03:27:36Z","closed_at":null,"author_association":"NONE","body":"How do we use Macaroons with the REST Api?\r\n"},"comment":{"url":"https://api.github.com/repos/lightningnetwork/lnd/issues/comments/369462863","html_url":"https://github.com/lightningnetwork/lnd/issues/730#issuecomment-369462863","issue_url":"https://api.github.com/repos/lightningnetwork/lnd/issues/730","id":369462863,"user":{"login":"Roasbeef","id":998190,"avatar_url":"https://avatars3.githubusercontent.com/u/998190?v=4","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","html_url":"https://github.com/Roasbeef","followers_url":"https://api.github.com/users/Roasbeef/followers","following_url":"https://api.github.com/users/Roasbeef/following{/other_user}","gists_url":"https://api.github.com/users/Roasbeef/gists{/gist_id}","starred_url":"https://api.github.com/users/Roasbeef/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/Roasbeef/subscriptions","organizations_url":"https://api.github.com/users/Roasbeef/orgs","repos_url":"https://api.github.com/users/Roasbeef/repos","events_url":"https://api.github.com/users/Roasbeef/events{/privacy}","received_events_url":"https://api.github.com/users/Roasbeef/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T03:27:36Z","updated_at":"2018-03-01T03:27:36Z","author_association":"MEMBER","body":"Fixed by #785. "}},"public":true,"created_at":"2018-03-01T03:27:37Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}},{"id":"7313849808","type":"PushEvent","actor":{"id":998190,"login":"Roasbeef","display_login":"Roasbeef","gravatar_id":"","url":"https://api.github.com/users/Roasbeef","avatar_url":"https://avatars.githubusercontent.com/u/998190?"},"repo":{"id":49765480,"name":"lightningnetwork/lnd","url":"https://api.github.com/repos/lightningnetwork/lnd"},"payload":{"push_id":2367369124,"size":3,"distinct_size":3,"ref":"refs/heads/master","head":"9479b085e2713cd0f4b38b02504305a95886d35a","before":"55f751fd37959e169931752c6a3597d8d38d1598","commits":[{"sha":"eed0e9ac67e4f226fa8bad438886c80202c50f57","author":{"email":"brenden@diddyinc.com","name":"Brenden Matthews"},"message":"docs: Show macaroon usage with Java GRPC example.","distinct":true,"url":"https://api.github.com/repos/lightningnetwork/lnd/commits/eed0e9ac67e4f226fa8bad438886c80202c50f57"},{"sha":"37aa9759db05c8a0a347778e96da7b8064602bd0","author":{"email":"brenden@diddyinc.com","name":"Brenden Matthews"},"message":"docs: Add details to macaroon usage with GRPC.","distinct":true,"url":"https://api.github.com/repos/lightningnetwork/lnd/commits/37aa9759db05c8a0a347778e96da7b8064602bd0"},{"sha":"9479b085e2713cd0f4b38b02504305a95886d35a","author":{"email":"laolu32@gmail.com","name":"Olaoluwa Osuntokun"},"message":"Merge pull request #785 from brndnmtthws/master\n\nAdd more details on using macaroons with GRPC.","distinct":true,"url":"https://api.github.com/repos/lightningnetwork/lnd/commits/9479b085e2713cd0f4b38b02504305a95886d35a"}]},"public":true,"created_at":"2018-03-01T03:27:20Z","org":{"id":13424735,"login":"lightningnetwork","gravatar_id":"","url":"https://api.github.com/orgs/lightningnetwork","avatar_url":"https://avatars.githubusercontent.com/u/13424735?"}}]