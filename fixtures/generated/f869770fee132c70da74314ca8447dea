[{"id":"7313236431","type":"IssuesEvent","actor":{"id":17432768,"login":"TheChiefMeat","display_login":"TheChiefMeat","gravatar_id":"","url":"https://api.github.com/users/TheChiefMeat","avatar_url":"https://avatars.githubusercontent.com/u/17432768?"},"repo":{"id":12997638,"name":"keybase/kbpgp","url":"https://api.github.com/repos/keybase/kbpgp"},"payload":{"action":"closed","issue":{"url":"https://api.github.com/repos/keybase/kbpgp/issues/170","repository_url":"https://api.github.com/repos/keybase/kbpgp","labels_url":"https://api.github.com/repos/keybase/kbpgp/issues/170/labels{/name}","comments_url":"https://api.github.com/repos/keybase/kbpgp/issues/170/comments","events_url":"https://api.github.com/repos/keybase/kbpgp/issues/170/events","html_url":"https://github.com/keybase/kbpgp/issues/170","id":300079666,"number":170,"title":"Uncaught TypeError: cb is not a function","user":{"login":"TheChiefMeat","id":17432768,"avatar_url":"https://avatars0.githubusercontent.com/u/17432768?v=4","gravatar_id":"","url":"https://api.github.com/users/TheChiefMeat","html_url":"https://github.com/TheChiefMeat","followers_url":"https://api.github.com/users/TheChiefMeat/followers","following_url":"https://api.github.com/users/TheChiefMeat/following{/other_user}","gists_url":"https://api.github.com/users/TheChiefMeat/gists{/gist_id}","starred_url":"https://api.github.com/users/TheChiefMeat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheChiefMeat/subscriptions","organizations_url":"https://api.github.com/users/TheChiefMeat/orgs","repos_url":"https://api.github.com/users/TheChiefMeat/repos","events_url":"https://api.github.com/users/TheChiefMeat/events{/privacy}","received_events_url":"https://api.github.com/users/TheChiefMeat/received_events","type":"User","site_admin":false},"labels":[],"state":"closed","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":5,"created_at":"2018-02-26T00:56:00Z","updated_at":"2018-03-01T00:04:37Z","closed_at":"2018-03-01T00:04:37Z","author_association":"NONE","body":"I'm having some trouble implementing both signing and encryption at the same time (probably due to tiredness). The below code gives the above error but I'm not really sure why, if anyone could help me out that would be great, I'm super rusty with Javascript.\r\n\r\n```\r\n  var signencryptionButton = $(\"#signencryption-button\");\r\n\r\n  signencryptionButton.click(function(){\r\n      var signencryptionPlainText = $(\"#signencryption-plain-text\");\r\n      var signencryptionEncryptedText = $(\"#signencryption-encrypted-text\");\r\n      var signencryptionReceiversPublicKey = $(\"#signencryption-receivers-public-key\");\r\n      var sign2PrivateKey = $(\"#sign2private-Key\");\r\n      var sign2Passphrase = $(\"#sign2-passphrase\");\r\n\r\n      // import receiver's public key\r\n      var receiver = kbpgp.KeyManager.import_from_armored_pgp({\r\n        armored: signencryptionReceiversPublicKey.val()});\r\n\r\n          var currUser = kbpgp.KeyManager.import_from_armored_pgp({\r\n            armored: sign2PrivateKey.val()});\r\n            currUser.unlock_pgp({\r\n              passphrase: sign2Passphrase.val()});\r\n          // encrypt the message\r\n          var params = {\r\n            msg: signencryptionPlainText.val(),\r\n            encrypt_for: receiver,\r\n            sign_with: currUser\r\n          };\r\n\r\n          kbpgp.box(params, function(err, result_string, result_buffer) {\r\n            console.log(err, result_string, result_buffer);\r\n            signencryptionEncryptedText.val(result_string);\r\n          });\r\n      });\r\n```"}},"public":true,"created_at":"2018-03-01T00:04:37Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7313235188","type":"IssueCommentEvent","actor":{"id":17432768,"login":"TheChiefMeat","display_login":"TheChiefMeat","gravatar_id":"","url":"https://api.github.com/users/TheChiefMeat","avatar_url":"https://avatars.githubusercontent.com/u/17432768?"},"repo":{"id":12997638,"name":"keybase/kbpgp","url":"https://api.github.com/repos/keybase/kbpgp"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/keybase/kbpgp/issues/170","repository_url":"https://api.github.com/repos/keybase/kbpgp","labels_url":"https://api.github.com/repos/keybase/kbpgp/issues/170/labels{/name}","comments_url":"https://api.github.com/repos/keybase/kbpgp/issues/170/comments","events_url":"https://api.github.com/repos/keybase/kbpgp/issues/170/events","html_url":"https://github.com/keybase/kbpgp/issues/170","id":300079666,"number":170,"title":"Uncaught TypeError: cb is not a function","user":{"login":"TheChiefMeat","id":17432768,"avatar_url":"https://avatars0.githubusercontent.com/u/17432768?v=4","gravatar_id":"","url":"https://api.github.com/users/TheChiefMeat","html_url":"https://github.com/TheChiefMeat","followers_url":"https://api.github.com/users/TheChiefMeat/followers","following_url":"https://api.github.com/users/TheChiefMeat/following{/other_user}","gists_url":"https://api.github.com/users/TheChiefMeat/gists{/gist_id}","starred_url":"https://api.github.com/users/TheChiefMeat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheChiefMeat/subscriptions","organizations_url":"https://api.github.com/users/TheChiefMeat/orgs","repos_url":"https://api.github.com/users/TheChiefMeat/repos","events_url":"https://api.github.com/users/TheChiefMeat/events{/privacy}","received_events_url":"https://api.github.com/users/TheChiefMeat/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":4,"created_at":"2018-02-26T00:56:00Z","updated_at":"2018-03-01T00:04:16Z","closed_at":null,"author_association":"NONE","body":"I'm having some trouble implementing both signing and encryption at the same time (probably due to tiredness). The below code gives the above error but I'm not really sure why, if anyone could help me out that would be great, I'm super rusty with Javascript.\r\n\r\n```\r\n  var signencryptionButton = $(\"#signencryption-button\");\r\n\r\n  signencryptionButton.click(function(){\r\n      var signencryptionPlainText = $(\"#signencryption-plain-text\");\r\n      var signencryptionEncryptedText = $(\"#signencryption-encrypted-text\");\r\n      var signencryptionReceiversPublicKey = $(\"#signencryption-receivers-public-key\");\r\n      var sign2PrivateKey = $(\"#sign2private-Key\");\r\n      var sign2Passphrase = $(\"#sign2-passphrase\");\r\n\r\n      // import receiver's public key\r\n      var receiver = kbpgp.KeyManager.import_from_armored_pgp({\r\n        armored: signencryptionReceiversPublicKey.val()});\r\n\r\n          var currUser = kbpgp.KeyManager.import_from_armored_pgp({\r\n            armored: sign2PrivateKey.val()});\r\n            currUser.unlock_pgp({\r\n              passphrase: sign2Passphrase.val()});\r\n          // encrypt the message\r\n          var params = {\r\n            msg: signencryptionPlainText.val(),\r\n            encrypt_for: receiver,\r\n            sign_with: currUser\r\n          };\r\n\r\n          kbpgp.box(params, function(err, result_string, result_buffer) {\r\n            console.log(err, result_string, result_buffer);\r\n            signencryptionEncryptedText.val(result_string);\r\n          });\r\n      });\r\n```"},"comment":{"url":"https://api.github.com/repos/keybase/kbpgp/issues/comments/369427217","html_url":"https://github.com/keybase/kbpgp/issues/170#issuecomment-369427217","issue_url":"https://api.github.com/repos/keybase/kbpgp/issues/170","id":369427217,"user":{"login":"TheChiefMeat","id":17432768,"avatar_url":"https://avatars0.githubusercontent.com/u/17432768?v=4","gravatar_id":"","url":"https://api.github.com/users/TheChiefMeat","html_url":"https://github.com/TheChiefMeat","followers_url":"https://api.github.com/users/TheChiefMeat/followers","following_url":"https://api.github.com/users/TheChiefMeat/following{/other_user}","gists_url":"https://api.github.com/users/TheChiefMeat/gists{/gist_id}","starred_url":"https://api.github.com/users/TheChiefMeat/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/TheChiefMeat/subscriptions","organizations_url":"https://api.github.com/users/TheChiefMeat/orgs","repos_url":"https://api.github.com/users/TheChiefMeat/repos","events_url":"https://api.github.com/users/TheChiefMeat/events{/privacy}","received_events_url":"https://api.github.com/users/TheChiefMeat/received_events","type":"User","site_admin":false},"created_at":"2018-03-01T00:04:16Z","updated_at":"2018-03-01T00:04:16Z","author_association":"NONE","body":"I feel a little bit proud saying that despite not knowing any Javascript before a few days ago, I figured it out alone, yay.\r\n```\r\n  // SIGN+Encrypt\r\n  var signencryptButton = $(\"#signencrypt-button\");\r\n\r\n  signencryptButton.click(function() {\r\n      var signencryptPlainText = $(\"#signencrypt-plain-text\");\r\n      var signencryptText = $(\"#signencrypt-text\");\r\n      var signencryptPrivateKey = $(\"#signencrypt-private-key\");\r\n      var signencryptPassphrase = $(\"#signencrypt-passphrase\");\r\n      var signencryptReceiversPublicKey = $(\"#signencrypt-receivers-public-key\");\r\n\r\n      var currUser = kbpgp.KeyManager.import_from_armored_pgp({\r\n          armored: signencryptPrivateKey.val()\r\n      }, function(err, currUser) {\r\n          if (!err) {\r\n              if (currUser.is_pgp_locked()) {\r\n                  currUser.unlock_pgp({\r\n                      passphrase: signencryptPassphrase.val()\r\n                  }, function(err) {\r\n                      if (!err) {\r\n                          console.log(\"Loaded private key with passphrase\");\r\n                      }\r\n                  });\r\n              }\r\n          }\r\n      });\r\n      // import receiver's public key\r\n      var receiver = kbpgp.KeyManager.import_from_armored_pgp({\r\n          armored: signencryptReceiversPublicKey.val()\r\n      }, function(err, receiver) {\r\n          if (!err) {\r\n              console.log(\"receiver's public key is loaded\");\r\n              console.log(receiver);\r\n\r\n              var params = {\r\n                  msg: signencryptPlainText.val(),\r\n                  sign_with: currUser,\r\n                  encrypt_for: receiver\r\n              };\r\n\r\n              kbpgp.box(params, function(err, result_string, result_buffer) {\r\n                  console.log(err, result_string, result_buffer);\r\n                  signencryptText.val(result_string);\r\n              });\r\n          } else {\r\n              console.log(\"Error!\");\r\n          }\r\n      });\r\n  });```"}},"public":true,"created_at":"2018-03-01T00:04:16Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7313207941","type":"PullRequestEvent","actor":{"id":8516691,"login":"strib","display_login":"strib","gravatar_id":"","url":"https://api.github.com/users/strib","avatar_url":"https://avatars.githubusercontent.com/u/8516691?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"action":"opened","number":10737,"pull_request":{"url":"https://api.github.com/repos/keybase/client/pulls/10737","id":172108055,"html_url":"https://github.com/keybase/client/pull/10737","diff_url":"https://github.com/keybase/client/pull/10737.diff","patch_url":"https://github.com/keybase/client/pull/10737.patch","issue_url":"https://api.github.com/repos/keybase/client/issues/10737","number":10737,"state":"open","locked":false,"title":"simplefs: use sort.Sort to fix hang on keybase/public/songgao","user":{"login":"strib","id":8516691,"avatar_url":"https://avatars0.githubusercontent.com/u/8516691?v=4","gravatar_id":"","url":"https://api.github.com/users/strib","html_url":"https://github.com/strib","followers_url":"https://api.github.com/users/strib/followers","following_url":"https://api.github.com/users/strib/following{/other_user}","gists_url":"https://api.github.com/users/strib/gists{/gist_id}","starred_url":"https://api.github.com/users/strib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/strib/subscriptions","organizations_url":"https://api.github.com/users/strib/orgs","repos_url":"https://api.github.com/users/strib/repos","events_url":"https://api.github.com/users/strib/events{/privacy}","received_events_url":"https://api.github.com/users/strib/received_events","type":"User","site_admin":false},"body":"And add some tests.\r\n\r\nAlso address the edge case when `strings.ToLower()` can change the string length.\r\n\r\nIssue: KBFS-2801","created_at":"2018-02-28T23:56:04Z","updated_at":"2018-02-28T23:56:04Z","closed_at":null,"merged_at":null,"merge_commit_sha":null,"assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/keybase/client/pulls/10737/commits","review_comments_url":"https://api.github.com/repos/keybase/client/pulls/10737/comments","review_comment_url":"https://api.github.com/repos/keybase/client/pulls/comments{/number}","comments_url":"https://api.github.com/repos/keybase/client/issues/10737/comments","statuses_url":"https://api.github.com/repos/keybase/client/statuses/b8b9ac6bcfd0501bfdc2f859a62ae0c50ba470e8","head":{"label":"keybase:strib/KBFS-2801-simplefs-sorting","ref":"strib/KBFS-2801-simplefs-sorting","sha":"b8b9ac6bcfd0501bfdc2f859a62ae0c50ba470e8","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T21:41:21Z","pushed_at":"2018-02-28T23:55:04Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223102,"stargazers_count":3297,"watchers_count":3297,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1896,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1896,"watchers":3297,"default_branch":"master"}},"base":{"label":"keybase:master","ref":"master","sha":"9613c18a266088c2e3af95f7529090ab71d4c432","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T21:41:21Z","pushed_at":"2018-02-28T23:55:04Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223102,"stargazers_count":3297,"watchers_count":3297,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1896,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1896,"watchers":3297,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/keybase/client/pulls/10737"},"html":{"href":"https://github.com/keybase/client/pull/10737"},"issue":{"href":"https://api.github.com/repos/keybase/client/issues/10737"},"comments":{"href":"https://api.github.com/repos/keybase/client/issues/10737/comments"},"review_comments":{"href":"https://api.github.com/repos/keybase/client/pulls/10737/comments"},"review_comment":{"href":"https://api.github.com/repos/keybase/client/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/keybase/client/pulls/10737/commits"},"statuses":{"href":"https://api.github.com/repos/keybase/client/statuses/b8b9ac6bcfd0501bfdc2f859a62ae0c50ba470e8"}},"author_association":"CONTRIBUTOR","merged":false,"mergeable":null,"rebaseable":null,"mergeable_state":"unknown","merged_by":null,"comments":0,"review_comments":0,"maintainer_can_modify":false,"commits":2,"additions":88,"deletions":49,"changed_files":2}},"public":true,"created_at":"2018-02-28T23:56:04Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7313204627","type":"PushEvent","actor":{"id":8516691,"login":"strib","display_login":"strib","gravatar_id":"","url":"https://api.github.com/users/strib","avatar_url":"https://avatars.githubusercontent.com/u/8516691?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"push_id":2367025375,"size":1,"distinct_size":1,"ref":"refs/heads/strib/KBFS-2801-simplefs-sorting","head":"b8b9ac6bcfd0501bfdc2f859a62ae0c50ba470e8","before":"33ee1fb677071eeb755b59e2e1efb197234062e0","commits":[{"sha":"b8b9ac6bcfd0501bfdc2f859a62ae0c50ba470e8","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"simplefs: address bug where ToLower can change string size\n\nSuggested by akalin-keybase.\n\nIssue: KBFS-2801","distinct":true,"url":"https://api.github.com/repos/keybase/client/commits/b8b9ac6bcfd0501bfdc2f859a62ae0c50ba470e8"}]},"public":true,"created_at":"2018-02-28T23:55:05Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7313174430","type":"PushEvent","actor":{"id":8516691,"login":"strib","display_login":"strib","gravatar_id":"","url":"https://api.github.com/users/strib","avatar_url":"https://avatars.githubusercontent.com/u/8516691?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"push_id":2367010217,"size":1,"distinct_size":1,"ref":"refs/heads/strib/KBFS-2801-simplefs-sorting","head":"33ee1fb677071eeb755b59e2e1efb197234062e0","before":"ceccdd37b6ba2255d8a3c15230fd9e0faf3d267b","commits":[{"sha":"33ee1fb677071eeb755b59e2e1efb197234062e0","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"simplefs: use sort.Sort to fix hang on keybase/public/songgao\n\nAnd add some tests.\n\nIssue: KBFS-2801","distinct":true,"url":"https://api.github.com/repos/keybase/client/commits/33ee1fb677071eeb755b59e2e1efb197234062e0"}]},"public":true,"created_at":"2018-02-28T23:46:34Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7313168259","type":"CreateEvent","actor":{"id":8516691,"login":"strib","display_login":"strib","gravatar_id":"","url":"https://api.github.com/users/strib","avatar_url":"https://avatars.githubusercontent.com/u/8516691?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"ref":"strib/KBFS-2801-simplefs-sorting","ref_type":"branch","master_branch":"master","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","pusher_type":"user"},"public":true,"created_at":"2018-02-28T23:44:42Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312978010","type":"PullRequestReviewCommentEvent","actor":{"id":8516691,"login":"strib","display_login":"strib","gravatar_id":"","url":"https://api.github.com/users/strib","avatar_url":"https://avatars.githubusercontent.com/u/8516691?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/keybase/client/pulls/comments/171412769","pull_request_review_id":100261543,"id":171412769,"diff_hunk":"@@ -127,27 +136,61 @@ func (v *CmdConfigInfo) ParseArgv(ctx *cli.Context) error {\n }\n \n func (v *CmdConfigGet) Run() error {\n-\tcli, err := GetConfigClient(v.G())\n-\tif err != nil {\n-\t\treturn err\n-\t}\n-\tvar val keybase1.ConfigValue\n-\tval, err = cli.GetValue(context.TODO(), v.Path)\n-\tif err != nil {\n-\t\treturn err\n-\t}\n \tdui := v.G().UI.GetDumbOutputUI()\n-\tswitch {\n-\tcase val.IsNull:\n-\t\tdui.Printf(\"null\\n\")\n-\tcase val.I != nil:\n-\t\tdui.Printf(\"%d\\n\", *val.I)\n-\tcase val.S != nil:\n-\t\tdui.Printf(\"%q\\n\", *val.S)\n-\tcase val.B != nil:\n-\t\tdui.Printf(\"%t\\n\", *val.B)\n-\tcase val.O != nil:\n-\t\tdui.Printf(\"%s\\n\", *val.O)\n+\tif v.Direct {","path":"go/client/cmd_config.go","position":null,"original_position":57,"commit_id":"d4567e2e678301e4fd95d44a5fa00541554e08ab","original_commit_id":"4b3d51122c7209ce0d6b3f10f5d0cebd54b8a02b","user":{"login":"strib","id":8516691,"avatar_url":"https://avatars0.githubusercontent.com/u/8516691?v=4","gravatar_id":"","url":"https://api.github.com/users/strib","html_url":"https://github.com/strib","followers_url":"https://api.github.com/users/strib/followers","following_url":"https://api.github.com/users/strib/following{/other_user}","gists_url":"https://api.github.com/users/strib/gists{/gist_id}","starred_url":"https://api.github.com/users/strib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/strib/subscriptions","organizations_url":"https://api.github.com/users/strib/orgs","repos_url":"https://api.github.com/users/strib/repos","events_url":"https://api.github.com/users/strib/events{/privacy}","received_events_url":"https://api.github.com/users/strib/received_events","type":"User","site_admin":false},"body":"Done, thanks!","created_at":"2018-02-28T22:53:34Z","updated_at":"2018-02-28T22:53:34Z","html_url":"https://github.com/keybase/client/pull/10724#discussion_r171412769","pull_request_url":"https://api.github.com/repos/keybase/client/pulls/10724","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/keybase/client/pulls/comments/171412769"},"html":{"href":"https://github.com/keybase/client/pull/10724#discussion_r171412769"},"pull_request":{"href":"https://api.github.com/repos/keybase/client/pulls/10724"}},"in_reply_to_id":171398034},"pull_request":{"url":"https://api.github.com/repos/keybase/client/pulls/10724","id":171863574,"html_url":"https://github.com/keybase/client/pull/10724","diff_url":"https://github.com/keybase/client/pull/10724.diff","patch_url":"https://github.com/keybase/client/pull/10724.patch","issue_url":"https://api.github.com/repos/keybase/client/issues/10724","number":10724,"state":"open","locked":false,"title":"packaging: allow a global config.json file that can turn off the root redirector","user":{"login":"strib","id":8516691,"avatar_url":"https://avatars0.githubusercontent.com/u/8516691?v=4","gravatar_id":"","url":"https://api.github.com/users/strib","html_url":"https://github.com/strib","followers_url":"https://api.github.com/users/strib/followers","following_url":"https://api.github.com/users/strib/following{/other_user}","gists_url":"https://api.github.com/users/strib/gists{/gist_id}","starred_url":"https://api.github.com/users/strib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/strib/subscriptions","organizations_url":"https://api.github.com/users/strib/orgs","repos_url":"https://api.github.com/users/strib/repos","events_url":"https://api.github.com/users/strib/events{/privacy}","received_events_url":"https://api.github.com/users/strib/received_events","type":"User","site_admin":false},"body":"Once we turn on the root redirector, we'll probably face some detractors who don't like us using a mountpoint in /.  I think it makes sense to give them a way to turn it off if they don't want it.\r\n\r\nSince the root redirector runs as root, we can't just use a config value in the normal user-based config.json, since there might be multiple users on the machine all using keybase.  So the idea here is to allow the user to optionally create a file at `/etc/keybase/config.json` as root, and populate it thusly:\r\n\r\n```json\r\n{\r\n  \"disable-root-redirector\": true\r\n}\r\n```\r\n\r\nThen, we'll post instructions in the docs on how to stop the root redirector and delete `/keybase`, and when things get restarted, we won't try to start it up again.\r\n\r\nTo make that happen, this PR:\r\n* Adds new flags to `keybase config get` for:\r\n  * \"d, direct\": read a value directly from the config file, rather than relying on the Keybase service (and without launching a service, if one isn't already running).\r\n  * \"b, bare\": read a string from the config file without putting quotes around it.  (Not really needed for this PR, but helpful to avoid some sed-hacking in the scripts.)\r\n* Check the root config file in `run_keybase` and the Linux post-installer, and not starting the redirector if needed.\r\n* Check the root config file in OSX before starting the redirector.\r\n\r\ncc: @maxtaco for the `keybase config get` changes.\r\n\r\nIssue: KBFS-2798i","created_at":"2018-02-28T06:02:44Z","updated_at":"2018-02-28T22:53:34Z","closed_at":null,"merged_at":null,"merge_commit_sha":"9e94db03e7fd04f4526c0defeebe1589a661dcee","assignee":null,"assignees":[],"requested_reviewers":[{"login":"jzila","id":59594,"avatar_url":"https://avatars1.githubusercontent.com/u/59594?v=4","gravatar_id":"","url":"https://api.github.com/users/jzila","html_url":"https://github.com/jzila","followers_url":"https://api.github.com/users/jzila/followers","following_url":"https://api.github.com/users/jzila/following{/other_user}","gists_url":"https://api.github.com/users/jzila/gists{/gist_id}","starred_url":"https://api.github.com/users/jzila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzila/subscriptions","organizations_url":"https://api.github.com/users/jzila/orgs","repos_url":"https://api.github.com/users/jzila/repos","events_url":"https://api.github.com/users/jzila/events{/privacy}","received_events_url":"https://api.github.com/users/jzila/received_events","type":"User","site_admin":false},{"login":"songgao","id":255797,"avatar_url":"https://avatars3.githubusercontent.com/u/255797?v=4","gravatar_id":"","url":"https://api.github.com/users/songgao","html_url":"https://github.com/songgao","followers_url":"https://api.github.com/users/songgao/followers","following_url":"https://api.github.com/users/songgao/following{/other_user}","gists_url":"https://api.github.com/users/songgao/gists{/gist_id}","starred_url":"https://api.github.com/users/songgao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songgao/subscriptions","organizations_url":"https://api.github.com/users/songgao/orgs","repos_url":"https://api.github.com/users/songgao/repos","events_url":"https://api.github.com/users/songgao/events{/privacy}","received_events_url":"https://api.github.com/users/songgao/received_events","type":"User","site_admin":false},{"login":"oconnor663","id":860932,"avatar_url":"https://avatars0.githubusercontent.com/u/860932?v=4","gravatar_id":"","url":"https://api.github.com/users/oconnor663","html_url":"https://github.com/oconnor663","followers_url":"https://api.github.com/users/oconnor663/followers","following_url":"https://api.github.com/users/oconnor663/following{/other_user}","gists_url":"https://api.github.com/users/oconnor663/gists{/gist_id}","starred_url":"https://api.github.com/users/oconnor663/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oconnor663/subscriptions","organizations_url":"https://api.github.com/users/oconnor663/orgs","repos_url":"https://api.github.com/users/oconnor663/repos","events_url":"https://api.github.com/users/oconnor663/events{/privacy}","received_events_url":"https://api.github.com/users/oconnor663/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/keybase/client/pulls/10724/commits","review_comments_url":"https://api.github.com/repos/keybase/client/pulls/10724/comments","review_comment_url":"https://api.github.com/repos/keybase/client/pulls/comments{/number}","comments_url":"https://api.github.com/repos/keybase/client/issues/10724/comments","statuses_url":"https://api.github.com/repos/keybase/client/statuses/d4567e2e678301e4fd95d44a5fa00541554e08ab","head":{"label":"keybase:strib/KBFS-2798-turn-off-root-redirector","ref":"strib/KBFS-2798-turn-off-root-redirector","sha":"d4567e2e678301e4fd95d44a5fa00541554e08ab","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T21:41:21Z","pushed_at":"2018-02-28T22:53:27Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223099,"stargazers_count":3297,"watchers_count":3297,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1895,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1895,"watchers":3297,"default_branch":"master"}},"base":{"label":"keybase:strib/KBFS-2782-root-redirector","ref":"strib/KBFS-2782-root-redirector","sha":"97497086f86cef4351eb6c97eb997e6500fc58e7","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T21:41:21Z","pushed_at":"2018-02-28T22:53:27Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223099,"stargazers_count":3297,"watchers_count":3297,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1895,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1895,"watchers":3297,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/keybase/client/pulls/10724"},"html":{"href":"https://github.com/keybase/client/pull/10724"},"issue":{"href":"https://api.github.com/repos/keybase/client/issues/10724"},"comments":{"href":"https://api.github.com/repos/keybase/client/issues/10724/comments"},"review_comments":{"href":"https://api.github.com/repos/keybase/client/pulls/10724/comments"},"review_comment":{"href":"https://api.github.com/repos/keybase/client/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/keybase/client/pulls/10724/commits"},"statuses":{"href":"https://api.github.com/repos/keybase/client/statuses/d4567e2e678301e4fd95d44a5fa00541554e08ab"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-02-28T22:53:34Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312977602","type":"PushEvent","actor":{"id":8516691,"login":"strib","display_login":"strib","gravatar_id":"","url":"https://api.github.com/users/strib","avatar_url":"https://avatars.githubusercontent.com/u/8516691?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"push_id":2366904140,"size":1,"distinct_size":1,"ref":"refs/heads/strib/KBFS-2798-turn-off-root-redirector","head":"d4567e2e678301e4fd95d44a5fa00541554e08ab","before":"4b3d51122c7209ce0d6b3f10f5d0cebd54b8a02b","commits":[{"sha":"d4567e2e678301e4fd95d44a5fa00541554e08ab","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"cmd_config: split different get modes into different functions\n\nSuggested by maxtaco.\n\nIssue: 10724","distinct":true,"url":"https://api.github.com/repos/keybase/client/commits/d4567e2e678301e4fd95d44a5fa00541554e08ab"}]},"public":true,"created_at":"2018-02-28T22:53:28Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312913424","type":"PushEvent","actor":{"id":2113222,"login":"jinyangli","display_login":"jinyangli","gravatar_id":"","url":"https://api.github.com/users/jinyangli","avatar_url":"https://avatars.githubusercontent.com/u/2113222?"},"repo":{"id":59787605,"name":"keybase/kbfs","url":"https://api.github.com/repos/keybase/kbfs"},"payload":{"push_id":2366870535,"size":248,"distinct_size":2,"ref":"refs/heads/jy/kbfs-throttle-error","head":"14a65562ffdcb61edc74b2f2011d75602ec6207f","before":"6f911d8caf95b45e709afd77aff928049ff52253","commits":[{"sha":"8e96933025f70a19dfe9e11c82493937b32812df","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"mdserver: respond correctly when the server supports iteams\n\nI forgot that mdserver returned an error, instead of just a null ID,\nin that case.","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/8e96933025f70a19dfe9e11c82493937b32812df"},{"sha":"14ea3fc273d63340023a591b732ea81c78f52e4e","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"journal_md_ops: handle null tlf ID","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/14ea3fc273d63340023a591b732ea81c78f52e4e"},{"sha":"d87abf80f16c531163c7f049586331b3ec9192d6","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"keybase_service_base: pass tlf type to iteam creation\n\nOops.","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/d87abf80f16c531163c7f049586331b3ec9192d6"},{"sha":"eb46c046feca6e6bdaea0a4c697c7e7ae55c3ee5","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"kbfsfuse: update the md version for the startup script\n\nUsed in docker tests.","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/eb46c046feca6e6bdaea0a4c697c7e7ae55c3ee5"},{"sha":"578a055a53626ff9c82b1ec9f05a737e8006baff","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"kbfsmd: return version error if incorrectly asked to make iteam MD\n\nIf the mdserver turns on support for iteams, but we are running\nwithout that support turned on yet (i.e., in prod mode), we should\nreturn a NewMetadataVersionError instead of a generic error, so that\nthe user will get a popup about needing to upgrade instead of just a\nplain EIO.\n\nIssue: KBFS-2621","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/578a055a53626ff9c82b1ec9f05a737e8006baff"},{"sha":"65970730b1bc3f910659e71e84ccdc29db6def6c","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"folder_branch_ops: enable journal when setting first TLF head\n\nOnce iteams are enabled and TLF IDs are stored in the team's sigchain,\n`KBFSOpsStandard` will be able to create a `folderBranchOps` without\never passing the TLF's handle through `journalMDOps`.  This is a\nproblem, because the handle is required to enable a journal.  Without\nthis, the journal won't get created until the first MD put with a\nrevision > 1, which is too late because that will happen when the TLF\nis locally dirty, and we can't enable journals then.\n\nSo instead, enable the journal (if needed) the first time a head is\nset inside the FBO.\n\nIssue: KBFS-2621","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/65970730b1bc3f910659e71e84ccdc29db6def6c"},{"sha":"f29d12268c408b2806b402a488c7a859034d5660","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"vendor: update keybase1 to get new resolve implicit team RPC\n\nlibkb comes along for the ride.\n\nIssue: KBFS-2621","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/f29d12268c408b2806b402a488c7a859034d5660"},{"sha":"6169704a5bd721385eb14caf682874e06ec6515b","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"libkbfs: add ResolveImplicitTeamByID calls\n\nIssue: KBFS-2621","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/6169704a5bd721385eb14caf682874e06ec6515b"},{"sha":"9d87acc18c73f4ab569d6590a05941abc938c8f9","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"tlf_handle_resolve: use ResolveImplicitTeamByID\n\nFor when we only know a team ID and need to check whether it's an\nimplicit team or not.\n\nIssue: KBFS-2621","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/9d87acc18c73f4ab569d6590a05941abc938c8f9"},{"sha":"2d1fbca79195558b2ecc6c727da2d7df56e2b855","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"folder_branch_ops: resolve implicit team names on changes\n\nIssue: KBFS-2621","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/2d1fbca79195558b2ecc6c727da2d7df56e2b855"},{"sha":"b1ef6e1dd547124d7900e13877c1162ff123e1ae","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"init: turn on mdv4 by default\n\nSo it will start working once the mdserver turns it on.\n\nIssue: KBFS-2621","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/b1ef6e1dd547124d7900e13877c1162ff123e1ae"},{"sha":"78b48c02e963e65e5bd22fdbef217a706852390f","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"keybase_daemon_local: turn off support for iteams in Resolve()\n\nIssue: KBFS-2621","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/78b48c02e963e65e5bd22fdbef217a706852390f"},{"sha":"c49faad5e7401220a38f3dd4d22a27680b8a9427","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"Revert \"init: turn on mdv4 by default\"\n\nThis reverts commit 5bdb59102a7c60fee0fa0b16e5dca660efd3d97a.","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/c49faad5e7401220a38f3dd4d22a27680b8a9427"},{"sha":"00ab57b620f392e32d27f21375f51304d58b742e","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"keybase_daemon_local: clarify iteam resolve in comment\n\nSuggested by jzila.\n\nIssue: #1386","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/00ab57b620f392e32d27f21375f51304d58b742e"},{"sha":"bb67b8b570c3ced7295ef095a3087b167481f021","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"init: update KBFS issue on iteam TODO\n\nIssue: KBFS-2621","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/bb67b8b570c3ced7295ef095a3087b167481f021"},{"sha":"bcb40c4fbc8c2071ad4af447fd84b0f961e97e99","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"tlf_handle_resolve: add check for resolved implicit team ID\n\nSuggested by songgao.\n\nIssue: #1386","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/bcb40c4fbc8c2071ad4af447fd84b0f961e97e99"},{"sha":"7a2a04ebc371fe4925dec26c7fc695e8a661153f","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"kbfsgit: use handle type/name to check if tlf is managed by app\n\nPreviously we were using the number of users in the handle, which\nbreaks for implicit teams.  So instead use the type, and for private\nTLFs, use the full name and see if multiple users are listed.","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/7a2a04ebc371fe4925dec26c7fc695e8a661153f"},{"sha":"c039d38f11f5f730ff766bf292db3d67bd78cb08","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"kbpki_client: handle errors during writer checks for public iteams\n\nThe service returns a `libkb.NotFoundError` when trying to load a team\nif you're not a member of that team.  We don't want that error to\npropagate up to the rest of KBFS, since we might be checking\nwritership in order to set permissions on a file in a public TLF, for\nexample.  So ignore those errors in the public iteam case, and avoid\ntrying to load the team at all if we're not logged in.","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/c039d38f11f5f730ff766bf292db3d67bd78cb08"},{"sha":"26e7daf2671b534f001297524cccdaaa5daeecc3","author":{"email":"song@gao.io","name":"Song Gao"},"message":"Keybase Pages prototype","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/26e7daf2671b534f001297524cccdaaa5daeecc3"},{"sha":"25de97b73249f40aea9ca37aa110e1e90d13122c","author":{"email":"song@gao.io","name":"Song Gao"},"message":"review feedback from strib","distinct":false,"url":"https://api.github.com/repos/keybase/kbfs/commits/25de97b73249f40aea9ca37aa110e1e90d13122c"}]},"public":true,"created_at":"2018-02-28T22:38:32Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312767621","type":"PullRequestEvent","actor":{"id":21217,"login":"cjb","display_login":"cjb","gravatar_id":"","url":"https://api.github.com/users/cjb","avatar_url":"https://avatars.githubusercontent.com/u/21217?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"action":"opened","number":10736,"pull_request":{"url":"https://api.github.com/repos/keybase/client/pulls/10736","id":172086840,"html_url":"https://github.com/keybase/client/pull/10736","diff_url":"https://github.com/keybase/client/pull/10736.diff","patch_url":"https://github.com/keybase/client/pull/10736.patch","issue_url":"https://api.github.com/repos/keybase/client/issues/10736","number":10736,"state":"open","locked":false,"title":"Show a Chat icon on team page member rows, desktop and mobile","user":{"login":"cjb","id":21217,"avatar_url":"https://avatars2.githubusercontent.com/u/21217?v=4","gravatar_id":"","url":"https://api.github.com/users/cjb","html_url":"https://github.com/cjb","followers_url":"https://api.github.com/users/cjb/followers","following_url":"https://api.github.com/users/cjb/following{/other_user}","gists_url":"https://api.github.com/users/cjb/gists{/gist_id}","starred_url":"https://api.github.com/users/cjb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/cjb/subscriptions","organizations_url":"https://api.github.com/users/cjb/orgs","repos_url":"https://api.github.com/users/cjb/repos","events_url":"https://api.github.com/users/cjb/events{/privacy}","received_events_url":"https://api.github.com/users/cjb/received_events","type":"User","site_admin":false},"body":"@keybase/react-hackers ","created_at":"2018-02-28T22:06:44Z","updated_at":"2018-02-28T22:06:44Z","closed_at":null,"merged_at":null,"merge_commit_sha":null,"assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/keybase/client/pulls/10736/commits","review_comments_url":"https://api.github.com/repos/keybase/client/pulls/10736/comments","review_comment_url":"https://api.github.com/repos/keybase/client/pulls/comments{/number}","comments_url":"https://api.github.com/repos/keybase/client/issues/10736/comments","statuses_url":"https://api.github.com/repos/keybase/client/statuses/7aac0e5ac18cdfa70a191e329105ffe3327d2bb9","head":{"label":"keybase:cjb/DESKTOP-6170-chat-from-team-page","ref":"cjb/DESKTOP-6170-chat-from-team-page","sha":"7aac0e5ac18cdfa70a191e329105ffe3327d2bb9","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T21:41:21Z","pushed_at":"2018-02-28T22:05:58Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223099,"stargazers_count":3297,"watchers_count":3297,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1895,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1895,"watchers":3297,"default_branch":"master"}},"base":{"label":"keybase:master","ref":"master","sha":"9613c18a266088c2e3af95f7529090ab71d4c432","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T21:41:21Z","pushed_at":"2018-02-28T22:05:58Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223099,"stargazers_count":3297,"watchers_count":3297,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1895,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1895,"watchers":3297,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/keybase/client/pulls/10736"},"html":{"href":"https://github.com/keybase/client/pull/10736"},"issue":{"href":"https://api.github.com/repos/keybase/client/issues/10736"},"comments":{"href":"https://api.github.com/repos/keybase/client/issues/10736/comments"},"review_comments":{"href":"https://api.github.com/repos/keybase/client/pulls/10736/comments"},"review_comment":{"href":"https://api.github.com/repos/keybase/client/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/keybase/client/pulls/10736/commits"},"statuses":{"href":"https://api.github.com/repos/keybase/client/statuses/7aac0e5ac18cdfa70a191e329105ffe3327d2bb9"}},"author_association":"CONTRIBUTOR","merged":false,"mergeable":null,"rebaseable":null,"mergeable_state":"unknown","merged_by":null,"comments":0,"review_comments":0,"maintainer_can_modify":false,"commits":1,"additions":15,"deletions":0,"changed_files":2}},"public":true,"created_at":"2018-02-28T22:06:44Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312764088","type":"PushEvent","actor":{"id":21217,"login":"cjb","display_login":"cjb","gravatar_id":"","url":"https://api.github.com/users/cjb","avatar_url":"https://avatars.githubusercontent.com/u/21217?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"push_id":2366792463,"size":1,"distinct_size":1,"ref":"refs/heads/cjb/DESKTOP-6170-chat-from-team-page","head":"7aac0e5ac18cdfa70a191e329105ffe3327d2bb9","before":"dcdd0d1a276054d523c487ad541a632611e883e1","commits":[{"sha":"7aac0e5ac18cdfa70a191e329105ffe3327d2bb9","author":{"email":"chris@printf.net","name":"Chris Ball"},"message":"Show a Chat icon on team page member rows, desktop and mobile","distinct":true,"url":"https://api.github.com/repos/keybase/client/commits/7aac0e5ac18cdfa70a191e329105ffe3327d2bb9"}]},"public":true,"created_at":"2018-02-28T22:05:59Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312761500","type":"CreateEvent","actor":{"id":21217,"login":"cjb","display_login":"cjb","gravatar_id":"","url":"https://api.github.com/users/cjb","avatar_url":"https://avatars.githubusercontent.com/u/21217?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"ref":"cjb/DESKTOP-6170-chat-from-team-page","ref_type":"branch","master_branch":"master","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","pusher_type":"user"},"public":true,"created_at":"2018-02-28T22:05:26Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312730778","type":"CreateEvent","actor":{"id":1250314,"login":"mmaxim","display_login":"mmaxim","gravatar_id":"","url":"https://api.github.com/users/mmaxim","avatar_url":"https://avatars.githubusercontent.com/u/1250314?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"ref":"mike/CORE-7288","ref_type":"branch","master_branch":"master","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","pusher_type":"user"},"public":true,"created_at":"2018-02-28T21:59:16Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312720401","type":"PushEvent","actor":{"id":11968340,"login":"buoyad","display_login":"buoyad","gravatar_id":"","url":"https://api.github.com/users/buoyad","avatar_url":"https://avatars.githubusercontent.com/u/11968340?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"push_id":2366770014,"size":7,"distinct_size":2,"ref":"refs/heads/danny/DESKTOP-6158/center-role-picker","head":"da739bdca2e2f5e32bd7e7422a83e658ad4f82e6","before":"d05341d5db8c3013f116a592e101ea8be9482fcc","commits":[{"sha":"9bbb96a6e466c8de6594e2d9929c15ff2dd3fc24","author":{"email":"mike.maxim@gmail.com","name":"Mike Maxim"},"message":"skip TestTeamResetBadgesOnRemove","distinct":false,"url":"https://api.github.com/repos/keybase/client/commits/9bbb96a6e466c8de6594e2d9929c15ff2dd3fc24"},{"sha":"806eb4e6842af4041b24523be3a2e7148f9320f7","author":{"email":"mike.maxim@gmail.com","name":"Mike Maxim"},"message":"skip TestSubteamChats","distinct":false,"url":"https://api.github.com/repos/keybase/client/commits/806eb4e6842af4041b24523be3a2e7148f9320f7"},{"sha":"f6357528cdae87cb9cb91e9a253011e594035f1e","author":{"email":"akalin@keyba.se","name":"Fred Akalin"},"message":"Put trace button behind a secret handshake (#10705)\n\nOne would have to click the developer warning 7 times (a la Android)\r\nto show the trace button.\r\n\r\nIdeally, we'd know whether we're an admin build or not, and just use that,\r\nbut that's currently not easy, so going with this for now. This should deter\r\ncasual users.","distinct":false,"url":"https://api.github.com/repos/keybase/client/commits/f6357528cdae87cb9cb91e9a253011e594035f1e"},{"sha":"c88f6f7e0a0780839f3010f61192856853f208cd","author":{"email":"danny.a95@gmail.com","name":"Daniel Ayoub"},"message":"Add optional comments to action creators (#10707)\n\n* pipe _description through to action creator comment\r\n\r\n* factor out reserved keys","distinct":false,"url":"https://api.github.com/repos/keybase/client/commits/c88f6f7e0a0780839f3010f61192856853f208cd"},{"sha":"9613c18a266088c2e3af95f7529090ab71d4c432","author":{"email":"danny.a95@gmail.com","name":"Daniel Ayoub"},"message":"Make entire teams page scrollable (#10680)\n\n* initial refactor\r\n\r\n* WIP\r\n\r\n* WIP\r\n\r\n* factor out team header\r\n\r\n* clean up teams page\r\n\r\n* WIP\r\n\r\n* WIP\r\n\r\n* subteams work\r\n\r\n* initial item size estimator\r\n\r\n* gather subteam and member row types\r\n\r\n* initial sectionList on mobile\r\n\r\n* fix key problems\r\n\r\n* minor cleanup\r\n\r\n* requests and invites work\r\n\r\n* settings works on mobile\r\n\r\n* styling on desktop & mobile\r\n\r\n* type\r\n\r\n* WIP chat button\r\n\r\n* bail on chat button\r\n\r\n* better type\r\n\r\n* row key\r\n\r\n* bugfix\r\n\r\n* reenable chat button\r\n\r\n* better popup menu\r\n\r\n* disable chat button for upcoming release\r\n\r\n* chat button works","distinct":false,"url":"https://api.github.com/repos/keybase/client/commits/9613c18a266088c2e3af95f7529090ab71d4c432"},{"sha":"d9971163cce43a45a452ef04ada19ec3123736d8","author":{"email":"danny.a95@gmail.com","name":"Daniel Ayoub"},"message":"Merge branch 'master' into danny/DESKTOP-6158/center-role-picker","distinct":true,"url":"https://api.github.com/repos/keybase/client/commits/d9971163cce43a45a452ef04ada19ec3123736d8"},{"sha":"da739bdca2e2f5e32bd7e7422a83e658ad4f82e6","author":{"email":"danny.a95@gmail.com","name":"Daniel Ayoub"},"message":"storyshots","distinct":true,"url":"https://api.github.com/repos/keybase/client/commits/da739bdca2e2f5e32bd7e7422a83e658ad4f82e6"}]},"public":true,"created_at":"2018-02-28T21:57:06Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312702184","type":"PushEvent","actor":{"id":516435,"login":"chrisnojima","display_login":"chrisnojima","gravatar_id":"","url":"https://api.github.com/users/chrisnojima","avatar_url":"https://avatars.githubusercontent.com/u/516435?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"push_id":2366760543,"size":1,"distinct_size":1,"ref":"refs/heads/nojima/DESKTOP-chat-clean-11","head":"951cc543e88a0097dcca1abb1f59daa62c143225","before":"79f170691b99134697130be20d59fc0ce64596d3","commits":[{"sha":"951cc543e88a0097dcca1abb1f59daa62c143225","author":{"email":"cnojima@keyba.se","name":"chrisnojima"},"message":"WIP","distinct":true,"url":"https://api.github.com/repos/keybase/client/commits/951cc543e88a0097dcca1abb1f59daa62c143225"}]},"public":true,"created_at":"2018-02-28T21:53:24Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312695465","type":"PushEvent","actor":{"id":11968340,"login":"buoyad","display_login":"buoyad","gravatar_id":"","url":"https://api.github.com/users/buoyad","avatar_url":"https://avatars.githubusercontent.com/u/11968340?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"push_id":2366756881,"size":1,"distinct_size":1,"ref":"refs/heads/master","head":"9613c18a266088c2e3af95f7529090ab71d4c432","before":"c88f6f7e0a0780839f3010f61192856853f208cd","commits":[{"sha":"9613c18a266088c2e3af95f7529090ab71d4c432","author":{"email":"danny.a95@gmail.com","name":"Daniel Ayoub"},"message":"Make entire teams page scrollable (#10680)\n\n* initial refactor\r\n\r\n* WIP\r\n\r\n* WIP\r\n\r\n* factor out team header\r\n\r\n* clean up teams page\r\n\r\n* WIP\r\n\r\n* WIP\r\n\r\n* subteams work\r\n\r\n* initial item size estimator\r\n\r\n* gather subteam and member row types\r\n\r\n* initial sectionList on mobile\r\n\r\n* fix key problems\r\n\r\n* minor cleanup\r\n\r\n* requests and invites work\r\n\r\n* settings works on mobile\r\n\r\n* styling on desktop & mobile\r\n\r\n* type\r\n\r\n* WIP chat button\r\n\r\n* bail on chat button\r\n\r\n* better type\r\n\r\n* row key\r\n\r\n* bugfix\r\n\r\n* reenable chat button\r\n\r\n* better popup menu\r\n\r\n* disable chat button for upcoming release\r\n\r\n* chat button works","distinct":true,"url":"https://api.github.com/repos/keybase/client/commits/9613c18a266088c2e3af95f7529090ab71d4c432"}]},"public":true,"created_at":"2018-02-28T21:52:03Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312694781","type":"PullRequestEvent","actor":{"id":11968340,"login":"buoyad","display_login":"buoyad","gravatar_id":"","url":"https://api.github.com/users/buoyad","avatar_url":"https://avatars.githubusercontent.com/u/11968340?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"action":"closed","number":10680,"pull_request":{"url":"https://api.github.com/repos/keybase/client/pulls/10680","id":171121696,"html_url":"https://github.com/keybase/client/pull/10680","diff_url":"https://github.com/keybase/client/pull/10680.diff","patch_url":"https://github.com/keybase/client/pull/10680.patch","issue_url":"https://api.github.com/repos/keybase/client/issues/10680","number":10680,"state":"closed","locked":false,"title":"Make entire teams page scrollable","user":{"login":"buoyad","id":11968340,"avatar_url":"https://avatars1.githubusercontent.com/u/11968340?v=4","gravatar_id":"","url":"https://api.github.com/users/buoyad","html_url":"https://github.com/buoyad","followers_url":"https://api.github.com/users/buoyad/followers","following_url":"https://api.github.com/users/buoyad/following{/other_user}","gists_url":"https://api.github.com/users/buoyad/gists{/gist_id}","starred_url":"https://api.github.com/users/buoyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/buoyad/subscriptions","organizations_url":"https://api.github.com/users/buoyad/orgs","repos_url":"https://api.github.com/users/buoyad/repos","events_url":"https://api.github.com/users/buoyad/events{/privacy}","received_events_url":"https://api.github.com/users/buoyad/received_events","type":"User","site_admin":false},"body":"r? @keybase/react-hackers \r\n\r\n~(side note: I bailed on the chat button due to a bug cc @mmaxim @malgorithms)~\r\n\r\nedit: put the chat button back!","created_at":"2018-02-23T21:34:42Z","updated_at":"2018-02-28T21:51:54Z","closed_at":"2018-02-28T21:51:54Z","merged_at":"2018-02-28T21:51:54Z","merge_commit_sha":"9613c18a266088c2e3af95f7529090ab71d4c432","assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/keybase/client/pulls/10680/commits","review_comments_url":"https://api.github.com/repos/keybase/client/pulls/10680/comments","review_comment_url":"https://api.github.com/repos/keybase/client/pulls/comments{/number}","comments_url":"https://api.github.com/repos/keybase/client/issues/10680/comments","statuses_url":"https://api.github.com/repos/keybase/client/statuses/b41ed064d347f773d5735bf954d0cbffa64310df","head":{"label":"keybase:danny/DESKTOP-6135/team-scroll","ref":"danny/DESKTOP-6135/team-scroll","sha":"b41ed064d347f773d5735bf954d0cbffa64310df","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T21:41:21Z","pushed_at":"2018-02-28T21:51:54Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223155,"stargazers_count":3297,"watchers_count":3297,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1894,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1894,"watchers":3297,"default_branch":"master"}},"base":{"label":"keybase:master","ref":"master","sha":"d55b2546d7ec377a49c9e8230ffd949e7ce9446a","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T21:41:21Z","pushed_at":"2018-02-28T21:51:54Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223155,"stargazers_count":3297,"watchers_count":3297,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1894,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1894,"watchers":3297,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/keybase/client/pulls/10680"},"html":{"href":"https://github.com/keybase/client/pull/10680"},"issue":{"href":"https://api.github.com/repos/keybase/client/issues/10680"},"comments":{"href":"https://api.github.com/repos/keybase/client/issues/10680/comments"},"review_comments":{"href":"https://api.github.com/repos/keybase/client/pulls/10680/comments"},"review_comment":{"href":"https://api.github.com/repos/keybase/client/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/keybase/client/pulls/10680/commits"},"statuses":{"href":"https://api.github.com/repos/keybase/client/statuses/b41ed064d347f773d5735bf954d0cbffa64310df"}},"author_association":"MEMBER","merged":true,"mergeable":null,"rebaseable":null,"mergeable_state":"unknown","merged_by":{"login":"buoyad","id":11968340,"avatar_url":"https://avatars1.githubusercontent.com/u/11968340?v=4","gravatar_id":"","url":"https://api.github.com/users/buoyad","html_url":"https://github.com/buoyad","followers_url":"https://api.github.com/users/buoyad/followers","following_url":"https://api.github.com/users/buoyad/following{/other_user}","gists_url":"https://api.github.com/users/buoyad/gists{/gist_id}","starred_url":"https://api.github.com/users/buoyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/buoyad/subscriptions","organizations_url":"https://api.github.com/users/buoyad/orgs","repos_url":"https://api.github.com/users/buoyad/repos","events_url":"https://api.github.com/users/buoyad/events{/privacy}","received_events_url":"https://api.github.com/users/buoyad/received_events","type":"User","site_admin":false},"comments":1,"review_comments":6,"maintainer_can_modify":false,"commits":29,"additions":857,"deletions":599,"changed_files":19}},"public":true,"created_at":"2018-02-28T21:51:55Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312691649","type":"PushEvent","actor":{"id":862397,"login":"zanderz","display_login":"zanderz","gravatar_id":"","url":"https://api.github.com/users/zanderz","avatar_url":"https://avatars.githubusercontent.com/u/862397?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"push_id":2366754970,"size":1,"distinct_size":1,"ref":"refs/heads/zanderz/installer_2018.02.25","head":"9e2057cb4d1732b27e1929b03da078620a2e2d48","before":"959a9f00cbdd7cd9eee4744d6aac73cd04c7ff6c","commits":[{"sha":"9e2057cb4d1732b27e1929b03da078620a2e2d48","author":{"email":"steve@keyba.se","name":"Steve Sanders"},"message":"typo","distinct":true,"url":"https://api.github.com/repos/keybase/client/commits/9e2057cb4d1732b27e1929b03da078620a2e2d48"}]},"public":true,"created_at":"2018-02-28T21:51:17Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312689176","type":"PullRequestReviewCommentEvent","actor":{"id":8516691,"login":"strib","display_login":"strib","gravatar_id":"","url":"https://api.github.com/users/strib","avatar_url":"https://avatars.githubusercontent.com/u/8516691?"},"repo":{"id":59787605,"name":"keybase/kbfs","url":"https://api.github.com/repos/keybase/kbfs"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/keybase/kbfs/pulls/comments/171396812","pull_request_review_id":100242908,"id":171396812,"diff_hunk":"@@ -0,0 +1,267 @@\n+// Copyright 2018 Keybase Inc. All rights reserved.\n+// Use of this source code is governed by a BSD\n+// license that can be found in the LICENSE file.\n+\n+package main\n+\n+import (\n+\t\"context\"\n+\t\"fmt\"\n+\t\"os\"\n+\t\"os/signal\"\n+\t\"os/user\"\n+\t\"path/filepath\"\n+\t\"runtime\"\n+\t\"sort\"\n+\t\"strconv\"\n+\t\"strings\"\n+\t\"sync\"\n+\t\"syscall\"\n+\t\"time\"\n+\n+\t\"bazil.org/fuse\"\n+\t\"bazil.org/fuse/fs\"\n+\t\"github.com/strib/gomounts\"\n+)\n+\n+var kbfusePath = fuse.OSXFUSEPaths{\n+\tDevicePrefix: \"/dev/kbfuse\",\n+\tLoad:         \"/Library/Filesystems/kbfuse.fs/Contents/Resources/load_kbfuse\",\n+\tMount:        \"/Library/Filesystems/kbfuse.fs/Contents/Resources/mount_kbfuse\",\n+\tDaemonVar:    \"MOUNT_KBFUSE_DAEMON_PATH\",\n+}\n+\n+const (\n+\tmountpointTimeout = 5 * time.Second\n+)\n+\n+type symlink struct {\n+\tlink string\n+}\n+\n+func (s symlink) Attr(ctx context.Context, a *fuse.Attr) (err error) {\n+\ta.Mode = os.ModeSymlink | a.Mode | 0555\n+\ta.Valid = 0\n+\treturn nil\n+}\n+\n+func (s symlink) Readlink(ctx context.Context, req *fuse.ReadlinkRequest) (\n+\tlink string, err error) {\n+\treturn s.link, nil\n+}\n+\n+type cacheEntry struct {\n+\tmountpoint string\n+\ttime       time.Time\n+}\n+\n+type root struct {\n+\tlock            sync.RWMutex\n+\tmountpointCache map[uint32]cacheEntry\n+}\n+\n+func newRoot() *root {\n+\treturn &root{\n+\t\tmountpointCache: make(map[uint32]cacheEntry),\n+\t}\n+}\n+\n+func (r *root) Root() (fs.Node, error) {\n+\treturn r, nil\n+}\n+\n+func (r *root) Attr(ctx context.Context, attr *fuse.Attr) error {\n+\tattr.Mode = os.ModeDir | 0555\n+\treturn nil\n+}\n+\n+func (r *root) getCachedMountpoint(uid uint32) string {\n+\tr.lock.RLock()\n+\tdefer r.lock.RUnlock()\n+\tentry, ok := r.mountpointCache[uid]\n+\tif !ok {\n+\t\treturn \"\"\n+\t}\n+\tnow := time.Now()\n+\tif now.Sub(entry.time) > mountpointTimeout {\n+\t\t// Don't bother deleting the entry, since the caller should\n+\t\t// just overwrite it.\n+\t\treturn \"\"\n+\t}\n+\treturn entry.mountpoint\n+}\n+\n+func (r *root) findKBFSMount(ctx context.Context) (\n+\tmountpoint string, err error) {\n+\tuid := ctx.Value(fs.CtxHeaderUIDKey).(uint32)\n+\t// Don't let the root see anything here; we don't want a symlink\n+\t// loop back to this mount.\n+\tif uid == 0 {\n+\t\treturn \"\", fuse.ENOENT\n+\t}\n+\n+\tmountpoint = r.getCachedMountpoint(uid)\n+\tif mountpoint != \"\" {\n+\t\treturn mountpoint, nil\n+\t}\n+\n+\tdefer func() {\n+\t\tif err != nil {\n+\t\t\treturn\n+\t\t}\n+\t\t// Cache the entry if we didn't hit an error.\n+\t\tr.lock.Lock()\n+\t\tdefer r.lock.Unlock()\n+\t\tr.mountpointCache[uid] = cacheEntry{\n+\t\t\tmountpoint: mountpoint,\n+\t\t\ttime:       time.Now(),\n+\t\t}\n+\t}()\n+\n+\tu, err := user.LookupId(strconv.FormatUint(uint64(uid), 10))\n+\tif err != nil {\n+\t\treturn \"\", err\n+\t}\n+\n+\tvols, err := gomounts.GetMountedVolumes()\n+\tif err != nil {\n+\t\treturn \"\", err\n+\t}\n+\tfuseType := \"fuse\"\n+\tif runtime.GOOS == \"darwin\" {\n+\t\tfuseType = \"kbfuse\"\n+\t}\n+\tvar fuseMountPoints []string\n+\tfor _, v := range vols {\n+\t\tif v.Type != fuseType {\n+\t\t\tcontinue\n+\t\t}\n+\t\tif v.Owner != u.Uid {\n+\t\t\tcontinue\n+\t\t}\n+\t\tfuseMountPoints = append(fuseMountPoints, v.Path)\n+\t}\n+\n+\tif len(fuseMountPoints) == 0 {\n+\t\treturn \"\", fuse.ENOENT\n+\t}\n+\tif len(fuseMountPoints) == 1 {\n+\t\treturn fuseMountPoints[0], nil\n+\t}\n+\n+\t// If there is more than one, pick the first one alphabetically\n+\t// that has \"keybase\" in the path.\n+\tsort.Strings(fuseMountPoints)\n+\tfor _, mp := range fuseMountPoints {\n+\t\t// TODO: a better regexp that will rule out keybase.staging if\n+\t\t// we're in prod mode, etc.\n+\t\tif !strings.Contains(mp, \"keybase\") {\n+\t\t\tcontinue\n+\t\t}\n+\t\t// Double-check that this is a real KBFS mount.\n+\t\tif _, err := os.Stat(filepath.Join(mp, \".kbfs_error\")); err != nil {\n+\t\t\tcontinue\n+\t\t}\n+\t\treturn mp, nil\n+\t}\n+\n+\t// Give up and return the first one.\n+\treturn fuseMountPoints[0], nil\n+}\n+\n+func (r *root) ReadDirAll(ctx context.Context) ([]fuse.Dirent, error) {\n+\t_, err := r.findKBFSMount(ctx)\n+\tif err != nil {\n+\t\tif err == fuse.ENOENT {\n+\t\t\treturn []fuse.Dirent{}, nil\n+\t\t} else {\n+\t\t\treturn []fuse.Dirent{}, err\n+\t\t}\n+\t}\n+\n+\t// TODO: show the `kbfs.error.txt\" and \"kbfs.nologin.txt\" files if\n+\t// they exist?  As root, it is hard to figure out if they're\n+\t// there, though.\n+\treturn []fuse.Dirent{\n+\t\t{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"private\",\n+\t\t},\n+\t\t{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"public\",\n+\t\t},\n+\t\tfuse.Dirent{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"team\",\n+\t\t},\n+\t}, nil\n+}\n+\n+func (r *root) Lookup(\n+\tctx context.Context, req *fuse.LookupRequest, resp *fuse.LookupResponse) (\n+\tn fs.Node, err error) {\n+\tmountpoint, err := r.findKBFSMount(ctx)\n+\tif err != nil {\n+\t\treturn nil, err\n+\t}\n+\n+\tresp.EntryValid = 0\n+\tswitch req.Name {\n+\tcase \"private\", \"public\", \"team\", \".kbfs_error\", \".kbfs_metrics\",\n+\t\t\".kbfs_profiles\", \".kbfs_reset_caches\", \".kbfs_status\",\n+\t\t\"kbfs.error.txt\", \"kbfs.nologin.txt\", \".kbfs_enable_auto_journals\",\n+\t\t\".kbfs_disable_auto_journals\", \".kbfs_enable_block_prefetching\",\n+\t\t\".kbfs_disable_block_prefetching\", \".kbfs_enable_debug_server\",\n+\t\t\".kbfs_disable_debug_server\":\n+\t\treturn symlink{filepath.Join(mountpoint, req.Name)}, nil\n+\t}\n+\treturn nil, fuse.ENOENT\n+}\n+\n+func main() {\n+\tcurrUser, err := user.Current()\n+\tif err != nil {\n+\t\tpanic(err)\n+\t}\n+\tif currUser.Uid != \"0\" {\n+\t\truntime.LockOSThread()\n+\t\t_, _, errNo := syscall.Syscall(syscall.SYS_SETUID, 0, 0, 0)","path":"redirector/go/main.go","position":228,"original_position":229,"commit_id":"a375bbaa852f7c4c5475526da029481d313d80e8","original_commit_id":"4a9c54931293f10b5568f92acdec99a7e74547c5","user":{"login":"strib","id":8516691,"avatar_url":"https://avatars0.githubusercontent.com/u/8516691?v=4","gravatar_id":"","url":"https://api.github.com/users/strib","html_url":"https://github.com/strib","followers_url":"https://api.github.com/users/strib/followers","following_url":"https://api.github.com/users/strib/following{/other_user}","gists_url":"https://api.github.com/users/strib/gists{/gist_id}","starred_url":"https://api.github.com/users/strib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/strib/subscriptions","organizations_url":"https://api.github.com/users/strib/orgs","repos_url":"https://api.github.com/users/strib/repos","events_url":"https://api.github.com/users/strib/events{/privacy}","received_events_url":"https://api.github.com/users/strib/received_events","type":"User","site_admin":false},"body":"I guess maybe it has something to do with the difference between linking into the .so file and calling an external mount program?  Maybe the latter doesn't get run as root unless you officially set the uid?","created_at":"2018-02-28T21:50:46Z","updated_at":"2018-02-28T21:50:47Z","html_url":"https://github.com/keybase/kbfs/pull/1496#discussion_r171396812","pull_request_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/comments/171396812"},"html":{"href":"https://github.com/keybase/kbfs/pull/1496#discussion_r171396812"},"pull_request":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496"}},"in_reply_to_id":171385042},"pull_request":{"url":"https://api.github.com/repos/keybase/kbfs/pulls/1496","id":172070599,"html_url":"https://github.com/keybase/kbfs/pull/1496","diff_url":"https://github.com/keybase/kbfs/pull/1496.diff","patch_url":"https://github.com/keybase/kbfs/pull/1496.patch","issue_url":"https://api.github.com/repos/keybase/kbfs/issues/1496","number":1496,"state":"open","locked":false,"title":"redirector: a Go implementation for the root redirector","user":{"login":"strib","id":8516691,"avatar_url":"https://avatars0.githubusercontent.com/u/8516691?v=4","gravatar_id":"","url":"https://api.github.com/users/strib","html_url":"https://github.com/strib","followers_url":"https://api.github.com/users/strib/followers","following_url":"https://api.github.com/users/strib/following{/other_user}","gists_url":"https://api.github.com/users/strib/gists{/gist_id}","starred_url":"https://api.github.com/users/strib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/strib/subscriptions","organizations_url":"https://api.github.com/users/strib/orgs","repos_url":"https://api.github.com/users/strib/repos","events_url":"https://api.github.com/users/strib/events{/privacy}","received_events_url":"https://api.github.com/users/strib/received_events","type":"User","site_admin":false},"body":"This implementation of the root redirector will likely be used for macOS, at least until we figure out the kbfuse+Rust situation.\r\n\r\nNote that I needed some new bazil.org/fuse options, so I forked it to github.comkeybase/fuse and added two new features:\r\n* A NoBrowse() option that keeps the redirector from showing up in the Finder (instead, the specific user's mount will show up).\r\n* Adding the requesting user's UID to the context for every request, since `ReadDirAll` needs to know whether the requesting user has a valid mountpoint or not.  The bazil.org/fuse interface for `ReadDirAll` doesn't pass this down, so putting it in the context seemed like the easiest option for now.\r\n\r\nIssue: KBFS-2774","created_at":"2018-02-28T20:58:07Z","updated_at":"2018-02-28T21:50:47Z","closed_at":null,"merged_at":null,"merge_commit_sha":"437c5c76f895a2fc4092ddecb665a8ea1424e823","assignee":null,"assignees":[],"requested_reviewers":[{"login":"jzila","id":59594,"avatar_url":"https://avatars1.githubusercontent.com/u/59594?v=4","gravatar_id":"","url":"https://api.github.com/users/jzila","html_url":"https://github.com/jzila","followers_url":"https://api.github.com/users/jzila/followers","following_url":"https://api.github.com/users/jzila/following{/other_user}","gists_url":"https://api.github.com/users/jzila/gists{/gist_id}","starred_url":"https://api.github.com/users/jzila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzila/subscriptions","organizations_url":"https://api.github.com/users/jzila/orgs","repos_url":"https://api.github.com/users/jzila/repos","events_url":"https://api.github.com/users/jzila/events{/privacy}","received_events_url":"https://api.github.com/users/jzila/received_events","type":"User","site_admin":false},{"login":"songgao","id":255797,"avatar_url":"https://avatars3.githubusercontent.com/u/255797?v=4","gravatar_id":"","url":"https://api.github.com/users/songgao","html_url":"https://github.com/songgao","followers_url":"https://api.github.com/users/songgao/followers","following_url":"https://api.github.com/users/songgao/following{/other_user}","gists_url":"https://api.github.com/users/songgao/gists{/gist_id}","starred_url":"https://api.github.com/users/songgao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songgao/subscriptions","organizations_url":"https://api.github.com/users/songgao/orgs","repos_url":"https://api.github.com/users/songgao/repos","events_url":"https://api.github.com/users/songgao/events{/privacy}","received_events_url":"https://api.github.com/users/songgao/received_events","type":"User","site_admin":false},{"login":"akalin-keybase","id":13270622,"avatar_url":"https://avatars3.githubusercontent.com/u/13270622?v=4","gravatar_id":"","url":"https://api.github.com/users/akalin-keybase","html_url":"https://github.com/akalin-keybase","followers_url":"https://api.github.com/users/akalin-keybase/followers","following_url":"https://api.github.com/users/akalin-keybase/following{/other_user}","gists_url":"https://api.github.com/users/akalin-keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/akalin-keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akalin-keybase/subscriptions","organizations_url":"https://api.github.com/users/akalin-keybase/orgs","repos_url":"https://api.github.com/users/akalin-keybase/repos","events_url":"https://api.github.com/users/akalin-keybase/events{/privacy}","received_events_url":"https://api.github.com/users/akalin-keybase/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496/commits","review_comments_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496/comments","review_comment_url":"https://api.github.com/repos/keybase/kbfs/pulls/comments{/number}","comments_url":"https://api.github.com/repos/keybase/kbfs/issues/1496/comments","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/a375bbaa852f7c4c5475526da029481d313d80e8","head":{"label":"keybase:strib/KBFS-2774-mount-redirector","ref":"strib/KBFS-2774-mount-redirector","sha":"a375bbaa852f7c4c5475526da029481d313d80e8","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":59787605,"name":"kbfs","full_name":"keybase/kbfs","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/kbfs","description":"Keybase Filesystem (KBFS)","fork":false,"url":"https://api.github.com/repos/keybase/kbfs","forks_url":"https://api.github.com/repos/keybase/kbfs/forks","keys_url":"https://api.github.com/repos/keybase/kbfs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/kbfs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/kbfs/teams","hooks_url":"https://api.github.com/repos/keybase/kbfs/hooks","issue_events_url":"https://api.github.com/repos/keybase/kbfs/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/kbfs/events","assignees_url":"https://api.github.com/repos/keybase/kbfs/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/kbfs/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/kbfs/tags","blobs_url":"https://api.github.com/repos/keybase/kbfs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/kbfs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/kbfs/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/kbfs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/kbfs/languages","stargazers_url":"https://api.github.com/repos/keybase/kbfs/stargazers","contributors_url":"https://api.github.com/repos/keybase/kbfs/contributors","subscribers_url":"https://api.github.com/repos/keybase/kbfs/subscribers","subscription_url":"https://api.github.com/repos/keybase/kbfs/subscription","commits_url":"https://api.github.com/repos/keybase/kbfs/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/kbfs/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/kbfs/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/kbfs/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/kbfs/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/kbfs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/kbfs/merges","archive_url":"https://api.github.com/repos/keybase/kbfs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/kbfs/downloads","issues_url":"https://api.github.com/repos/keybase/kbfs/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/kbfs/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/kbfs/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/kbfs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/kbfs/labels{/name}","releases_url":"https://api.github.com/repos/keybase/kbfs/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/kbfs/deployments","created_at":"2016-05-26T22:37:42Z","updated_at":"2018-02-28T02:25:38Z","pushed_at":"2018-02-28T21:03:09Z","git_url":"git://github.com/keybase/kbfs.git","ssh_url":"git@github.com:keybase/kbfs.git","clone_url":"https://github.com/keybase/kbfs.git","svn_url":"https://github.com/keybase/kbfs","homepage":"https://keybase.io/docs/kbfs","size":48537,"stargazers_count":885,"watchers_count":885,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":76,"mirror_url":null,"archived":false,"open_issues_count":46,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":76,"open_issues":46,"watchers":885,"default_branch":"master"}},"base":{"label":"keybase:master","ref":"master","sha":"478a58b55a4605e2abe8699e32adc066bf1df7ee","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":59787605,"name":"kbfs","full_name":"keybase/kbfs","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/kbfs","description":"Keybase Filesystem (KBFS)","fork":false,"url":"https://api.github.com/repos/keybase/kbfs","forks_url":"https://api.github.com/repos/keybase/kbfs/forks","keys_url":"https://api.github.com/repos/keybase/kbfs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/kbfs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/kbfs/teams","hooks_url":"https://api.github.com/repos/keybase/kbfs/hooks","issue_events_url":"https://api.github.com/repos/keybase/kbfs/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/kbfs/events","assignees_url":"https://api.github.com/repos/keybase/kbfs/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/kbfs/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/kbfs/tags","blobs_url":"https://api.github.com/repos/keybase/kbfs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/kbfs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/kbfs/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/kbfs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/kbfs/languages","stargazers_url":"https://api.github.com/repos/keybase/kbfs/stargazers","contributors_url":"https://api.github.com/repos/keybase/kbfs/contributors","subscribers_url":"https://api.github.com/repos/keybase/kbfs/subscribers","subscription_url":"https://api.github.com/repos/keybase/kbfs/subscription","commits_url":"https://api.github.com/repos/keybase/kbfs/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/kbfs/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/kbfs/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/kbfs/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/kbfs/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/kbfs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/kbfs/merges","archive_url":"https://api.github.com/repos/keybase/kbfs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/kbfs/downloads","issues_url":"https://api.github.com/repos/keybase/kbfs/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/kbfs/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/kbfs/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/kbfs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/kbfs/labels{/name}","releases_url":"https://api.github.com/repos/keybase/kbfs/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/kbfs/deployments","created_at":"2016-05-26T22:37:42Z","updated_at":"2018-02-28T02:25:38Z","pushed_at":"2018-02-28T21:03:09Z","git_url":"git://github.com/keybase/kbfs.git","ssh_url":"git@github.com:keybase/kbfs.git","clone_url":"https://github.com/keybase/kbfs.git","svn_url":"https://github.com/keybase/kbfs","homepage":"https://keybase.io/docs/kbfs","size":48537,"stargazers_count":885,"watchers_count":885,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":76,"mirror_url":null,"archived":false,"open_issues_count":46,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":76,"open_issues":46,"watchers":885,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496"},"html":{"href":"https://github.com/keybase/kbfs/pull/1496"},"issue":{"href":"https://api.github.com/repos/keybase/kbfs/issues/1496"},"comments":{"href":"https://api.github.com/repos/keybase/kbfs/issues/1496/comments"},"review_comments":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496/comments"},"review_comment":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496/commits"},"statuses":{"href":"https://api.github.com/repos/keybase/kbfs/statuses/a375bbaa852f7c4c5475526da029481d313d80e8"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-02-28T21:50:46Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312678444","type":"PullRequestReviewCommentEvent","actor":{"id":8516691,"login":"strib","display_login":"strib","gravatar_id":"","url":"https://api.github.com/users/strib","avatar_url":"https://avatars.githubusercontent.com/u/8516691?"},"repo":{"id":59787605,"name":"keybase/kbfs","url":"https://api.github.com/repos/keybase/kbfs"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/keybase/kbfs/pulls/comments/171396177","pull_request_review_id":100242113,"id":171396177,"diff_hunk":"@@ -0,0 +1,267 @@\n+// Copyright 2018 Keybase Inc. All rights reserved.\n+// Use of this source code is governed by a BSD\n+// license that can be found in the LICENSE file.\n+\n+package main\n+\n+import (\n+\t\"context\"\n+\t\"fmt\"\n+\t\"os\"\n+\t\"os/signal\"\n+\t\"os/user\"\n+\t\"path/filepath\"\n+\t\"runtime\"\n+\t\"sort\"\n+\t\"strconv\"\n+\t\"strings\"\n+\t\"sync\"\n+\t\"syscall\"\n+\t\"time\"\n+\n+\t\"bazil.org/fuse\"\n+\t\"bazil.org/fuse/fs\"\n+\t\"github.com/strib/gomounts\"\n+)\n+\n+var kbfusePath = fuse.OSXFUSEPaths{\n+\tDevicePrefix: \"/dev/kbfuse\",\n+\tLoad:         \"/Library/Filesystems/kbfuse.fs/Contents/Resources/load_kbfuse\",\n+\tMount:        \"/Library/Filesystems/kbfuse.fs/Contents/Resources/mount_kbfuse\",\n+\tDaemonVar:    \"MOUNT_KBFUSE_DAEMON_PATH\",\n+}\n+\n+const (\n+\tmountpointTimeout = 5 * time.Second\n+)\n+\n+type symlink struct {\n+\tlink string\n+}\n+\n+func (s symlink) Attr(ctx context.Context, a *fuse.Attr) (err error) {\n+\ta.Mode = os.ModeSymlink | a.Mode | 0555\n+\ta.Valid = 0\n+\treturn nil\n+}\n+\n+func (s symlink) Readlink(ctx context.Context, req *fuse.ReadlinkRequest) (\n+\tlink string, err error) {\n+\treturn s.link, nil\n+}\n+\n+type cacheEntry struct {\n+\tmountpoint string\n+\ttime       time.Time\n+}\n+\n+type root struct {\n+\tlock            sync.RWMutex\n+\tmountpointCache map[uint32]cacheEntry\n+}\n+\n+func newRoot() *root {\n+\treturn &root{\n+\t\tmountpointCache: make(map[uint32]cacheEntry),\n+\t}\n+}\n+\n+func (r *root) Root() (fs.Node, error) {\n+\treturn r, nil\n+}\n+\n+func (r *root) Attr(ctx context.Context, attr *fuse.Attr) error {\n+\tattr.Mode = os.ModeDir | 0555\n+\treturn nil\n+}\n+\n+func (r *root) getCachedMountpoint(uid uint32) string {\n+\tr.lock.RLock()\n+\tdefer r.lock.RUnlock()\n+\tentry, ok := r.mountpointCache[uid]\n+\tif !ok {\n+\t\treturn \"\"\n+\t}\n+\tnow := time.Now()\n+\tif now.Sub(entry.time) > mountpointTimeout {\n+\t\t// Don't bother deleting the entry, since the caller should\n+\t\t// just overwrite it.\n+\t\treturn \"\"\n+\t}\n+\treturn entry.mountpoint\n+}\n+\n+func (r *root) findKBFSMount(ctx context.Context) (\n+\tmountpoint string, err error) {\n+\tuid := ctx.Value(fs.CtxHeaderUIDKey).(uint32)\n+\t// Don't let the root see anything here; we don't want a symlink\n+\t// loop back to this mount.\n+\tif uid == 0 {\n+\t\treturn \"\", fuse.ENOENT\n+\t}\n+\n+\tmountpoint = r.getCachedMountpoint(uid)\n+\tif mountpoint != \"\" {\n+\t\treturn mountpoint, nil\n+\t}\n+\n+\tdefer func() {\n+\t\tif err != nil {\n+\t\t\treturn\n+\t\t}\n+\t\t// Cache the entry if we didn't hit an error.\n+\t\tr.lock.Lock()\n+\t\tdefer r.lock.Unlock()\n+\t\tr.mountpointCache[uid] = cacheEntry{\n+\t\t\tmountpoint: mountpoint,\n+\t\t\ttime:       time.Now(),\n+\t\t}\n+\t}()\n+\n+\tu, err := user.LookupId(strconv.FormatUint(uint64(uid), 10))\n+\tif err != nil {\n+\t\treturn \"\", err\n+\t}\n+\n+\tvols, err := gomounts.GetMountedVolumes()\n+\tif err != nil {\n+\t\treturn \"\", err\n+\t}\n+\tfuseType := \"fuse\"\n+\tif runtime.GOOS == \"darwin\" {\n+\t\tfuseType = \"kbfuse\"\n+\t}\n+\tvar fuseMountPoints []string\n+\tfor _, v := range vols {\n+\t\tif v.Type != fuseType {\n+\t\t\tcontinue\n+\t\t}\n+\t\tif v.Owner != u.Uid {\n+\t\t\tcontinue\n+\t\t}\n+\t\tfuseMountPoints = append(fuseMountPoints, v.Path)\n+\t}\n+\n+\tif len(fuseMountPoints) == 0 {\n+\t\treturn \"\", fuse.ENOENT\n+\t}\n+\tif len(fuseMountPoints) == 1 {\n+\t\treturn fuseMountPoints[0], nil\n+\t}\n+\n+\t// If there is more than one, pick the first one alphabetically\n+\t// that has \"keybase\" in the path.\n+\tsort.Strings(fuseMountPoints)\n+\tfor _, mp := range fuseMountPoints {\n+\t\t// TODO: a better regexp that will rule out keybase.staging if\n+\t\t// we're in prod mode, etc.\n+\t\tif !strings.Contains(mp, \"keybase\") {\n+\t\t\tcontinue\n+\t\t}\n+\t\t// Double-check that this is a real KBFS mount.\n+\t\tif _, err := os.Stat(filepath.Join(mp, \".kbfs_error\")); err != nil {\n+\t\t\tcontinue\n+\t\t}\n+\t\treturn mp, nil\n+\t}\n+\n+\t// Give up and return the first one.\n+\treturn fuseMountPoints[0], nil\n+}\n+\n+func (r *root) ReadDirAll(ctx context.Context) ([]fuse.Dirent, error) {\n+\t_, err := r.findKBFSMount(ctx)\n+\tif err != nil {\n+\t\tif err == fuse.ENOENT {\n+\t\t\treturn []fuse.Dirent{}, nil\n+\t\t} else {\n+\t\t\treturn []fuse.Dirent{}, err\n+\t\t}\n+\t}\n+\n+\t// TODO: show the `kbfs.error.txt\" and \"kbfs.nologin.txt\" files if\n+\t// they exist?  As root, it is hard to figure out if they're\n+\t// there, though.\n+\treturn []fuse.Dirent{\n+\t\t{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"private\",\n+\t\t},\n+\t\t{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"public\",\n+\t\t},\n+\t\tfuse.Dirent{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"team\",\n+\t\t},\n+\t}, nil\n+}\n+\n+func (r *root) Lookup(\n+\tctx context.Context, req *fuse.LookupRequest, resp *fuse.LookupResponse) (\n+\tn fs.Node, err error) {\n+\tmountpoint, err := r.findKBFSMount(ctx)\n+\tif err != nil {\n+\t\treturn nil, err\n+\t}\n+\n+\tresp.EntryValid = 0\n+\tswitch req.Name {\n+\tcase \"private\", \"public\", \"team\", \".kbfs_error\", \".kbfs_metrics\",\n+\t\t\".kbfs_profiles\", \".kbfs_reset_caches\", \".kbfs_status\",\n+\t\t\"kbfs.error.txt\", \"kbfs.nologin.txt\", \".kbfs_enable_auto_journals\",\n+\t\t\".kbfs_disable_auto_journals\", \".kbfs_enable_block_prefetching\",\n+\t\t\".kbfs_disable_block_prefetching\", \".kbfs_enable_debug_server\",\n+\t\t\".kbfs_disable_debug_server\":\n+\t\treturn symlink{filepath.Join(mountpoint, req.Name)}, nil\n+\t}\n+\treturn nil, fuse.ENOENT\n+}\n+\n+func main() {\n+\tcurrUser, err := user.Current()\n+\tif err != nil {\n+\t\tpanic(err)\n+\t}\n+\tif currUser.Uid != \"0\" {\n+\t\truntime.LockOSThread()\n+\t\t_, _, errNo := syscall.Syscall(syscall.SYS_SETUID, 0, 0, 0)","path":"redirector/go/main.go","position":228,"original_position":229,"commit_id":"a375bbaa852f7c4c5475526da029481d313d80e8","original_commit_id":"4a9c54931293f10b5568f92acdec99a7e74547c5","user":{"login":"strib","id":8516691,"avatar_url":"https://avatars0.githubusercontent.com/u/8516691?v=4","gravatar_id":"","url":"https://api.github.com/users/strib","html_url":"https://github.com/strib","followers_url":"https://api.github.com/users/strib/followers","following_url":"https://api.github.com/users/strib/following{/other_user}","gists_url":"https://api.github.com/users/strib/gists{/gist_id}","starred_url":"https://api.github.com/users/strib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/strib/subscriptions","organizations_url":"https://api.github.com/users/strib/orgs","repos_url":"https://api.github.com/users/strib/repos","events_url":"https://api.github.com/users/strib/events{/privacy}","received_events_url":"https://api.github.com/users/strib/received_events","type":"User","site_admin":false},"body":"Say what?  Yeah you're right, I just tried your branch and it worked for me (in `/tmp/`).  Stumped.","created_at":"2018-02-28T21:48:36Z","updated_at":"2018-02-28T21:48:36Z","html_url":"https://github.com/keybase/kbfs/pull/1496#discussion_r171396177","pull_request_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/comments/171396177"},"html":{"href":"https://github.com/keybase/kbfs/pull/1496#discussion_r171396177"},"pull_request":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496"}},"in_reply_to_id":171385042},"pull_request":{"url":"https://api.github.com/repos/keybase/kbfs/pulls/1496","id":172070599,"html_url":"https://github.com/keybase/kbfs/pull/1496","diff_url":"https://github.com/keybase/kbfs/pull/1496.diff","patch_url":"https://github.com/keybase/kbfs/pull/1496.patch","issue_url":"https://api.github.com/repos/keybase/kbfs/issues/1496","number":1496,"state":"open","locked":false,"title":"redirector: a Go implementation for the root redirector","user":{"login":"strib","id":8516691,"avatar_url":"https://avatars0.githubusercontent.com/u/8516691?v=4","gravatar_id":"","url":"https://api.github.com/users/strib","html_url":"https://github.com/strib","followers_url":"https://api.github.com/users/strib/followers","following_url":"https://api.github.com/users/strib/following{/other_user}","gists_url":"https://api.github.com/users/strib/gists{/gist_id}","starred_url":"https://api.github.com/users/strib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/strib/subscriptions","organizations_url":"https://api.github.com/users/strib/orgs","repos_url":"https://api.github.com/users/strib/repos","events_url":"https://api.github.com/users/strib/events{/privacy}","received_events_url":"https://api.github.com/users/strib/received_events","type":"User","site_admin":false},"body":"This implementation of the root redirector will likely be used for macOS, at least until we figure out the kbfuse+Rust situation.\r\n\r\nNote that I needed some new bazil.org/fuse options, so I forked it to github.comkeybase/fuse and added two new features:\r\n* A NoBrowse() option that keeps the redirector from showing up in the Finder (instead, the specific user's mount will show up).\r\n* Adding the requesting user's UID to the context for every request, since `ReadDirAll` needs to know whether the requesting user has a valid mountpoint or not.  The bazil.org/fuse interface for `ReadDirAll` doesn't pass this down, so putting it in the context seemed like the easiest option for now.\r\n\r\nIssue: KBFS-2774","created_at":"2018-02-28T20:58:07Z","updated_at":"2018-02-28T21:48:36Z","closed_at":null,"merged_at":null,"merge_commit_sha":"437c5c76f895a2fc4092ddecb665a8ea1424e823","assignee":null,"assignees":[],"requested_reviewers":[{"login":"jzila","id":59594,"avatar_url":"https://avatars1.githubusercontent.com/u/59594?v=4","gravatar_id":"","url":"https://api.github.com/users/jzila","html_url":"https://github.com/jzila","followers_url":"https://api.github.com/users/jzila/followers","following_url":"https://api.github.com/users/jzila/following{/other_user}","gists_url":"https://api.github.com/users/jzila/gists{/gist_id}","starred_url":"https://api.github.com/users/jzila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzila/subscriptions","organizations_url":"https://api.github.com/users/jzila/orgs","repos_url":"https://api.github.com/users/jzila/repos","events_url":"https://api.github.com/users/jzila/events{/privacy}","received_events_url":"https://api.github.com/users/jzila/received_events","type":"User","site_admin":false},{"login":"songgao","id":255797,"avatar_url":"https://avatars3.githubusercontent.com/u/255797?v=4","gravatar_id":"","url":"https://api.github.com/users/songgao","html_url":"https://github.com/songgao","followers_url":"https://api.github.com/users/songgao/followers","following_url":"https://api.github.com/users/songgao/following{/other_user}","gists_url":"https://api.github.com/users/songgao/gists{/gist_id}","starred_url":"https://api.github.com/users/songgao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songgao/subscriptions","organizations_url":"https://api.github.com/users/songgao/orgs","repos_url":"https://api.github.com/users/songgao/repos","events_url":"https://api.github.com/users/songgao/events{/privacy}","received_events_url":"https://api.github.com/users/songgao/received_events","type":"User","site_admin":false},{"login":"akalin-keybase","id":13270622,"avatar_url":"https://avatars3.githubusercontent.com/u/13270622?v=4","gravatar_id":"","url":"https://api.github.com/users/akalin-keybase","html_url":"https://github.com/akalin-keybase","followers_url":"https://api.github.com/users/akalin-keybase/followers","following_url":"https://api.github.com/users/akalin-keybase/following{/other_user}","gists_url":"https://api.github.com/users/akalin-keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/akalin-keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akalin-keybase/subscriptions","organizations_url":"https://api.github.com/users/akalin-keybase/orgs","repos_url":"https://api.github.com/users/akalin-keybase/repos","events_url":"https://api.github.com/users/akalin-keybase/events{/privacy}","received_events_url":"https://api.github.com/users/akalin-keybase/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496/commits","review_comments_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496/comments","review_comment_url":"https://api.github.com/repos/keybase/kbfs/pulls/comments{/number}","comments_url":"https://api.github.com/repos/keybase/kbfs/issues/1496/comments","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/a375bbaa852f7c4c5475526da029481d313d80e8","head":{"label":"keybase:strib/KBFS-2774-mount-redirector","ref":"strib/KBFS-2774-mount-redirector","sha":"a375bbaa852f7c4c5475526da029481d313d80e8","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":59787605,"name":"kbfs","full_name":"keybase/kbfs","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/kbfs","description":"Keybase Filesystem (KBFS)","fork":false,"url":"https://api.github.com/repos/keybase/kbfs","forks_url":"https://api.github.com/repos/keybase/kbfs/forks","keys_url":"https://api.github.com/repos/keybase/kbfs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/kbfs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/kbfs/teams","hooks_url":"https://api.github.com/repos/keybase/kbfs/hooks","issue_events_url":"https://api.github.com/repos/keybase/kbfs/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/kbfs/events","assignees_url":"https://api.github.com/repos/keybase/kbfs/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/kbfs/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/kbfs/tags","blobs_url":"https://api.github.com/repos/keybase/kbfs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/kbfs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/kbfs/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/kbfs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/kbfs/languages","stargazers_url":"https://api.github.com/repos/keybase/kbfs/stargazers","contributors_url":"https://api.github.com/repos/keybase/kbfs/contributors","subscribers_url":"https://api.github.com/repos/keybase/kbfs/subscribers","subscription_url":"https://api.github.com/repos/keybase/kbfs/subscription","commits_url":"https://api.github.com/repos/keybase/kbfs/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/kbfs/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/kbfs/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/kbfs/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/kbfs/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/kbfs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/kbfs/merges","archive_url":"https://api.github.com/repos/keybase/kbfs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/kbfs/downloads","issues_url":"https://api.github.com/repos/keybase/kbfs/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/kbfs/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/kbfs/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/kbfs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/kbfs/labels{/name}","releases_url":"https://api.github.com/repos/keybase/kbfs/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/kbfs/deployments","created_at":"2016-05-26T22:37:42Z","updated_at":"2018-02-28T02:25:38Z","pushed_at":"2018-02-28T21:03:09Z","git_url":"git://github.com/keybase/kbfs.git","ssh_url":"git@github.com:keybase/kbfs.git","clone_url":"https://github.com/keybase/kbfs.git","svn_url":"https://github.com/keybase/kbfs","homepage":"https://keybase.io/docs/kbfs","size":48520,"stargazers_count":885,"watchers_count":885,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":76,"mirror_url":null,"archived":false,"open_issues_count":46,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":76,"open_issues":46,"watchers":885,"default_branch":"master"}},"base":{"label":"keybase:master","ref":"master","sha":"478a58b55a4605e2abe8699e32adc066bf1df7ee","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":59787605,"name":"kbfs","full_name":"keybase/kbfs","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/kbfs","description":"Keybase Filesystem (KBFS)","fork":false,"url":"https://api.github.com/repos/keybase/kbfs","forks_url":"https://api.github.com/repos/keybase/kbfs/forks","keys_url":"https://api.github.com/repos/keybase/kbfs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/kbfs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/kbfs/teams","hooks_url":"https://api.github.com/repos/keybase/kbfs/hooks","issue_events_url":"https://api.github.com/repos/keybase/kbfs/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/kbfs/events","assignees_url":"https://api.github.com/repos/keybase/kbfs/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/kbfs/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/kbfs/tags","blobs_url":"https://api.github.com/repos/keybase/kbfs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/kbfs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/kbfs/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/kbfs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/kbfs/languages","stargazers_url":"https://api.github.com/repos/keybase/kbfs/stargazers","contributors_url":"https://api.github.com/repos/keybase/kbfs/contributors","subscribers_url":"https://api.github.com/repos/keybase/kbfs/subscribers","subscription_url":"https://api.github.com/repos/keybase/kbfs/subscription","commits_url":"https://api.github.com/repos/keybase/kbfs/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/kbfs/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/kbfs/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/kbfs/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/kbfs/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/kbfs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/kbfs/merges","archive_url":"https://api.github.com/repos/keybase/kbfs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/kbfs/downloads","issues_url":"https://api.github.com/repos/keybase/kbfs/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/kbfs/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/kbfs/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/kbfs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/kbfs/labels{/name}","releases_url":"https://api.github.com/repos/keybase/kbfs/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/kbfs/deployments","created_at":"2016-05-26T22:37:42Z","updated_at":"2018-02-28T02:25:38Z","pushed_at":"2018-02-28T21:03:09Z","git_url":"git://github.com/keybase/kbfs.git","ssh_url":"git@github.com:keybase/kbfs.git","clone_url":"https://github.com/keybase/kbfs.git","svn_url":"https://github.com/keybase/kbfs","homepage":"https://keybase.io/docs/kbfs","size":48520,"stargazers_count":885,"watchers_count":885,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":76,"mirror_url":null,"archived":false,"open_issues_count":46,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":76,"open_issues":46,"watchers":885,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496"},"html":{"href":"https://github.com/keybase/kbfs/pull/1496"},"issue":{"href":"https://api.github.com/repos/keybase/kbfs/issues/1496"},"comments":{"href":"https://api.github.com/repos/keybase/kbfs/issues/1496/comments"},"review_comments":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496/comments"},"review_comment":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496/commits"},"statuses":{"href":"https://api.github.com/repos/keybase/kbfs/statuses/a375bbaa852f7c4c5475526da029481d313d80e8"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-02-28T21:48:36Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312673973","type":"PullRequestReviewCommentEvent","actor":{"id":860932,"login":"oconnor663","display_login":"oconnor663","gravatar_id":"","url":"https://api.github.com/users/oconnor663","avatar_url":"https://avatars.githubusercontent.com/u/860932?"},"repo":{"id":59787605,"name":"keybase/kbfs","url":"https://api.github.com/repos/keybase/kbfs"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/keybase/kbfs/pulls/comments/171395921","pull_request_review_id":100241825,"id":171395921,"diff_hunk":"@@ -0,0 +1,267 @@\n+// Copyright 2018 Keybase Inc. All rights reserved.\n+// Use of this source code is governed by a BSD\n+// license that can be found in the LICENSE file.\n+\n+package main\n+\n+import (\n+\t\"context\"\n+\t\"fmt\"\n+\t\"os\"\n+\t\"os/signal\"\n+\t\"os/user\"\n+\t\"path/filepath\"\n+\t\"runtime\"\n+\t\"sort\"\n+\t\"strconv\"\n+\t\"strings\"\n+\t\"sync\"\n+\t\"syscall\"\n+\t\"time\"\n+\n+\t\"bazil.org/fuse\"\n+\t\"bazil.org/fuse/fs\"\n+\t\"github.com/strib/gomounts\"\n+)\n+\n+var kbfusePath = fuse.OSXFUSEPaths{\n+\tDevicePrefix: \"/dev/kbfuse\",\n+\tLoad:         \"/Library/Filesystems/kbfuse.fs/Contents/Resources/load_kbfuse\",\n+\tMount:        \"/Library/Filesystems/kbfuse.fs/Contents/Resources/mount_kbfuse\",\n+\tDaemonVar:    \"MOUNT_KBFUSE_DAEMON_PATH\",\n+}\n+\n+const (\n+\tmountpointTimeout = 5 * time.Second\n+)\n+\n+type symlink struct {\n+\tlink string\n+}\n+\n+func (s symlink) Attr(ctx context.Context, a *fuse.Attr) (err error) {\n+\ta.Mode = os.ModeSymlink | a.Mode | 0555\n+\ta.Valid = 0\n+\treturn nil\n+}\n+\n+func (s symlink) Readlink(ctx context.Context, req *fuse.ReadlinkRequest) (\n+\tlink string, err error) {\n+\treturn s.link, nil\n+}\n+\n+type cacheEntry struct {\n+\tmountpoint string\n+\ttime       time.Time\n+}\n+\n+type root struct {\n+\tlock            sync.RWMutex\n+\tmountpointCache map[uint32]cacheEntry\n+}\n+\n+func newRoot() *root {\n+\treturn &root{\n+\t\tmountpointCache: make(map[uint32]cacheEntry),\n+\t}\n+}\n+\n+func (r *root) Root() (fs.Node, error) {\n+\treturn r, nil\n+}\n+\n+func (r *root) Attr(ctx context.Context, attr *fuse.Attr) error {\n+\tattr.Mode = os.ModeDir | 0555\n+\treturn nil\n+}\n+\n+func (r *root) getCachedMountpoint(uid uint32) string {\n+\tr.lock.RLock()\n+\tdefer r.lock.RUnlock()\n+\tentry, ok := r.mountpointCache[uid]\n+\tif !ok {\n+\t\treturn \"\"\n+\t}\n+\tnow := time.Now()\n+\tif now.Sub(entry.time) > mountpointTimeout {\n+\t\t// Don't bother deleting the entry, since the caller should\n+\t\t// just overwrite it.\n+\t\treturn \"\"\n+\t}\n+\treturn entry.mountpoint\n+}\n+\n+func (r *root) findKBFSMount(ctx context.Context) (\n+\tmountpoint string, err error) {\n+\tuid := ctx.Value(fs.CtxHeaderUIDKey).(uint32)\n+\t// Don't let the root see anything here; we don't want a symlink\n+\t// loop back to this mount.\n+\tif uid == 0 {\n+\t\treturn \"\", fuse.ENOENT\n+\t}\n+\n+\tmountpoint = r.getCachedMountpoint(uid)\n+\tif mountpoint != \"\" {\n+\t\treturn mountpoint, nil\n+\t}\n+\n+\tdefer func() {\n+\t\tif err != nil {\n+\t\t\treturn\n+\t\t}\n+\t\t// Cache the entry if we didn't hit an error.\n+\t\tr.lock.Lock()\n+\t\tdefer r.lock.Unlock()\n+\t\tr.mountpointCache[uid] = cacheEntry{\n+\t\t\tmountpoint: mountpoint,\n+\t\t\ttime:       time.Now(),\n+\t\t}\n+\t}()\n+\n+\tu, err := user.LookupId(strconv.FormatUint(uint64(uid), 10))\n+\tif err != nil {\n+\t\treturn \"\", err\n+\t}\n+\n+\tvols, err := gomounts.GetMountedVolumes()\n+\tif err != nil {\n+\t\treturn \"\", err\n+\t}\n+\tfuseType := \"fuse\"\n+\tif runtime.GOOS == \"darwin\" {\n+\t\tfuseType = \"kbfuse\"\n+\t}\n+\tvar fuseMountPoints []string\n+\tfor _, v := range vols {\n+\t\tif v.Type != fuseType {\n+\t\t\tcontinue\n+\t\t}\n+\t\tif v.Owner != u.Uid {\n+\t\t\tcontinue\n+\t\t}\n+\t\tfuseMountPoints = append(fuseMountPoints, v.Path)\n+\t}\n+\n+\tif len(fuseMountPoints) == 0 {\n+\t\treturn \"\", fuse.ENOENT\n+\t}\n+\tif len(fuseMountPoints) == 1 {\n+\t\treturn fuseMountPoints[0], nil\n+\t}\n+\n+\t// If there is more than one, pick the first one alphabetically\n+\t// that has \"keybase\" in the path.\n+\tsort.Strings(fuseMountPoints)\n+\tfor _, mp := range fuseMountPoints {\n+\t\t// TODO: a better regexp that will rule out keybase.staging if\n+\t\t// we're in prod mode, etc.\n+\t\tif !strings.Contains(mp, \"keybase\") {\n+\t\t\tcontinue\n+\t\t}\n+\t\t// Double-check that this is a real KBFS mount.\n+\t\tif _, err := os.Stat(filepath.Join(mp, \".kbfs_error\")); err != nil {\n+\t\t\tcontinue\n+\t\t}\n+\t\treturn mp, nil\n+\t}\n+\n+\t// Give up and return the first one.\n+\treturn fuseMountPoints[0], nil\n+}\n+\n+func (r *root) ReadDirAll(ctx context.Context) ([]fuse.Dirent, error) {\n+\t_, err := r.findKBFSMount(ctx)\n+\tif err != nil {\n+\t\tif err == fuse.ENOENT {\n+\t\t\treturn []fuse.Dirent{}, nil\n+\t\t} else {\n+\t\t\treturn []fuse.Dirent{}, err\n+\t\t}\n+\t}\n+\n+\t// TODO: show the `kbfs.error.txt\" and \"kbfs.nologin.txt\" files if\n+\t// they exist?  As root, it is hard to figure out if they're\n+\t// there, though.\n+\treturn []fuse.Dirent{\n+\t\t{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"private\",\n+\t\t},\n+\t\t{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"public\",\n+\t\t},\n+\t\tfuse.Dirent{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"team\",\n+\t\t},\n+\t}, nil\n+}\n+\n+func (r *root) Lookup(\n+\tctx context.Context, req *fuse.LookupRequest, resp *fuse.LookupResponse) (\n+\tn fs.Node, err error) {\n+\tmountpoint, err := r.findKBFSMount(ctx)\n+\tif err != nil {\n+\t\treturn nil, err\n+\t}\n+\n+\tresp.EntryValid = 0\n+\tswitch req.Name {\n+\tcase \"private\", \"public\", \"team\", \".kbfs_error\", \".kbfs_metrics\",\n+\t\t\".kbfs_profiles\", \".kbfs_reset_caches\", \".kbfs_status\",\n+\t\t\"kbfs.error.txt\", \"kbfs.nologin.txt\", \".kbfs_enable_auto_journals\",\n+\t\t\".kbfs_disable_auto_journals\", \".kbfs_enable_block_prefetching\",\n+\t\t\".kbfs_disable_block_prefetching\", \".kbfs_enable_debug_server\",\n+\t\t\".kbfs_disable_debug_server\":\n+\t\treturn symlink{filepath.Join(mountpoint, req.Name)}, nil\n+\t}\n+\treturn nil, fuse.ENOENT\n+}\n+\n+func main() {\n+\tcurrUser, err := user.Current()\n+\tif err != nil {\n+\t\tpanic(err)\n+\t}\n+\tif currUser.Uid != \"0\" {\n+\t\truntime.LockOSThread()\n+\t\t_, _, errNo := syscall.Syscall(syscall.SYS_SETUID, 0, 0, 0)","path":"redirector/go/main.go","position":228,"original_position":229,"commit_id":"a375bbaa852f7c4c5475526da029481d313d80e8","original_commit_id":"4a9c54931293f10b5568f92acdec99a7e74547c5","user":{"login":"oconnor663","id":860932,"avatar_url":"https://avatars0.githubusercontent.com/u/860932?v=4","gravatar_id":"","url":"https://api.github.com/users/oconnor663","html_url":"https://github.com/oconnor663","followers_url":"https://api.github.com/users/oconnor663/followers","following_url":"https://api.github.com/users/oconnor663/following{/other_user}","gists_url":"https://api.github.com/users/oconnor663/gists{/gist_id}","starred_url":"https://api.github.com/users/oconnor663/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oconnor663/subscriptions","organizations_url":"https://api.github.com/users/oconnor663/orgs","repos_url":"https://api.github.com/users/oconnor663/repos","events_url":"https://api.github.com/users/oconnor663/events{/privacy}","received_events_url":"https://api.github.com/users/oconnor663/received_events","type":"User","site_admin":false},"body":"Another more trivial Go program seems to work just fine with the suid flag. (I just had it create a file in the current directory. Works in root-owned directories without `sudo`.)","created_at":"2018-02-28T21:47:43Z","updated_at":"2018-02-28T21:47:43Z","html_url":"https://github.com/keybase/kbfs/pull/1496#discussion_r171395921","pull_request_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/comments/171395921"},"html":{"href":"https://github.com/keybase/kbfs/pull/1496#discussion_r171395921"},"pull_request":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496"}},"in_reply_to_id":171385042},"pull_request":{"url":"https://api.github.com/repos/keybase/kbfs/pulls/1496","id":172070599,"html_url":"https://github.com/keybase/kbfs/pull/1496","diff_url":"https://github.com/keybase/kbfs/pull/1496.diff","patch_url":"https://github.com/keybase/kbfs/pull/1496.patch","issue_url":"https://api.github.com/repos/keybase/kbfs/issues/1496","number":1496,"state":"open","locked":false,"title":"redirector: a Go implementation for the root redirector","user":{"login":"strib","id":8516691,"avatar_url":"https://avatars0.githubusercontent.com/u/8516691?v=4","gravatar_id":"","url":"https://api.github.com/users/strib","html_url":"https://github.com/strib","followers_url":"https://api.github.com/users/strib/followers","following_url":"https://api.github.com/users/strib/following{/other_user}","gists_url":"https://api.github.com/users/strib/gists{/gist_id}","starred_url":"https://api.github.com/users/strib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/strib/subscriptions","organizations_url":"https://api.github.com/users/strib/orgs","repos_url":"https://api.github.com/users/strib/repos","events_url":"https://api.github.com/users/strib/events{/privacy}","received_events_url":"https://api.github.com/users/strib/received_events","type":"User","site_admin":false},"body":"This implementation of the root redirector will likely be used for macOS, at least until we figure out the kbfuse+Rust situation.\r\n\r\nNote that I needed some new bazil.org/fuse options, so I forked it to github.comkeybase/fuse and added two new features:\r\n* A NoBrowse() option that keeps the redirector from showing up in the Finder (instead, the specific user's mount will show up).\r\n* Adding the requesting user's UID to the context for every request, since `ReadDirAll` needs to know whether the requesting user has a valid mountpoint or not.  The bazil.org/fuse interface for `ReadDirAll` doesn't pass this down, so putting it in the context seemed like the easiest option for now.\r\n\r\nIssue: KBFS-2774","created_at":"2018-02-28T20:58:07Z","updated_at":"2018-02-28T21:47:43Z","closed_at":null,"merged_at":null,"merge_commit_sha":"437c5c76f895a2fc4092ddecb665a8ea1424e823","assignee":null,"assignees":[],"requested_reviewers":[{"login":"jzila","id":59594,"avatar_url":"https://avatars1.githubusercontent.com/u/59594?v=4","gravatar_id":"","url":"https://api.github.com/users/jzila","html_url":"https://github.com/jzila","followers_url":"https://api.github.com/users/jzila/followers","following_url":"https://api.github.com/users/jzila/following{/other_user}","gists_url":"https://api.github.com/users/jzila/gists{/gist_id}","starred_url":"https://api.github.com/users/jzila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzila/subscriptions","organizations_url":"https://api.github.com/users/jzila/orgs","repos_url":"https://api.github.com/users/jzila/repos","events_url":"https://api.github.com/users/jzila/events{/privacy}","received_events_url":"https://api.github.com/users/jzila/received_events","type":"User","site_admin":false},{"login":"songgao","id":255797,"avatar_url":"https://avatars3.githubusercontent.com/u/255797?v=4","gravatar_id":"","url":"https://api.github.com/users/songgao","html_url":"https://github.com/songgao","followers_url":"https://api.github.com/users/songgao/followers","following_url":"https://api.github.com/users/songgao/following{/other_user}","gists_url":"https://api.github.com/users/songgao/gists{/gist_id}","starred_url":"https://api.github.com/users/songgao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songgao/subscriptions","organizations_url":"https://api.github.com/users/songgao/orgs","repos_url":"https://api.github.com/users/songgao/repos","events_url":"https://api.github.com/users/songgao/events{/privacy}","received_events_url":"https://api.github.com/users/songgao/received_events","type":"User","site_admin":false},{"login":"akalin-keybase","id":13270622,"avatar_url":"https://avatars3.githubusercontent.com/u/13270622?v=4","gravatar_id":"","url":"https://api.github.com/users/akalin-keybase","html_url":"https://github.com/akalin-keybase","followers_url":"https://api.github.com/users/akalin-keybase/followers","following_url":"https://api.github.com/users/akalin-keybase/following{/other_user}","gists_url":"https://api.github.com/users/akalin-keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/akalin-keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akalin-keybase/subscriptions","organizations_url":"https://api.github.com/users/akalin-keybase/orgs","repos_url":"https://api.github.com/users/akalin-keybase/repos","events_url":"https://api.github.com/users/akalin-keybase/events{/privacy}","received_events_url":"https://api.github.com/users/akalin-keybase/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496/commits","review_comments_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496/comments","review_comment_url":"https://api.github.com/repos/keybase/kbfs/pulls/comments{/number}","comments_url":"https://api.github.com/repos/keybase/kbfs/issues/1496/comments","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/a375bbaa852f7c4c5475526da029481d313d80e8","head":{"label":"keybase:strib/KBFS-2774-mount-redirector","ref":"strib/KBFS-2774-mount-redirector","sha":"a375bbaa852f7c4c5475526da029481d313d80e8","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":59787605,"name":"kbfs","full_name":"keybase/kbfs","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/kbfs","description":"Keybase Filesystem (KBFS)","fork":false,"url":"https://api.github.com/repos/keybase/kbfs","forks_url":"https://api.github.com/repos/keybase/kbfs/forks","keys_url":"https://api.github.com/repos/keybase/kbfs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/kbfs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/kbfs/teams","hooks_url":"https://api.github.com/repos/keybase/kbfs/hooks","issue_events_url":"https://api.github.com/repos/keybase/kbfs/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/kbfs/events","assignees_url":"https://api.github.com/repos/keybase/kbfs/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/kbfs/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/kbfs/tags","blobs_url":"https://api.github.com/repos/keybase/kbfs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/kbfs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/kbfs/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/kbfs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/kbfs/languages","stargazers_url":"https://api.github.com/repos/keybase/kbfs/stargazers","contributors_url":"https://api.github.com/repos/keybase/kbfs/contributors","subscribers_url":"https://api.github.com/repos/keybase/kbfs/subscribers","subscription_url":"https://api.github.com/repos/keybase/kbfs/subscription","commits_url":"https://api.github.com/repos/keybase/kbfs/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/kbfs/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/kbfs/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/kbfs/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/kbfs/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/kbfs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/kbfs/merges","archive_url":"https://api.github.com/repos/keybase/kbfs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/kbfs/downloads","issues_url":"https://api.github.com/repos/keybase/kbfs/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/kbfs/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/kbfs/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/kbfs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/kbfs/labels{/name}","releases_url":"https://api.github.com/repos/keybase/kbfs/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/kbfs/deployments","created_at":"2016-05-26T22:37:42Z","updated_at":"2018-02-28T02:25:38Z","pushed_at":"2018-02-28T21:03:09Z","git_url":"git://github.com/keybase/kbfs.git","ssh_url":"git@github.com:keybase/kbfs.git","clone_url":"https://github.com/keybase/kbfs.git","svn_url":"https://github.com/keybase/kbfs","homepage":"https://keybase.io/docs/kbfs","size":48520,"stargazers_count":885,"watchers_count":885,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":76,"mirror_url":null,"archived":false,"open_issues_count":46,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":76,"open_issues":46,"watchers":885,"default_branch":"master"}},"base":{"label":"keybase:master","ref":"master","sha":"478a58b55a4605e2abe8699e32adc066bf1df7ee","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":59787605,"name":"kbfs","full_name":"keybase/kbfs","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/kbfs","description":"Keybase Filesystem (KBFS)","fork":false,"url":"https://api.github.com/repos/keybase/kbfs","forks_url":"https://api.github.com/repos/keybase/kbfs/forks","keys_url":"https://api.github.com/repos/keybase/kbfs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/kbfs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/kbfs/teams","hooks_url":"https://api.github.com/repos/keybase/kbfs/hooks","issue_events_url":"https://api.github.com/repos/keybase/kbfs/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/kbfs/events","assignees_url":"https://api.github.com/repos/keybase/kbfs/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/kbfs/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/kbfs/tags","blobs_url":"https://api.github.com/repos/keybase/kbfs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/kbfs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/kbfs/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/kbfs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/kbfs/languages","stargazers_url":"https://api.github.com/repos/keybase/kbfs/stargazers","contributors_url":"https://api.github.com/repos/keybase/kbfs/contributors","subscribers_url":"https://api.github.com/repos/keybase/kbfs/subscribers","subscription_url":"https://api.github.com/repos/keybase/kbfs/subscription","commits_url":"https://api.github.com/repos/keybase/kbfs/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/kbfs/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/kbfs/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/kbfs/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/kbfs/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/kbfs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/kbfs/merges","archive_url":"https://api.github.com/repos/keybase/kbfs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/kbfs/downloads","issues_url":"https://api.github.com/repos/keybase/kbfs/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/kbfs/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/kbfs/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/kbfs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/kbfs/labels{/name}","releases_url":"https://api.github.com/repos/keybase/kbfs/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/kbfs/deployments","created_at":"2016-05-26T22:37:42Z","updated_at":"2018-02-28T02:25:38Z","pushed_at":"2018-02-28T21:03:09Z","git_url":"git://github.com/keybase/kbfs.git","ssh_url":"git@github.com:keybase/kbfs.git","clone_url":"https://github.com/keybase/kbfs.git","svn_url":"https://github.com/keybase/kbfs","homepage":"https://keybase.io/docs/kbfs","size":48520,"stargazers_count":885,"watchers_count":885,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":76,"mirror_url":null,"archived":false,"open_issues_count":46,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":76,"open_issues":46,"watchers":885,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496"},"html":{"href":"https://github.com/keybase/kbfs/pull/1496"},"issue":{"href":"https://api.github.com/repos/keybase/kbfs/issues/1496"},"comments":{"href":"https://api.github.com/repos/keybase/kbfs/issues/1496/comments"},"review_comments":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496/comments"},"review_comment":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496/commits"},"statuses":{"href":"https://api.github.com/repos/keybase/kbfs/statuses/a375bbaa852f7c4c5475526da029481d313d80e8"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-02-28T21:47:43Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312663913","type":"PullRequestEvent","actor":{"id":11968340,"login":"buoyad","display_login":"buoyad","gravatar_id":"","url":"https://api.github.com/users/buoyad","avatar_url":"https://avatars.githubusercontent.com/u/11968340?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"action":"opened","number":10734,"pull_request":{"url":"https://api.github.com/repos/keybase/client/pulls/10734","id":172081867,"html_url":"https://github.com/keybase/client/pull/10734","diff_url":"https://github.com/keybase/client/pull/10734.diff","patch_url":"https://github.com/keybase/client/pull/10734.patch","issue_url":"https://api.github.com/repos/keybase/client/issues/10734","number":10734,"state":"open","locked":false,"title":"Center role picker","user":{"login":"buoyad","id":11968340,"avatar_url":"https://avatars1.githubusercontent.com/u/11968340?v=4","gravatar_id":"","url":"https://api.github.com/users/buoyad","html_url":"https://github.com/buoyad","followers_url":"https://api.github.com/users/buoyad/followers","following_url":"https://api.github.com/users/buoyad/following{/other_user}","gists_url":"https://api.github.com/users/buoyad/gists{/gist_id}","starred_url":"https://api.github.com/users/buoyad/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/buoyad/subscriptions","organizations_url":"https://api.github.com/users/buoyad/orgs","repos_url":"https://api.github.com/users/buoyad/repos","events_url":"https://api.github.com/users/buoyad/events{/privacy}","received_events_url":"https://api.github.com/users/buoyad/received_events","type":"User","site_admin":false},"body":"Shuffles some styles to re-center the role picker on mobile.\r\n\r\n5S simulator:\r\n<img src=\"https://user-images.githubusercontent.com/11968340/36814782-9e474e60-1ca6-11e8-9dec-c00244a00143.png\" width=\"300px\" />\r\n\r\ndesktop:\r\n<img width=\"712\" alt=\"image\" src=\"https://user-images.githubusercontent.com/11968340/36814815-bba6db24-1ca6-11e8-9905-87e1b66e521f.png\">","created_at":"2018-02-28T21:45:38Z","updated_at":"2018-02-28T21:45:38Z","closed_at":null,"merged_at":null,"merge_commit_sha":null,"assignee":null,"assignees":[],"requested_reviewers":[],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/keybase/client/pulls/10734/commits","review_comments_url":"https://api.github.com/repos/keybase/client/pulls/10734/comments","review_comment_url":"https://api.github.com/repos/keybase/client/pulls/comments{/number}","comments_url":"https://api.github.com/repos/keybase/client/issues/10734/comments","statuses_url":"https://api.github.com/repos/keybase/client/statuses/d05341d5db8c3013f116a592e101ea8be9482fcc","head":{"label":"keybase:danny/DESKTOP-6158/center-role-picker","ref":"danny/DESKTOP-6158/center-role-picker","sha":"d05341d5db8c3013f116a592e101ea8be9482fcc","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T21:41:21Z","pushed_at":"2018-02-28T21:44:20Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223155,"stargazers_count":3297,"watchers_count":3297,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1894,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1894,"watchers":3297,"default_branch":"master"}},"base":{"label":"keybase:master","ref":"master","sha":"c88f6f7e0a0780839f3010f61192856853f208cd","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T21:41:21Z","pushed_at":"2018-02-28T21:44:20Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223155,"stargazers_count":3297,"watchers_count":3297,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1894,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1894,"watchers":3297,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/keybase/client/pulls/10734"},"html":{"href":"https://github.com/keybase/client/pull/10734"},"issue":{"href":"https://api.github.com/repos/keybase/client/issues/10734"},"comments":{"href":"https://api.github.com/repos/keybase/client/issues/10734/comments"},"review_comments":{"href":"https://api.github.com/repos/keybase/client/pulls/10734/comments"},"review_comment":{"href":"https://api.github.com/repos/keybase/client/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/keybase/client/pulls/10734/commits"},"statuses":{"href":"https://api.github.com/repos/keybase/client/statuses/d05341d5db8c3013f116a592e101ea8be9482fcc"}},"author_association":"MEMBER","merged":false,"mergeable":null,"rebaseable":null,"mergeable_state":"unknown","merged_by":null,"comments":0,"review_comments":0,"maintainer_can_modify":false,"commits":1,"additions":6,"deletions":8,"changed_files":1}},"public":true,"created_at":"2018-02-28T21:45:39Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312657704","type":"PushEvent","actor":{"id":8516691,"login":"strib","display_login":"strib","gravatar_id":"","url":"https://api.github.com/users/strib","avatar_url":"https://avatars.githubusercontent.com/u/8516691?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"push_id":2366737434,"size":1,"distinct_size":1,"ref":"refs/heads/strib/KBFS-2798-turn-off-root-redirector","head":"4b3d51122c7209ce0d6b3f10f5d0cebd54b8a02b","before":"ee1dd39ef590e8a447ae2bf25d96e52d11c1d015","commits":[{"sha":"4b3d51122c7209ce0d6b3f10f5d0cebd54b8a02b","author":{"email":"strib@alum.mit.edu","name":"Jeremy Stribling"},"message":"packaging: use new keybase-redirector Go location\n\nIssue: KBFS-2774","distinct":true,"url":"https://api.github.com/repos/keybase/client/commits/4b3d51122c7209ce0d6b3f10f5d0cebd54b8a02b"}]},"public":true,"created_at":"2018-02-28T21:44:20Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312646812","type":"PullRequestReviewCommentEvent","actor":{"id":860932,"login":"oconnor663","display_login":"oconnor663","gravatar_id":"","url":"https://api.github.com/users/oconnor663","avatar_url":"https://avatars.githubusercontent.com/u/860932?"},"repo":{"id":59787605,"name":"keybase/kbfs","url":"https://api.github.com/repos/keybase/kbfs"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/keybase/kbfs/pulls/comments/171394506","pull_request_review_id":100240041,"id":171394506,"diff_hunk":"@@ -0,0 +1,267 @@\n+// Copyright 2018 Keybase Inc. All rights reserved.\n+// Use of this source code is governed by a BSD\n+// license that can be found in the LICENSE file.\n+\n+package main\n+\n+import (\n+\t\"context\"\n+\t\"fmt\"\n+\t\"os\"\n+\t\"os/signal\"\n+\t\"os/user\"\n+\t\"path/filepath\"\n+\t\"runtime\"\n+\t\"sort\"\n+\t\"strconv\"\n+\t\"strings\"\n+\t\"sync\"\n+\t\"syscall\"\n+\t\"time\"\n+\n+\t\"bazil.org/fuse\"\n+\t\"bazil.org/fuse/fs\"\n+\t\"github.com/strib/gomounts\"\n+)\n+\n+var kbfusePath = fuse.OSXFUSEPaths{\n+\tDevicePrefix: \"/dev/kbfuse\",\n+\tLoad:         \"/Library/Filesystems/kbfuse.fs/Contents/Resources/load_kbfuse\",\n+\tMount:        \"/Library/Filesystems/kbfuse.fs/Contents/Resources/mount_kbfuse\",\n+\tDaemonVar:    \"MOUNT_KBFUSE_DAEMON_PATH\",\n+}\n+\n+const (\n+\tmountpointTimeout = 5 * time.Second\n+)\n+\n+type symlink struct {\n+\tlink string\n+}\n+\n+func (s symlink) Attr(ctx context.Context, a *fuse.Attr) (err error) {\n+\ta.Mode = os.ModeSymlink | a.Mode | 0555\n+\ta.Valid = 0\n+\treturn nil\n+}\n+\n+func (s symlink) Readlink(ctx context.Context, req *fuse.ReadlinkRequest) (\n+\tlink string, err error) {\n+\treturn s.link, nil\n+}\n+\n+type cacheEntry struct {\n+\tmountpoint string\n+\ttime       time.Time\n+}\n+\n+type root struct {\n+\tlock            sync.RWMutex\n+\tmountpointCache map[uint32]cacheEntry\n+}\n+\n+func newRoot() *root {\n+\treturn &root{\n+\t\tmountpointCache: make(map[uint32]cacheEntry),\n+\t}\n+}\n+\n+func (r *root) Root() (fs.Node, error) {\n+\treturn r, nil\n+}\n+\n+func (r *root) Attr(ctx context.Context, attr *fuse.Attr) error {\n+\tattr.Mode = os.ModeDir | 0555\n+\treturn nil\n+}\n+\n+func (r *root) getCachedMountpoint(uid uint32) string {\n+\tr.lock.RLock()\n+\tdefer r.lock.RUnlock()\n+\tentry, ok := r.mountpointCache[uid]\n+\tif !ok {\n+\t\treturn \"\"\n+\t}\n+\tnow := time.Now()\n+\tif now.Sub(entry.time) > mountpointTimeout {\n+\t\t// Don't bother deleting the entry, since the caller should\n+\t\t// just overwrite it.\n+\t\treturn \"\"\n+\t}\n+\treturn entry.mountpoint\n+}\n+\n+func (r *root) findKBFSMount(ctx context.Context) (\n+\tmountpoint string, err error) {\n+\tuid := ctx.Value(fs.CtxHeaderUIDKey).(uint32)\n+\t// Don't let the root see anything here; we don't want a symlink\n+\t// loop back to this mount.\n+\tif uid == 0 {\n+\t\treturn \"\", fuse.ENOENT\n+\t}\n+\n+\tmountpoint = r.getCachedMountpoint(uid)\n+\tif mountpoint != \"\" {\n+\t\treturn mountpoint, nil\n+\t}\n+\n+\tdefer func() {\n+\t\tif err != nil {\n+\t\t\treturn\n+\t\t}\n+\t\t// Cache the entry if we didn't hit an error.\n+\t\tr.lock.Lock()\n+\t\tdefer r.lock.Unlock()\n+\t\tr.mountpointCache[uid] = cacheEntry{\n+\t\t\tmountpoint: mountpoint,\n+\t\t\ttime:       time.Now(),\n+\t\t}\n+\t}()\n+\n+\tu, err := user.LookupId(strconv.FormatUint(uint64(uid), 10))\n+\tif err != nil {\n+\t\treturn \"\", err\n+\t}\n+\n+\tvols, err := gomounts.GetMountedVolumes()\n+\tif err != nil {\n+\t\treturn \"\", err\n+\t}\n+\tfuseType := \"fuse\"\n+\tif runtime.GOOS == \"darwin\" {\n+\t\tfuseType = \"kbfuse\"\n+\t}\n+\tvar fuseMountPoints []string\n+\tfor _, v := range vols {\n+\t\tif v.Type != fuseType {\n+\t\t\tcontinue\n+\t\t}\n+\t\tif v.Owner != u.Uid {\n+\t\t\tcontinue\n+\t\t}\n+\t\tfuseMountPoints = append(fuseMountPoints, v.Path)\n+\t}\n+\n+\tif len(fuseMountPoints) == 0 {\n+\t\treturn \"\", fuse.ENOENT\n+\t}\n+\tif len(fuseMountPoints) == 1 {\n+\t\treturn fuseMountPoints[0], nil\n+\t}\n+\n+\t// If there is more than one, pick the first one alphabetically\n+\t// that has \"keybase\" in the path.\n+\tsort.Strings(fuseMountPoints)\n+\tfor _, mp := range fuseMountPoints {\n+\t\t// TODO: a better regexp that will rule out keybase.staging if\n+\t\t// we're in prod mode, etc.\n+\t\tif !strings.Contains(mp, \"keybase\") {\n+\t\t\tcontinue\n+\t\t}\n+\t\t// Double-check that this is a real KBFS mount.\n+\t\tif _, err := os.Stat(filepath.Join(mp, \".kbfs_error\")); err != nil {\n+\t\t\tcontinue\n+\t\t}\n+\t\treturn mp, nil\n+\t}\n+\n+\t// Give up and return the first one.\n+\treturn fuseMountPoints[0], nil\n+}\n+\n+func (r *root) ReadDirAll(ctx context.Context) ([]fuse.Dirent, error) {\n+\t_, err := r.findKBFSMount(ctx)\n+\tif err != nil {\n+\t\tif err == fuse.ENOENT {\n+\t\t\treturn []fuse.Dirent{}, nil\n+\t\t} else {\n+\t\t\treturn []fuse.Dirent{}, err\n+\t\t}\n+\t}\n+\n+\t// TODO: show the `kbfs.error.txt\" and \"kbfs.nologin.txt\" files if\n+\t// they exist?  As root, it is hard to figure out if they're\n+\t// there, though.\n+\treturn []fuse.Dirent{\n+\t\t{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"private\",\n+\t\t},\n+\t\t{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"public\",\n+\t\t},\n+\t\tfuse.Dirent{\n+\t\t\tType: fuse.DT_Link,\n+\t\t\tName: \"team\",\n+\t\t},\n+\t}, nil\n+}\n+\n+func (r *root) Lookup(\n+\tctx context.Context, req *fuse.LookupRequest, resp *fuse.LookupResponse) (\n+\tn fs.Node, err error) {\n+\tmountpoint, err := r.findKBFSMount(ctx)\n+\tif err != nil {\n+\t\treturn nil, err\n+\t}\n+\n+\tresp.EntryValid = 0\n+\tswitch req.Name {\n+\tcase \"private\", \"public\", \"team\", \".kbfs_error\", \".kbfs_metrics\",\n+\t\t\".kbfs_profiles\", \".kbfs_reset_caches\", \".kbfs_status\",\n+\t\t\"kbfs.error.txt\", \"kbfs.nologin.txt\", \".kbfs_enable_auto_journals\",\n+\t\t\".kbfs_disable_auto_journals\", \".kbfs_enable_block_prefetching\",\n+\t\t\".kbfs_disable_block_prefetching\", \".kbfs_enable_debug_server\",\n+\t\t\".kbfs_disable_debug_server\":\n+\t\treturn symlink{filepath.Join(mountpoint, req.Name)}, nil\n+\t}\n+\treturn nil, fuse.ENOENT\n+}\n+\n+func main() {\n+\tcurrUser, err := user.Current()\n+\tif err != nil {\n+\t\tpanic(err)\n+\t}\n+\tif currUser.Uid != \"0\" {\n+\t\truntime.LockOSThread()\n+\t\t_, _, errNo := syscall.Syscall(syscall.SYS_SETUID, 0, 0, 0)","path":"redirector/go/main.go","position":228,"original_position":229,"commit_id":"a375bbaa852f7c4c5475526da029481d313d80e8","original_commit_id":"4a9c54931293f10b5568f92acdec99a7e74547c5","user":{"login":"oconnor663","id":860932,"avatar_url":"https://avatars0.githubusercontent.com/u/860932?v=4","gravatar_id":"","url":"https://api.github.com/users/oconnor663","html_url":"https://github.com/oconnor663","followers_url":"https://api.github.com/users/oconnor663/followers","following_url":"https://api.github.com/users/oconnor663/following{/other_user}","gists_url":"https://api.github.com/users/oconnor663/gists{/gist_id}","starred_url":"https://api.github.com/users/oconnor663/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/oconnor663/subscriptions","organizations_url":"https://api.github.com/users/oconnor663/orgs","repos_url":"https://api.github.com/users/oconnor663/repos","events_url":"https://api.github.com/users/oconnor663/events{/privacy}","received_events_url":"https://api.github.com/users/oconnor663/received_events","type":"User","site_admin":false},"body":"Oof, why does this work with a Rust binary but not a Go binary? I just rechecked that it does. (I wasn't able to use `/tmp` for everything though, because it's a `nosuid` mount on my system. Hopefully that doesn't matter here.)","created_at":"2018-02-28T21:42:05Z","updated_at":"2018-02-28T21:42:05Z","html_url":"https://github.com/keybase/kbfs/pull/1496#discussion_r171394506","pull_request_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/comments/171394506"},"html":{"href":"https://github.com/keybase/kbfs/pull/1496#discussion_r171394506"},"pull_request":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496"}},"in_reply_to_id":171385042},"pull_request":{"url":"https://api.github.com/repos/keybase/kbfs/pulls/1496","id":172070599,"html_url":"https://github.com/keybase/kbfs/pull/1496","diff_url":"https://github.com/keybase/kbfs/pull/1496.diff","patch_url":"https://github.com/keybase/kbfs/pull/1496.patch","issue_url":"https://api.github.com/repos/keybase/kbfs/issues/1496","number":1496,"state":"open","locked":false,"title":"redirector: a Go implementation for the root redirector","user":{"login":"strib","id":8516691,"avatar_url":"https://avatars0.githubusercontent.com/u/8516691?v=4","gravatar_id":"","url":"https://api.github.com/users/strib","html_url":"https://github.com/strib","followers_url":"https://api.github.com/users/strib/followers","following_url":"https://api.github.com/users/strib/following{/other_user}","gists_url":"https://api.github.com/users/strib/gists{/gist_id}","starred_url":"https://api.github.com/users/strib/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/strib/subscriptions","organizations_url":"https://api.github.com/users/strib/orgs","repos_url":"https://api.github.com/users/strib/repos","events_url":"https://api.github.com/users/strib/events{/privacy}","received_events_url":"https://api.github.com/users/strib/received_events","type":"User","site_admin":false},"body":"This implementation of the root redirector will likely be used for macOS, at least until we figure out the kbfuse+Rust situation.\r\n\r\nNote that I needed some new bazil.org/fuse options, so I forked it to github.comkeybase/fuse and added two new features:\r\n* A NoBrowse() option that keeps the redirector from showing up in the Finder (instead, the specific user's mount will show up).\r\n* Adding the requesting user's UID to the context for every request, since `ReadDirAll` needs to know whether the requesting user has a valid mountpoint or not.  The bazil.org/fuse interface for `ReadDirAll` doesn't pass this down, so putting it in the context seemed like the easiest option for now.\r\n\r\nIssue: KBFS-2774","created_at":"2018-02-28T20:58:07Z","updated_at":"2018-02-28T21:42:05Z","closed_at":null,"merged_at":null,"merge_commit_sha":"437c5c76f895a2fc4092ddecb665a8ea1424e823","assignee":null,"assignees":[],"requested_reviewers":[{"login":"jzila","id":59594,"avatar_url":"https://avatars1.githubusercontent.com/u/59594?v=4","gravatar_id":"","url":"https://api.github.com/users/jzila","html_url":"https://github.com/jzila","followers_url":"https://api.github.com/users/jzila/followers","following_url":"https://api.github.com/users/jzila/following{/other_user}","gists_url":"https://api.github.com/users/jzila/gists{/gist_id}","starred_url":"https://api.github.com/users/jzila/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/jzila/subscriptions","organizations_url":"https://api.github.com/users/jzila/orgs","repos_url":"https://api.github.com/users/jzila/repos","events_url":"https://api.github.com/users/jzila/events{/privacy}","received_events_url":"https://api.github.com/users/jzila/received_events","type":"User","site_admin":false},{"login":"songgao","id":255797,"avatar_url":"https://avatars3.githubusercontent.com/u/255797?v=4","gravatar_id":"","url":"https://api.github.com/users/songgao","html_url":"https://github.com/songgao","followers_url":"https://api.github.com/users/songgao/followers","following_url":"https://api.github.com/users/songgao/following{/other_user}","gists_url":"https://api.github.com/users/songgao/gists{/gist_id}","starred_url":"https://api.github.com/users/songgao/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/songgao/subscriptions","organizations_url":"https://api.github.com/users/songgao/orgs","repos_url":"https://api.github.com/users/songgao/repos","events_url":"https://api.github.com/users/songgao/events{/privacy}","received_events_url":"https://api.github.com/users/songgao/received_events","type":"User","site_admin":false},{"login":"akalin-keybase","id":13270622,"avatar_url":"https://avatars3.githubusercontent.com/u/13270622?v=4","gravatar_id":"","url":"https://api.github.com/users/akalin-keybase","html_url":"https://github.com/akalin-keybase","followers_url":"https://api.github.com/users/akalin-keybase/followers","following_url":"https://api.github.com/users/akalin-keybase/following{/other_user}","gists_url":"https://api.github.com/users/akalin-keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/akalin-keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akalin-keybase/subscriptions","organizations_url":"https://api.github.com/users/akalin-keybase/orgs","repos_url":"https://api.github.com/users/akalin-keybase/repos","events_url":"https://api.github.com/users/akalin-keybase/events{/privacy}","received_events_url":"https://api.github.com/users/akalin-keybase/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496/commits","review_comments_url":"https://api.github.com/repos/keybase/kbfs/pulls/1496/comments","review_comment_url":"https://api.github.com/repos/keybase/kbfs/pulls/comments{/number}","comments_url":"https://api.github.com/repos/keybase/kbfs/issues/1496/comments","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/a375bbaa852f7c4c5475526da029481d313d80e8","head":{"label":"keybase:strib/KBFS-2774-mount-redirector","ref":"strib/KBFS-2774-mount-redirector","sha":"a375bbaa852f7c4c5475526da029481d313d80e8","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":59787605,"name":"kbfs","full_name":"keybase/kbfs","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/kbfs","description":"Keybase Filesystem (KBFS)","fork":false,"url":"https://api.github.com/repos/keybase/kbfs","forks_url":"https://api.github.com/repos/keybase/kbfs/forks","keys_url":"https://api.github.com/repos/keybase/kbfs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/kbfs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/kbfs/teams","hooks_url":"https://api.github.com/repos/keybase/kbfs/hooks","issue_events_url":"https://api.github.com/repos/keybase/kbfs/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/kbfs/events","assignees_url":"https://api.github.com/repos/keybase/kbfs/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/kbfs/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/kbfs/tags","blobs_url":"https://api.github.com/repos/keybase/kbfs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/kbfs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/kbfs/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/kbfs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/kbfs/languages","stargazers_url":"https://api.github.com/repos/keybase/kbfs/stargazers","contributors_url":"https://api.github.com/repos/keybase/kbfs/contributors","subscribers_url":"https://api.github.com/repos/keybase/kbfs/subscribers","subscription_url":"https://api.github.com/repos/keybase/kbfs/subscription","commits_url":"https://api.github.com/repos/keybase/kbfs/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/kbfs/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/kbfs/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/kbfs/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/kbfs/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/kbfs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/kbfs/merges","archive_url":"https://api.github.com/repos/keybase/kbfs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/kbfs/downloads","issues_url":"https://api.github.com/repos/keybase/kbfs/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/kbfs/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/kbfs/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/kbfs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/kbfs/labels{/name}","releases_url":"https://api.github.com/repos/keybase/kbfs/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/kbfs/deployments","created_at":"2016-05-26T22:37:42Z","updated_at":"2018-02-28T02:25:38Z","pushed_at":"2018-02-28T21:03:09Z","git_url":"git://github.com/keybase/kbfs.git","ssh_url":"git@github.com:keybase/kbfs.git","clone_url":"https://github.com/keybase/kbfs.git","svn_url":"https://github.com/keybase/kbfs","homepage":"https://keybase.io/docs/kbfs","size":48520,"stargazers_count":885,"watchers_count":885,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":76,"mirror_url":null,"archived":false,"open_issues_count":46,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":76,"open_issues":46,"watchers":885,"default_branch":"master"}},"base":{"label":"keybase:master","ref":"master","sha":"478a58b55a4605e2abe8699e32adc066bf1df7ee","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":59787605,"name":"kbfs","full_name":"keybase/kbfs","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/kbfs","description":"Keybase Filesystem (KBFS)","fork":false,"url":"https://api.github.com/repos/keybase/kbfs","forks_url":"https://api.github.com/repos/keybase/kbfs/forks","keys_url":"https://api.github.com/repos/keybase/kbfs/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/kbfs/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/kbfs/teams","hooks_url":"https://api.github.com/repos/keybase/kbfs/hooks","issue_events_url":"https://api.github.com/repos/keybase/kbfs/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/kbfs/events","assignees_url":"https://api.github.com/repos/keybase/kbfs/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/kbfs/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/kbfs/tags","blobs_url":"https://api.github.com/repos/keybase/kbfs/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/kbfs/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/kbfs/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/kbfs/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/kbfs/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/kbfs/languages","stargazers_url":"https://api.github.com/repos/keybase/kbfs/stargazers","contributors_url":"https://api.github.com/repos/keybase/kbfs/contributors","subscribers_url":"https://api.github.com/repos/keybase/kbfs/subscribers","subscription_url":"https://api.github.com/repos/keybase/kbfs/subscription","commits_url":"https://api.github.com/repos/keybase/kbfs/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/kbfs/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/kbfs/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/kbfs/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/kbfs/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/kbfs/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/kbfs/merges","archive_url":"https://api.github.com/repos/keybase/kbfs/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/kbfs/downloads","issues_url":"https://api.github.com/repos/keybase/kbfs/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/kbfs/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/kbfs/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/kbfs/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/kbfs/labels{/name}","releases_url":"https://api.github.com/repos/keybase/kbfs/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/kbfs/deployments","created_at":"2016-05-26T22:37:42Z","updated_at":"2018-02-28T02:25:38Z","pushed_at":"2018-02-28T21:03:09Z","git_url":"git://github.com/keybase/kbfs.git","ssh_url":"git@github.com:keybase/kbfs.git","clone_url":"https://github.com/keybase/kbfs.git","svn_url":"https://github.com/keybase/kbfs","homepage":"https://keybase.io/docs/kbfs","size":48520,"stargazers_count":885,"watchers_count":885,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":76,"mirror_url":null,"archived":false,"open_issues_count":46,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":76,"open_issues":46,"watchers":885,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496"},"html":{"href":"https://github.com/keybase/kbfs/pull/1496"},"issue":{"href":"https://api.github.com/repos/keybase/kbfs/issues/1496"},"comments":{"href":"https://api.github.com/repos/keybase/kbfs/issues/1496/comments"},"review_comments":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496/comments"},"review_comment":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/keybase/kbfs/pulls/1496/commits"},"statuses":{"href":"https://api.github.com/repos/keybase/kbfs/statuses/a375bbaa852f7c4c5475526da029481d313d80e8"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-02-28T21:42:05Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312643297","type":"CreateEvent","actor":{"id":11968340,"login":"buoyad","display_login":"buoyad","gravatar_id":"","url":"https://api.github.com/users/buoyad","avatar_url":"https://avatars.githubusercontent.com/u/11968340?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"ref":"danny/DESKTOP-6158/center-role-picker","ref_type":"branch","master_branch":"master","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","pusher_type":"user"},"public":true,"created_at":"2018-02-28T21:41:21Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312637689","type":"IssueCommentEvent","actor":{"id":2508,"login":"patrickxb","display_login":"patrickxb","gravatar_id":"","url":"https://api.github.com/users/patrickxb","avatar_url":"https://avatars.githubusercontent.com/u/2508?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"action":"created","issue":{"url":"https://api.github.com/repos/keybase/client/issues/10651","repository_url":"https://api.github.com/repos/keybase/client","labels_url":"https://api.github.com/repos/keybase/client/issues/10651/labels{/name}","comments_url":"https://api.github.com/repos/keybase/client/issues/10651/comments","events_url":"https://api.github.com/repos/keybase/client/issues/10651/events","html_url":"https://github.com/keybase/client/pull/10651","id":299199852,"number":10651,"title":"Bundle any existing trace files during a log send","user":{"login":"akalin-keybase","id":13270622,"avatar_url":"https://avatars3.githubusercontent.com/u/13270622?v=4","gravatar_id":"","url":"https://api.github.com/users/akalin-keybase","html_url":"https://github.com/akalin-keybase","followers_url":"https://api.github.com/users/akalin-keybase/followers","following_url":"https://api.github.com/users/akalin-keybase/following{/other_user}","gists_url":"https://api.github.com/users/akalin-keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/akalin-keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/akalin-keybase/subscriptions","organizations_url":"https://api.github.com/users/akalin-keybase/orgs","repos_url":"https://api.github.com/users/akalin-keybase/repos","events_url":"https://api.github.com/users/akalin-keybase/events{/privacy}","received_events_url":"https://api.github.com/users/akalin-keybase/received_events","type":"User","site_admin":false},"labels":[],"state":"open","locked":false,"assignee":null,"assignees":[],"milestone":null,"comments":2,"created_at":"2018-02-22T02:21:35Z","updated_at":"2018-02-28T21:40:13Z","closed_at":null,"author_association":"CONTRIBUTOR","pull_request":{"url":"https://api.github.com/repos/keybase/client/pulls/10651","html_url":"https://github.com/keybase/client/pull/10651","diff_url":"https://github.com/keybase/client/pull/10651.diff","patch_url":"https://github.com/keybase/client/pull/10651.patch"},"body":"Put it in a single .tar.gz to upload to the server."},"comment":{"url":"https://api.github.com/repos/keybase/client/issues/comments/369392416","html_url":"https://github.com/keybase/client/pull/10651#issuecomment-369392416","issue_url":"https://api.github.com/repos/keybase/client/issues/10651","id":369392416,"user":{"login":"patrickxb","id":2508,"avatar_url":"https://avatars2.githubusercontent.com/u/2508?v=4","gravatar_id":"","url":"https://api.github.com/users/patrickxb","html_url":"https://github.com/patrickxb","followers_url":"https://api.github.com/users/patrickxb/followers","following_url":"https://api.github.com/users/patrickxb/following{/other_user}","gists_url":"https://api.github.com/users/patrickxb/gists{/gist_id}","starred_url":"https://api.github.com/users/patrickxb/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/patrickxb/subscriptions","organizations_url":"https://api.github.com/users/patrickxb/orgs","repos_url":"https://api.github.com/users/patrickxb/repos","events_url":"https://api.github.com/users/patrickxb/events{/privacy}","received_events_url":"https://api.github.com/users/patrickxb/received_events","type":"User","site_admin":false},"created_at":"2018-02-28T21:40:13Z","updated_at":"2018-02-28T21:40:13Z","author_association":"CONTRIBUTOR","body":"I'm still concerned about users sending in potentially sensitive data.\r\n\r\nIf the button to generate a trace file is now hidden and only admins will use it, it seems fine to get the trace files off via usb during performance testing.\r\n\r\n@cjb i'm curious what you think.\r\n"}},"public":true,"created_at":"2018-02-28T21:40:13Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312584333","type":"PullRequestReviewCommentEvent","actor":{"id":1144020,"login":"joshblum","display_login":"joshblum","gravatar_id":"","url":"https://api.github.com/users/joshblum","avatar_url":"https://avatars.githubusercontent.com/u/1144020?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"action":"created","comment":{"url":"https://api.github.com/repos/keybase/client/pulls/comments/171391102","pull_request_review_id":100235897,"id":171391102,"diff_hunk":"@@ -16,15 +16,10 @@ const (\n )\n \n func TestBackgroundIdentifier(t *testing.T) {\n-\tdoWithSigChainVersions(func(sigVersion libkb.SigVersion) {\n-\t\t_testBackgroundIdentifier(t, sigVersion)\n-\t})\n-}\n-\n-func _testBackgroundIdentifier(t *testing.T, sigVersion libkb.SigVersion) {\n \tt.Skip()\n \ttc := SetupEngineTest(t, \"track\")\n \tdefer tc.Cleanup()\n+\tsigVersion := libkb.GetDefaultSigVersion(tc.G)","path":"go/engine/bg_identifier_test.go","position":13,"original_position":13,"commit_id":"63dd23b0a7c79a1e6e9b10b15180e388ec3e696d","original_commit_id":"63dd23b0a7c79a1e6e9b10b15180e388ec3e696d","user":{"login":"joshblum","id":1144020,"avatar_url":"https://avatars0.githubusercontent.com/u/1144020?v=4","gravatar_id":"","url":"https://api.github.com/users/joshblum","html_url":"https://github.com/joshblum","followers_url":"https://api.github.com/users/joshblum/followers","following_url":"https://api.github.com/users/joshblum/following{/other_user}","gists_url":"https://api.github.com/users/joshblum/gists{/gist_id}","starred_url":"https://api.github.com/users/joshblum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshblum/subscriptions","organizations_url":"https://api.github.com/users/joshblum/orgs","repos_url":"https://api.github.com/users/joshblum/repos","events_url":"https://api.github.com/users/joshblum/events{/privacy}","received_events_url":"https://api.github.com/users/joshblum/received_events","type":"User","site_admin":false},"body":"note: currently this returns V1 unless you're feature flagged as admin ","created_at":"2018-02-28T21:29:36Z","updated_at":"2018-02-28T21:29:36Z","html_url":"https://github.com/keybase/client/pull/10733#discussion_r171391102","pull_request_url":"https://api.github.com/repos/keybase/client/pulls/10733","author_association":"CONTRIBUTOR","_links":{"self":{"href":"https://api.github.com/repos/keybase/client/pulls/comments/171391102"},"html":{"href":"https://github.com/keybase/client/pull/10733#discussion_r171391102"},"pull_request":{"href":"https://api.github.com/repos/keybase/client/pulls/10733"}}},"pull_request":{"url":"https://api.github.com/repos/keybase/client/pulls/10733","id":172077805,"html_url":"https://github.com/keybase/client/pull/10733","diff_url":"https://github.com/keybase/client/pull/10733.diff","patch_url":"https://github.com/keybase/client/pull/10733.patch","issue_url":"https://api.github.com/repos/keybase/client/issues/10733","number":10733,"state":"open","locked":false,"title":"Reduce testing time for sigchain related actions","user":{"login":"joshblum","id":1144020,"avatar_url":"https://avatars0.githubusercontent.com/u/1144020?v=4","gravatar_id":"","url":"https://api.github.com/users/joshblum","html_url":"https://github.com/joshblum","followers_url":"https://api.github.com/users/joshblum/followers","following_url":"https://api.github.com/users/joshblum/following{/other_user}","gists_url":"https://api.github.com/users/joshblum/gists{/gist_id}","starred_url":"https://api.github.com/users/joshblum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshblum/subscriptions","organizations_url":"https://api.github.com/users/joshblum/orgs","repos_url":"https://api.github.com/users/joshblum/repos","events_url":"https://api.github.com/users/joshblum/events{/privacy}","received_events_url":"https://api.github.com/users/joshblum/received_events","type":"User","site_admin":false},"body":"With the introduction of sigchain v2 we initially chained all sig chain related tests to test against both versions. This isn't necessary for tests where the sigchain action isn't the primary focus of the test so we try to remove the double testing in places it seemed redundant. \r\n\r\nStarting runtime:\r\n```\r\n$ go test\r\nPASS\r\nok      github.com/keybase/client/go/engine     406.909s\r\n```\r\n\r\nOnly V1:\r\n```\r\n$ go test\r\nPASS\r\nok      github.com/keybase/client/go/engine     327.448s\r\n```\r\n\r\n```\r\nOnly V2:\r\n$ go test\r\nPASS\r\nok      github.com/keybase/client/go/engine     311.891s\r\n```\r\n\r\nAfter cherrypicking:\r\n```\r\n$ go test\r\nPASS\r\nok      github.com/keybase/client/go/engine     335.090s\r\n```\r\n\r\ncc @mmaxim","created_at":"2018-02-28T21:28:39Z","updated_at":"2018-02-28T21:29:36Z","closed_at":null,"merged_at":null,"merge_commit_sha":"269749429661700aa362468b616b3f7b331d727e","assignee":null,"assignees":[],"requested_reviewers":[{"login":"maxtaco","id":866815,"avatar_url":"https://avatars0.githubusercontent.com/u/866815?v=4","gravatar_id":"","url":"https://api.github.com/users/maxtaco","html_url":"https://github.com/maxtaco","followers_url":"https://api.github.com/users/maxtaco/followers","following_url":"https://api.github.com/users/maxtaco/following{/other_user}","gists_url":"https://api.github.com/users/maxtaco/gists{/gist_id}","starred_url":"https://api.github.com/users/maxtaco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maxtaco/subscriptions","organizations_url":"https://api.github.com/users/maxtaco/orgs","repos_url":"https://api.github.com/users/maxtaco/repos","events_url":"https://api.github.com/users/maxtaco/events{/privacy}","received_events_url":"https://api.github.com/users/maxtaco/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/keybase/client/pulls/10733/commits","review_comments_url":"https://api.github.com/repos/keybase/client/pulls/10733/comments","review_comment_url":"https://api.github.com/repos/keybase/client/pulls/comments{/number}","comments_url":"https://api.github.com/repos/keybase/client/issues/10733/comments","statuses_url":"https://api.github.com/repos/keybase/client/statuses/63dd23b0a7c79a1e6e9b10b15180e388ec3e696d","head":{"label":"keybase:joshblum/CORE-7313-sigchain-tests","ref":"joshblum/CORE-7313-sigchain-tests","sha":"63dd23b0a7c79a1e6e9b10b15180e388ec3e696d","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T15:16:50Z","pushed_at":"2018-02-28T21:28:39Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223155,"stargazers_count":3296,"watchers_count":3296,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1893,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1893,"watchers":3296,"default_branch":"master"}},"base":{"label":"keybase:master","ref":"master","sha":"c88f6f7e0a0780839f3010f61192856853f208cd","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T15:16:50Z","pushed_at":"2018-02-28T21:28:39Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223155,"stargazers_count":3296,"watchers_count":3296,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1893,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1893,"watchers":3296,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/keybase/client/pulls/10733"},"html":{"href":"https://github.com/keybase/client/pull/10733"},"issue":{"href":"https://api.github.com/repos/keybase/client/issues/10733"},"comments":{"href":"https://api.github.com/repos/keybase/client/issues/10733/comments"},"review_comments":{"href":"https://api.github.com/repos/keybase/client/pulls/10733/comments"},"review_comment":{"href":"https://api.github.com/repos/keybase/client/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/keybase/client/pulls/10733/commits"},"statuses":{"href":"https://api.github.com/repos/keybase/client/statuses/63dd23b0a7c79a1e6e9b10b15180e388ec3e696d"}},"author_association":"CONTRIBUTOR"}},"public":true,"created_at":"2018-02-28T21:29:36Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312579518","type":"PullRequestEvent","actor":{"id":1144020,"login":"joshblum","display_login":"joshblum","gravatar_id":"","url":"https://api.github.com/users/joshblum","avatar_url":"https://avatars.githubusercontent.com/u/1144020?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"action":"opened","number":10733,"pull_request":{"url":"https://api.github.com/repos/keybase/client/pulls/10733","id":172077805,"html_url":"https://github.com/keybase/client/pull/10733","diff_url":"https://github.com/keybase/client/pull/10733.diff","patch_url":"https://github.com/keybase/client/pull/10733.patch","issue_url":"https://api.github.com/repos/keybase/client/issues/10733","number":10733,"state":"open","locked":false,"title":"Reduce testing time for sigchain related actions","user":{"login":"joshblum","id":1144020,"avatar_url":"https://avatars0.githubusercontent.com/u/1144020?v=4","gravatar_id":"","url":"https://api.github.com/users/joshblum","html_url":"https://github.com/joshblum","followers_url":"https://api.github.com/users/joshblum/followers","following_url":"https://api.github.com/users/joshblum/following{/other_user}","gists_url":"https://api.github.com/users/joshblum/gists{/gist_id}","starred_url":"https://api.github.com/users/joshblum/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/joshblum/subscriptions","organizations_url":"https://api.github.com/users/joshblum/orgs","repos_url":"https://api.github.com/users/joshblum/repos","events_url":"https://api.github.com/users/joshblum/events{/privacy}","received_events_url":"https://api.github.com/users/joshblum/received_events","type":"User","site_admin":false},"body":"With the introduction of sigchain v2 we initially chained all sig chain related tests to test against both versions. This isn't necessary for tests where the sigchain action isn't the primary focus of the test so we try to remove the double testing in places it seemed redundant. \r\n\r\nStarting runtime:\r\n```\r\n$ go test\r\nPASS\r\nok      github.com/keybase/client/go/engine     406.909s\r\n```\r\n\r\nOnly V1:\r\n```\r\n$ go test\r\nPASS\r\nok      github.com/keybase/client/go/engine     327.448s\r\n```\r\n\r\n```\r\nOnly V2:\r\n$ go test\r\nPASS\r\nok      github.com/keybase/client/go/engine     311.891s\r\n```\r\n\r\nAfter cherrypicking:\r\n```\r\n$ go test\r\nPASS\r\nok      github.com/keybase/client/go/engine     335.090s\r\n```\r\n\r\ncc @mmaxim","created_at":"2018-02-28T21:28:39Z","updated_at":"2018-02-28T21:29:36Z","closed_at":null,"merged_at":null,"merge_commit_sha":"269749429661700aa362468b616b3f7b331d727e","assignee":null,"assignees":[],"requested_reviewers":[{"login":"maxtaco","id":866815,"avatar_url":"https://avatars0.githubusercontent.com/u/866815?v=4","gravatar_id":"","url":"https://api.github.com/users/maxtaco","html_url":"https://github.com/maxtaco","followers_url":"https://api.github.com/users/maxtaco/followers","following_url":"https://api.github.com/users/maxtaco/following{/other_user}","gists_url":"https://api.github.com/users/maxtaco/gists{/gist_id}","starred_url":"https://api.github.com/users/maxtaco/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/maxtaco/subscriptions","organizations_url":"https://api.github.com/users/maxtaco/orgs","repos_url":"https://api.github.com/users/maxtaco/repos","events_url":"https://api.github.com/users/maxtaco/events{/privacy}","received_events_url":"https://api.github.com/users/maxtaco/received_events","type":"User","site_admin":false}],"requested_teams":[],"labels":[],"milestone":null,"commits_url":"https://api.github.com/repos/keybase/client/pulls/10733/commits","review_comments_url":"https://api.github.com/repos/keybase/client/pulls/10733/comments","review_comment_url":"https://api.github.com/repos/keybase/client/pulls/comments{/number}","comments_url":"https://api.github.com/repos/keybase/client/issues/10733/comments","statuses_url":"https://api.github.com/repos/keybase/client/statuses/63dd23b0a7c79a1e6e9b10b15180e388ec3e696d","head":{"label":"keybase:joshblum/CORE-7313-sigchain-tests","ref":"joshblum/CORE-7313-sigchain-tests","sha":"63dd23b0a7c79a1e6e9b10b15180e388ec3e696d","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T15:16:50Z","pushed_at":"2018-02-28T21:28:39Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223155,"stargazers_count":3296,"watchers_count":3296,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1893,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1893,"watchers":3296,"default_branch":"master"}},"base":{"label":"keybase:master","ref":"master","sha":"c88f6f7e0a0780839f3010f61192856853f208cd","user":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"repo":{"id":29099181,"name":"client","full_name":"keybase/client","owner":{"login":"keybase","id":5400834,"avatar_url":"https://avatars2.githubusercontent.com/u/5400834?v=4","gravatar_id":"","url":"https://api.github.com/users/keybase","html_url":"https://github.com/keybase","followers_url":"https://api.github.com/users/keybase/followers","following_url":"https://api.github.com/users/keybase/following{/other_user}","gists_url":"https://api.github.com/users/keybase/gists{/gist_id}","starred_url":"https://api.github.com/users/keybase/starred{/owner}{/repo}","subscriptions_url":"https://api.github.com/users/keybase/subscriptions","organizations_url":"https://api.github.com/users/keybase/orgs","repos_url":"https://api.github.com/users/keybase/repos","events_url":"https://api.github.com/users/keybase/events{/privacy}","received_events_url":"https://api.github.com/users/keybase/received_events","type":"Organization","site_admin":false},"private":false,"html_url":"https://github.com/keybase/client","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","fork":false,"url":"https://api.github.com/repos/keybase/client","forks_url":"https://api.github.com/repos/keybase/client/forks","keys_url":"https://api.github.com/repos/keybase/client/keys{/key_id}","collaborators_url":"https://api.github.com/repos/keybase/client/collaborators{/collaborator}","teams_url":"https://api.github.com/repos/keybase/client/teams","hooks_url":"https://api.github.com/repos/keybase/client/hooks","issue_events_url":"https://api.github.com/repos/keybase/client/issues/events{/number}","events_url":"https://api.github.com/repos/keybase/client/events","assignees_url":"https://api.github.com/repos/keybase/client/assignees{/user}","branches_url":"https://api.github.com/repos/keybase/client/branches{/branch}","tags_url":"https://api.github.com/repos/keybase/client/tags","blobs_url":"https://api.github.com/repos/keybase/client/git/blobs{/sha}","git_tags_url":"https://api.github.com/repos/keybase/client/git/tags{/sha}","git_refs_url":"https://api.github.com/repos/keybase/client/git/refs{/sha}","trees_url":"https://api.github.com/repos/keybase/client/git/trees{/sha}","statuses_url":"https://api.github.com/repos/keybase/client/statuses/{sha}","languages_url":"https://api.github.com/repos/keybase/client/languages","stargazers_url":"https://api.github.com/repos/keybase/client/stargazers","contributors_url":"https://api.github.com/repos/keybase/client/contributors","subscribers_url":"https://api.github.com/repos/keybase/client/subscribers","subscription_url":"https://api.github.com/repos/keybase/client/subscription","commits_url":"https://api.github.com/repos/keybase/client/commits{/sha}","git_commits_url":"https://api.github.com/repos/keybase/client/git/commits{/sha}","comments_url":"https://api.github.com/repos/keybase/client/comments{/number}","issue_comment_url":"https://api.github.com/repos/keybase/client/issues/comments{/number}","contents_url":"https://api.github.com/repos/keybase/client/contents/{+path}","compare_url":"https://api.github.com/repos/keybase/client/compare/{base}...{head}","merges_url":"https://api.github.com/repos/keybase/client/merges","archive_url":"https://api.github.com/repos/keybase/client/{archive_format}{/ref}","downloads_url":"https://api.github.com/repos/keybase/client/downloads","issues_url":"https://api.github.com/repos/keybase/client/issues{/number}","pulls_url":"https://api.github.com/repos/keybase/client/pulls{/number}","milestones_url":"https://api.github.com/repos/keybase/client/milestones{/number}","notifications_url":"https://api.github.com/repos/keybase/client/notifications{?since,all,participating}","labels_url":"https://api.github.com/repos/keybase/client/labels{/name}","releases_url":"https://api.github.com/repos/keybase/client/releases{/id}","deployments_url":"https://api.github.com/repos/keybase/client/deployments","created_at":"2015-01-11T17:17:12Z","updated_at":"2018-02-28T15:16:50Z","pushed_at":"2018-02-28T21:28:39Z","git_url":"git://github.com/keybase/client.git","ssh_url":"git@github.com:keybase/client.git","clone_url":"https://github.com/keybase/client.git","svn_url":"https://github.com/keybase/client","homepage":"","size":223155,"stargazers_count":3296,"watchers_count":3296,"language":"Go","has_issues":true,"has_projects":true,"has_downloads":true,"has_wiki":true,"has_pages":false,"forks_count":316,"mirror_url":null,"archived":false,"open_issues_count":1893,"license":{"key":"bsd-3-clause","name":"BSD 3-Clause \"New\" or \"Revised\" License","spdx_id":"BSD-3-Clause","url":"https://api.github.com/licenses/bsd-3-clause"},"forks":316,"open_issues":1893,"watchers":3296,"default_branch":"master"}},"_links":{"self":{"href":"https://api.github.com/repos/keybase/client/pulls/10733"},"html":{"href":"https://github.com/keybase/client/pull/10733"},"issue":{"href":"https://api.github.com/repos/keybase/client/issues/10733"},"comments":{"href":"https://api.github.com/repos/keybase/client/issues/10733/comments"},"review_comments":{"href":"https://api.github.com/repos/keybase/client/pulls/10733/comments"},"review_comment":{"href":"https://api.github.com/repos/keybase/client/pulls/comments{/number}"},"commits":{"href":"https://api.github.com/repos/keybase/client/pulls/10733/commits"},"statuses":{"href":"https://api.github.com/repos/keybase/client/statuses/63dd23b0a7c79a1e6e9b10b15180e388ec3e696d"}},"author_association":"CONTRIBUTOR","merged":false,"mergeable":true,"rebaseable":true,"mergeable_state":"unstable","merged_by":null,"comments":0,"review_comments":1,"maintainer_can_modify":false,"commits":1,"additions":50,"deletions":233,"changed_files":16}},"public":true,"created_at":"2018-02-28T21:30:01Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312563694","type":"CreateEvent","actor":{"id":1144020,"login":"joshblum","display_login":"joshblum","gravatar_id":"","url":"https://api.github.com/users/joshblum","avatar_url":"https://avatars.githubusercontent.com/u/1144020?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"ref":"joshblum/CORE-7313-sigchain-tests","ref_type":"branch","master_branch":"master","description":"Keybase Go Library, Client, Service, OS X, iOS, Android, Electron","pusher_type":"user"},"public":true,"created_at":"2018-02-28T21:27:35Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}},{"id":"7312540099","type":"PushEvent","actor":{"id":862397,"login":"zanderz","display_login":"zanderz","gravatar_id":"","url":"https://api.github.com/users/zanderz","avatar_url":"https://avatars.githubusercontent.com/u/862397?"},"repo":{"id":29099181,"name":"keybase/client","url":"https://api.github.com/repos/keybase/client"},"payload":{"push_id":2366677906,"size":1,"distinct_size":1,"ref":"refs/heads/zanderz/installer_2018.02.25","head":"959a9f00cbdd7cd9eee4744d6aac73cd04c7ff6c","before":"ddf877c44794dd0302dec47379531865e79f63e7","commits":[{"sha":"959a9f00cbdd7cd9eee4744d6aac73cd04c7ff6c","author":{"email":"steve@keyba.se","name":"Steve Sanders"},"message":"log file updload tweaking","distinct":true,"url":"https://api.github.com/repos/keybase/client/commits/959a9f00cbdd7cd9eee4744d6aac73cd04c7ff6c"}]},"public":true,"created_at":"2018-02-28T21:22:19Z","org":{"id":5400834,"login":"keybase","gravatar_id":"","url":"https://api.github.com/orgs/keybase","avatar_url":"https://avatars.githubusercontent.com/u/5400834?"}}]